const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-BqLXiw-a.js","assets/vendor-CSx_Cq6c.js"])))=>i.map(i=>d[i]);
import{a as e,j as t,r as n,R as r,b as s,A as i,m as a,c as o,g as l}from"./vendor-CSx_Cq6c.js";import{M as c,P as u,C as d,L as h,U as f,S as p,H as m,a as g,X as x,b as y,c as v,A as b,d as w,e as j,f as k,g as _,T as N,h as S,F as E,I as T,Y as C,i as P,j as I,k as A,l as O}from"./icons-COwYNhw_.js";var R;!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var L=e;R=L.createRoot,L.hydrateRoot;const D=()=>t.jsx("div",{className:"hidden md:block bg-gray-100 py-2 border-b border-gray-200",children:t.jsxs("div",{className:"container mx-auto px-4 flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[t.jsxs("a",{href:"mailto:info@shmaquadekor.com",className:"flex items-center text-gray-600 hover:text-blue-600 transition-colors",children:[t.jsx(c,{size:14,className:"mr-1"}),t.jsx("span",{children:"info@shmaquadekor.com"})]}),t.jsxs("a",{href:"tel:+78001234567",className:"flex items-center text-gray-600 hover:text-blue-600 transition-colors",children:[t.jsx(u,{size:14,className:"mr-1"}),t.jsx("span",{children:"8 (800) 123-45-67"})]})]}),t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(d,{size:14,className:"mr-1"}),t.jsx("span",{children:"Пн-Пт: 9:00-20:00, Сб-Вс: 10:00-18:00"})]})]})});
/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M.apply(this,arguments)}var z,$;($=z||(z={})).Pop="POP",$.Push="PUSH",$.Replace="REPLACE";const F="popstate";function U(e){return void 0===e&&(e={}),function(e,t,n,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o=z.Pop,l=null,c=u();null==c&&(c=0,a.replaceState(M({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function d(){o=z.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:m.location,delta:t})}function h(e,t){o=z.Push;let n=W(m.location,e,t);c=u()+1;let r=H(n,c),d=m.createHref(n);try{a.pushState(r,"",d)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;s.location.assign(d)}i&&l&&l({action:o,location:m.location,delta:1})}function f(e,t){o=z.Replace;let n=W(m.location,e,t);c=u();let r=H(n,c),s=m.createHref(n);a.replaceState(r,"",s),i&&l&&l({action:o,location:m.location,delta:0})}function p(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"==typeof e?e:V(e);return n=n.replace(/ $/,"%20"),q(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}let m={get action(){return o},get location(){return e(s,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(F,d),l=e,()=>{s.removeEventListener(F,d),l=null}},createHref:e=>t(s,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:f,go:e=>a.go(e)};return m}((function(e,t){let{pathname:n,search:r,hash:s}=e.location;return W("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"==typeof t?t:V(t)}),0,e)}function q(e,t){if(!1===e||null==e)throw new Error(t)}function B(e,t){if(!e)try{throw new Error(t)}catch(n){}}function H(e,t){return{usr:e.state,key:e.key,idx:t}}function W(e,t,n,r){return void 0===n&&(n=null),M({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?G(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function V(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function G(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var J,K;function Y(e,t,n){return void 0===n&&(n="/"),function(e,t,n,r){let s="string"==typeof t?G(t):t,i=ue(s.pathname||"/",n);if(null==i)return null;let a=X(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(a);let o=null;for(let l=0;null==o&&l<a.length;++l){let e=ce(i);o=oe(a[l],e,r)}return o}(e,t,n,!1)}function X(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(q(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=pe([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(q(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),X(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:ae(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of Q(e.path))s(e,t,r);else s(e,t)})),t}function Q(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=Q(r.join("/")),o=[];return o.push(...a.map((e=>""===e?i:[i,e].join("/")))),s&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}(K=J||(J={})).data="data",K.deferred="deferred",K.redirect="redirect",K.error="error";const Z=/^:[\w-]+$/,ee=3,te=2,ne=1,re=10,se=-2,ie=e=>"*"===e;function ae(e,t){let n=e.split("/"),r=n.length;return n.some(ie)&&(r+=se),t&&(r+=te),n.filter((e=>!ie(e))).reduce(((e,t)=>e+(Z.test(t)?ee:""===t?ne:re)),r)}function oe(e,t,n){let{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=le({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=le({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:pe([i,u.pathname]),pathnameBase:me(pe([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=pe([i,u.pathnameBase]))}return a}function le(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);B("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:i,pathnameBase:a,pattern:e}}function ce(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return B(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function ue(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function de(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function he(e,t){let n=function(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function fe(e,t,n,r){let s;void 0===r&&(r=!1),"string"==typeof e?s=G(e):(s=M({},e),q(!s.pathname||!s.pathname.includes("?"),de("?","pathname","search",s)),q(!s.pathname||!s.pathname.includes("#"),de("#","pathname","hash",s)),q(!s.search||!s.search.includes("#"),de("#","search","hash",s)));let i,a=""===e||""===s.pathname,o=a?"/":s.pathname;if(null==o)i=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"==typeof e?G(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:ge(r),hash:xe(s)}}(s,i),c=o&&"/"!==o&&o.endsWith("/"),u=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const pe=e=>e.join("/").replace(/\/\/+/g,"/"),me=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ge=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",xe=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const ye=["post","put","patch","delete"];new Set(ye);const ve=["get",...ye];
/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},be.apply(this,arguments)}new Set(ve);const we=n.createContext(null),je=n.createContext(null),ke=n.createContext(null),_e=n.createContext(null),Ne=n.createContext({outlet:null,matches:[],isDataRoute:!1}),Se=n.createContext(null);function Ee(){return null!=n.useContext(_e)}function Te(){return Ee()||q(!1),n.useContext(_e).location}function Ce(e){n.useContext(ke).static||n.useLayoutEffect(e)}function Pe(){let{isDataRoute:e}=n.useContext(Ne);return e?function(){let{router:e}=function(){let e=n.useContext(we);return e||q(!1),e}(Me.UseNavigateStable),t=$e(ze.UseNavigateStable),r=n.useRef(!1);return Ce((()=>{r.current=!0})),n.useCallback((function(n,s){void 0===s&&(s={}),r.current&&("number"==typeof n?e.navigate(n):e.navigate(n,be({fromRouteId:t},s)))}),[e,t])}():function(){Ee()||q(!1);let e=n.useContext(we),{basename:t,future:r,navigator:s}=n.useContext(ke),{matches:i}=n.useContext(Ne),{pathname:a}=Te(),o=JSON.stringify(he(i,r.v7_relativeSplatPath)),l=n.useRef(!1);return Ce((()=>{l.current=!0})),n.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"==typeof n)return void s.go(n);let i=fe(n,JSON.parse(o),a,"path"===r.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:pe([t,i.pathname])),(r.replace?s.replace:s.push)(i,r.state,r)}),[t,s,o,a,e])}()}function Ie(e,t){let{relative:r}=void 0===t?{}:t,{future:s}=n.useContext(ke),{matches:i}=n.useContext(Ne),{pathname:a}=Te(),o=JSON.stringify(he(i,s.v7_relativeSplatPath));return n.useMemo((()=>fe(e,JSON.parse(o),a,"path"===r)),[e,o,a,r])}function Ae(e,t){return function(e,t,r,s){Ee()||q(!1);let{navigator:i}=n.useContext(ke),{matches:a}=n.useContext(Ne),o=a[a.length-1],l=o?o.params:{};!o||o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u,d=Te();if(t){var h;let e="string"==typeof t?G(t):t;"/"===c||(null==(h=e.pathname)?void 0:h.startsWith(c))||q(!1),u=e}else u=d;let f=u.pathname||"/",p=f;if("/"!==c){let e=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let m=Y(e,{pathname:p}),g=function(e,t,r,s){var i;void 0===t&&(t=[]);void 0===r&&(r=null);void 0===s&&(s=null);if(null==e){var a;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(a=s)&&a.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let o=e,l=null==(i=r)?void 0:i.errors;if(null!=l){let e=o.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||q(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let n=0;n<o.length;n++){let e=o[n];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=n),e.route.id){let{loaderData:t,errors:n}=r,s=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||s){c=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight(((e,s,i)=>{let a,d=!1,h=null,f=null;r&&(a=l&&s.route.id?l[s.route.id]:void 0,h=s.route.errorElement||Re,c&&(u<0&&0===i?(d=!0,f=null):u===i&&(d=!0,f=s.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,i+1)),m=()=>{let t;return t=a?h:d?f:s.route.Component?n.createElement(s.route.Component,null):s.route.element?s.route.element:e,n.createElement(De,{match:s,routeContext:{outlet:e,matches:p,isDataRoute:null!=r},children:t})};return r&&(s.route.ErrorBoundary||s.route.errorElement||0===i)?n.createElement(Le,{location:r.location,revalidation:r.revalidation,component:h,error:a,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()}),null)}(m&&m.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:pe([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:pe([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,r,s);if(t&&g)return n.createElement(_e.Provider,{value:{location:be({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:z.Pop}},g);return g}(e,t)}function Oe(){let e=function(){var e;let t=n.useContext(Se),r=function(){let e=n.useContext(je);return e||q(!1),e}(ze.UseRouteError),s=$e(ze.UseRouteError);if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[s]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),r?n.createElement("pre",{style:s},r):null,null)}const Re=n.createElement(Oe,null);class Le extends n.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){}render(){return void 0!==this.state.error?n.createElement(Ne.Provider,{value:this.props.routeContext},n.createElement(Se.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function De(e){let{routeContext:t,match:r,children:s}=e,i=n.useContext(we);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),n.createElement(Ne.Provider,{value:t},s)}var Me=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Me||{}),ze=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ze||{});function $e(e){let t=function(){let e=n.useContext(Ne);return e||q(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||q(!1),r.route.id}function Fe(e){q(!1)}function Ue(e){let{basename:t="/",children:r=null,location:s,navigationType:i=z.Pop,navigator:a,static:o=!1,future:l}=e;Ee()&&q(!1);let c=t.replace(/^\/*/,"/"),u=n.useMemo((()=>({basename:c,navigator:a,static:o,future:be({v7_relativeSplatPath:!1},l)})),[c,l,a,o]);"string"==typeof s&&(s=G(s));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=s,g=n.useMemo((()=>{let e=ue(d,c);return null==e?null:{location:{pathname:e,search:h,hash:f,state:p,key:m},navigationType:i}}),[c,d,h,f,p,m,i]);return null==g?null:n.createElement(ke.Provider,{value:u},n.createElement(_e.Provider,{children:r,value:g}))}function qe(e){let{children:t,location:n}=e;return Ae(Be(t),n)}function Be(e,t){void 0===t&&(t=[]);let r=[];return n.Children.forEach(e,((e,s)=>{if(!n.isValidElement(e))return;let i=[...t,s];if(e.type===n.Fragment)return void r.push.apply(r,Be(e.props.children,i));e.type!==Fe&&q(!1),e.props.index&&e.props.children&&q(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Be(e.props.children,i)),r.push(a)})),r}
/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function He(){return He=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},He.apply(this,arguments)}new Promise((()=>{}));const We=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Bc){}const Ve=r.startTransition;function Ge(e){let{basename:t,children:r,future:s,window:i}=e,a=n.useRef();null==a.current&&(a.current=U({window:i,v5Compat:!0}));let o=a.current,[l,c]=n.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},d=n.useCallback((e=>{u&&Ve?Ve((()=>c(e))):c(e)}),[c,u]);return n.useLayoutEffect((()=>o.listen(d)),[o,d]),n.useEffect((()=>{return null==(e=s)||e.v7_startTransition,void(null==e||e.v7_relativeSplatPath);var e}),[s]),n.createElement(Ue,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:s})}const Je="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Ke=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ye=n.forwardRef((function(e,t){let r,{onClick:s,relative:i,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,f=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,We),{basename:p}=n.useContext(ke),m=!1;if("string"==typeof u&&Ke.test(u)&&(r=u,Je))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=ue(t.pathname,p);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:m=!0}catch(Bc){}let g=function(e,t){let{relative:r}=void 0===t?{}:t;Ee()||q(!1);let{basename:s,navigator:i}=n.useContext(ke),{hash:a,pathname:o,search:l}=Ie(e,{relative:r}),c=o;return"/"!==s&&(c="/"===o?s:pe([s,o])),i.createHref({pathname:c,search:l,hash:a})}(u,{relative:i}),x=function(e,t){let{target:r,replace:s,state:i,preventScrollReset:a,relative:o,viewTransition:l}=void 0===t?{}:t,c=Pe(),u=Te(),d=Ie(e,{relative:o});return n.useCallback((t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,r)){t.preventDefault();let n=void 0!==s?s:V(u)===V(d);c(e,{replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l})}}),[u,c,d,s,i,r,e,a,o,l])}(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:i,viewTransition:h});return n.createElement("a",He({},f,{href:r||g,onClick:m||a?s:function(e){s&&s(e),e.defaultPrevented||x(e)},ref:t,target:c}))}));var Xe,Qe,Ze,et;(Qe=Xe||(Xe={})).UseScrollRestoration="useScrollRestoration",Qe.UseSubmit="useSubmit",Qe.UseSubmitFetcher="useSubmitFetcher",Qe.UseFetcher="useFetcher",Qe.useViewTransitionState="useViewTransitionState",(et=Ze||(Ze={})).UseFetcher="useFetcher",et.UseFetchers="useFetchers",et.UseScrollRestoration="useScrollRestoration";const tt={},nt=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map((e=>{if((e=function(e){return"/"+e}(e))in tt)return;tt[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,n&&s.setAttribute("nonce",n),document.head.appendChild(s),t?new Promise(((t,n)=>{s.addEventListener("load",t),s.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then((t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)}))};class rt extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class st extends rt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class it extends rt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class at extends rt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ot=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(Bc){i(Bc)}}function o(e){try{l(r.throw(e))}catch(Bc){i(Bc)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};class lt{constructor(e,{headers:t={},customFetch:n}={}){this.url=e,this.headers=t,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>nt((async()=>{const{default:e}=await Promise.resolve().then((()=>mt));return{default:e}}),void 0).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)})(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return ot(this,void 0,void 0,(function*(){try{const{headers:r,method:s,body:i}=t;let a,o={};i&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",a=i):"string"==typeof i?(o["Content-Type"]="text/plain",a=i):"undefined"!=typeof FormData&&i instanceof FormData?a=i:(o["Content-Type"]="application/json",a=JSON.stringify(i)));const l=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:a}).catch((e=>{throw new st(e)})),c=l.headers.get("x-relay-error");if(c&&"true"===c)throw new it(l);if(!l.ok)throw new at(l);let u,d=(null!==(n=l.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return u="application/json"===d?yield l.json():"application/octet-stream"===d?yield l.blob():"multipart/form-data"===d?yield l.formData():yield l.text(),{data:u,error:null}}catch(r){return{data:null,error:r}}}))}}var ct=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const ut=ct.fetch,dt=ct.fetch.bind(ct),ht=ct.Headers,ft=ct.Request,pt=ct.Response,mt=Object.freeze(Object.defineProperty({__proto__:null,Headers:ht,Request:ft,Response:pt,default:dt,fetch:ut},Symbol.toStringTag,{value:"Module"}));class gt extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class xt{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=dt:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async e=>{var t,n,r;let s=null,i=null,a=null,o=e.status,l=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(i="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),c=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");r&&c&&c.length>1&&(a=parseInt(c[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(i)&&(i.length>1?(s={code:"PGRST116",details:`Results contain ${i.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},i=null,a=null,o=406,l="Not Acceptable"):i=1===i.length?i[0]:null)}else{const t=await e.text();try{s=JSON.parse(t),Array.isArray(s)&&404===e.status&&(i=[],s=null,o=200,l="OK")}catch(c){404===e.status&&""===t?(o=204,l="No Content"):s={message:t}}if(s&&this.isMaybeSingle&&(null===(r=null==s?void 0:s.details)||void 0===r?void 0:r.includes("0 rows"))&&(s=null,o=200,l="OK"),s&&this.shouldThrowOnError)throw new gt(s)}return{error:s,data:i,count:a,status:o,statusText:l}}));return this.shouldThrowOnError||(n=n.catch((e=>{var t,n,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}}))),n.then(e,t)}}class yt extends xt{select(e){let t=!1;const n=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=void 0===r?"offset":`${r}.offset`,i=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var a;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.Accept)&&void 0!==a?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${l}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class vt extends yt{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=t.map((e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";"plain"===r?s="pl":"phrase"===r?s="ph":"websearch"===r&&(s="w");const i=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach((([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)})),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}class bt{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=t,this.schema=n,this.fetch=r}select(e,{head:t=!1,count:n}={}){const r=t?"HEAD":"GET";let s=!1;const i=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e))).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new vt({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new vt({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){const i=[`resolution=${n?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new vt({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new vt({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new vt({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const wt={"X-Client-Info":"postgrest-js/1.9.2"};class jt{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},wt),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new bt(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new jt(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,count:r}={}){let s;const i=new URL(`${this.url}/rpc/${e}`);let a;n?(s="HEAD",Object.entries(t).forEach((([e,t])=>{i.searchParams.append(e,`${t}`)}))):(s="POST",a=t);const o=Object.assign({},this.headers);return r&&(o.Prefer=`count=${r}`),new vt({method:s,url:i,headers:o,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const kt={"X-Client-Info":"realtime-js/2.9.3"};var _t,Nt,St,Et,Tt,Ct,Pt,It,At,Ot,Rt,Lt,Dt;(Nt=_t||(_t={}))[Nt.connecting=0]="connecting",Nt[Nt.open=1]="open",Nt[Nt.closing=2]="closing",Nt[Nt.closed=3]="closed",(Et=St||(St={})).closed="closed",Et.errored="errored",Et.joined="joined",Et.joining="joining",Et.leaving="leaving",(Ct=Tt||(Tt={})).close="phx_close",Ct.error="phx_error",Ct.join="phx_join",Ct.reply="phx_reply",Ct.leave="phx_leave",Ct.access_token="access_token",(Pt||(Pt={})).websocket="websocket",(At=It||(It={})).Connecting="connecting",At.Open="open",At.Closing="closing",At.Closed="closed";class Mt{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}class zt{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),s=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=n.decode(e.slice(i,i+r));i+=r;const o=n.decode(e.slice(i,i+s));i+=s;return{ref:null,topic:a,event:o,payload:JSON.parse(n.decode(e.slice(i,e.byteLength)))}}}class $t{constructor(e,t,n={},r=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}(Rt=Ot||(Ot={})).SYNC="sync",Rt.JOIN="join",Rt.LEAVE="leave";class Ft{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},(e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ft.syncState(this.state,e,t,n),this.pendingDiffs.forEach((e=>{this.state=Ft.syncDiff(this.state,e,t,n)})),this.pendingDiffs=[],r()})),this.channel._on(n.diff,{},(e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Ft.syncDiff(this.state,e,t,n),r())})),this.onJoin(((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})})),this.onLeave(((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,n,r){const s=this.cloneDeep(e),i=this.transformState(t),a={},o={};return this.map(s,((e,t)=>{i[e]||(o[e]=t)})),this.map(i,((e,t)=>{const n=s[e];if(n){const r=t.map((e=>e.presence_ref)),s=n.map((e=>e.presence_ref)),i=t.filter((e=>s.indexOf(e.presence_ref)<0)),l=n.filter((e=>r.indexOf(e.presence_ref)<0));i.length>0&&(a[e]=i),l.length>0&&(o[e]=l)}else a[e]=t})),this.syncDiff(s,{joins:a,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:s,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(s,((t,r)=>{var s;const i=null!==(s=e[t])&&void 0!==s?s:[];if(e[t]=this.cloneDeep(r),i.length>0){const n=e[t].map((e=>e.presence_ref)),r=i.filter((e=>n.indexOf(e.presence_ref)<0));e[t].unshift(...r)}n(t,i,r)})),this.map(i,((t,n)=>{let s=e[t];if(!s)return;const i=n.map((e=>e.presence_ref));s=s.filter((e=>i.indexOf(e.presence_ref)<0)),e[t]=s,r(t,s,n),0===s.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((n=>t(n,e[n])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):r,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(Dt=Lt||(Lt={})).abstime="abstime",Dt.bool="bool",Dt.date="date",Dt.daterange="daterange",Dt.float4="float4",Dt.float8="float8",Dt.int2="int2",Dt.int4="int4",Dt.int4range="int4range",Dt.int8="int8",Dt.int8range="int8range",Dt.json="json",Dt.jsonb="jsonb",Dt.money="money",Dt.numeric="numeric",Dt.oid="oid",Dt.reltime="reltime",Dt.text="text",Dt.time="time",Dt.timestamp="timestamp",Dt.timestamptz="timestamptz",Dt.timetz="timetz",Dt.tsrange="tsrange",Dt.tstzrange="tstzrange";const Ut=(e,t,n={})=>{var r;const s=null!==(r=n.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce(((n,r)=>(n[r]=qt(r,e,t,s),n)),{})},qt=(e,t,n,r)=>{const s=t.find((t=>t.name===e)),i=null==s?void 0:s.type,a=n[e];return i&&!r.includes(i)?Bt(i,a):Ht(a)},Bt=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return Jt(t,n)}switch(e){case Lt.bool:return Wt(t);case Lt.float4:case Lt.float8:case Lt.int2:case Lt.int4:case Lt.int8:case Lt.numeric:case Lt.oid:return Vt(t);case Lt.json:case Lt.jsonb:return Gt(t);case Lt.timestamp:return Kt(t);case Lt.abstime:case Lt.date:case Lt.daterange:case Lt.int4range:case Lt.int8range:case Lt.money:case Lt.reltime:case Lt.text:case Lt.time:case Lt.timestamptz:case Lt.timetz:case Lt.tsrange:case Lt.tstzrange:default:return Ht(t)}},Ht=e=>e,Wt=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Vt=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Gt=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},Jt=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const i=e.slice(1,n);try{r=JSON.parse("["+i+"]")}catch(s){r=i?i.split(","):[]}return r.map((e=>Bt(t,e)))}return e},Kt=e=>"string"==typeof e?e.replace(" ","T"):e;var Yt,Xt,Qt,Zt,en,tn;(Xt=Yt||(Yt={})).ALL="*",Xt.INSERT="INSERT",Xt.UPDATE="UPDATE",Xt.DELETE="DELETE",(Zt=Qt||(Qt={})).BROADCAST="broadcast",Zt.PRESENCE="presence",Zt.POSTGRES_CHANGES="postgres_changes",(tn=en||(en={})).SUBSCRIBED="SUBSCRIBED",tn.TIMED_OUT="TIMED_OUT",tn.CLOSED="CLOSED",tn.CHANNEL_ERROR="CHANNEL_ERROR";class nn{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=St.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new $t(this,Tt.join,this.params,this.timeout),this.rejoinTimer=new Mt((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=St.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=St.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=St.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=St.errored,this.rejoinTimer.scheduleTimeout())})),this._on(Tt.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new Ft(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:i}}=this.params;this._onError((t=>e&&e("CHANNEL_ERROR",t))),this._onClose((()=>e&&e("CLOSED")));const a={},o={broadcast:s,presence:i,postgres_changes:null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map((e=>e.filter)))&&void 0!==r?r:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:o},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(({postgres_changes:t})=>{var n;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),void 0!==t){const r=this.bindings.postgres_changes,s=null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0,i=[];for(let n=0;n<s;n++){const s=r[n],{filter:{event:a,schema:o,table:l,filter:c}}=s,u=t&&t[n];if(!u||u.event!==a||u.schema!==o||u.table!==l||u.filter!==c)return this.unsubscribe(),void(e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},s),{id:u.id}))}return this.bindings.postgres_changes=i,void(e&&e("SUBSCRIBED"))}e&&e("SUBSCRIBED")})).receive("error",(t=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{e&&e("TIMED_OUT")}))}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise((n=>{var r,s,i;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(s=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===s?void 0:s.broadcast)||void 0===i?void 0:i.ack)||n("ok"),a.receive("ok",(()=>n("ok"))),a.receive("timeout",(()=>n("timed out")))}));{const{event:i,payload:a}=e,o={method:"POST",headers:{apikey:null!==(n=this.socket.apiKey)&&void 0!==n?n:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(r=t.timeout)&&void 0!==r?r:this.timeout)).ok?"ok":"error"}catch(s){return"AbortError"===s.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=St.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((n=>{const r=new $t(this,Tt.leave,{},e);r.receive("ok",(()=>{t(),n("ok")})).receive("timeout",(()=>{t(),n("timed out")})).receive("error",(()=>{n("error")})),r.send(),this._canPush()||r.trigger("ok",{})}))}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,n){const r=new AbortController,s=setTimeout((()=>r.abort()),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(s),i}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new $t(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,s;const i=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:c}=Tt;if(n&&[a,o,l,c].indexOf(i)>=0&&n!==this._joinRef())return;let u=this._onMessage(i,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter((e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===i})).map((e=>e.callback(u,n))):null===(s=this.bindings[i])||void 0===s||s.filter((e=>{var n,r,s,a,o,l;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(r=t.ids)||void 0===r?void 0:r.includes(i))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null===(s=t.data)||void 0===s?void 0:s.type.toLocaleLowerCase()))}{const n=null===(o=null===(a=null==e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i})).map((e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:r,type:s,errors:i}=e,a={schema:t,table:n,commit_timestamp:r,eventType:s,new:{},old:{},errors:i};u=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(u,n)}))}_isClosed(){return this.state===St.closed}_isJoined(){return this.state===St.joined}_isJoining(){return this.state===St.joining}_isLeaving(){return this.state===St.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),s={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter((e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&nn.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Tt.close,{},e)}_onError(e){this._on(Tt.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=St.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Ut(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Ut(e.columns,e.old_record)),t}}const rn=()=>{},sn="undefined"!=typeof WebSocket;class an{constructor(e,t){var n;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=kt,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=rn,this.conn=null,this.sendBuffer=[],this.serializer=new zt,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>nt((async()=>{const{default:e}=await Promise.resolve().then((()=>mt));return{default:e}}),void 0).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${Pt.websocket}`,(null==t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey;r&&(this.accessToken=r,this.apiKey=r),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Mt((async()=>{this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!this.conn)if(this.transport)this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});else{if(sn)return this.conn=new WebSocket(this._endPointURL()),void this.setupConnection();this.conn=new on(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),nt((async()=>{const{default:e}=await import("./browser-BqLXiw-a.js").then((e=>e.b));return{default:e}}),__vite__mapDeps([0,1])).then((({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()}))}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map((e=>e.unsubscribe())));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case _t.connecting:return It.Connecting;case _t.open:return It.Open;case _t.closing:return It.Closing;default:return It.Closed}}isConnected(){return this.connectionState()===It.Open}channel(e,t={config:{}}){const n=new nn(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:r,ref:s}=e,i=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};this.log("push",`${t} ${n} (${s})`,r),this.isConnected()?i():this.sendBuffer.push(i)}setAuth(e){this.accessToken=e,this.channels.forEach((t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(Tt.access_token,{access_token:e})}))}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()))}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:n,payload:r,ref:s}=e;(s&&s===this.pendingHeartbeatRef||n===(null==r?void 0:r.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${r.status||""} ${t} ${n} ${s&&"("+s+")"||""}`,r),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(n,r,s))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this._sendHeartbeat()),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger(Tt.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class on{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=_t.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class ln extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function cn(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class un extends ln{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class dn extends ln{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var hn=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(Bc){i(Bc)}}function o(e){try{l(r.throw(e))}catch(Bc){i(Bc)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const fn=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>nt((async()=>{const{default:e}=await Promise.resolve().then((()=>mt));return{default:e}}),void 0).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)};var pn=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(Bc){i(Bc)}}function o(e){try{l(r.throw(e))}catch(Bc){i(Bc)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const mn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),gn=(e,t)=>pn(void 0,void 0,void 0,(function*(){const n=yield hn(void 0,void 0,void 0,(function*(){return"undefined"==typeof Response?(yield nt((()=>Promise.resolve().then((()=>mt))),void 0)).Response:Response}));e instanceof n?e.json().then((n=>{t(new un(mn(n),e.status||500))})).catch((e=>{t(new dn(mn(e),e))})):t(new dn(mn(e),e))}));function xn(e,t,n,r,s,i){return pn(this,void 0,void 0,(function*(){return new Promise(((a,o)=>{e(n,((e,t,n,r)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))})(t,r,s,i)).then((e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()})).then((e=>a(e))).catch((e=>gn(e,o)))}))}))}function yn(e,t,n,r){return pn(this,void 0,void 0,(function*(){return xn(e,"GET",t,n,r)}))}function vn(e,t,n,r,s){return pn(this,void 0,void 0,(function*(){return xn(e,"POST",t,r,s,n)}))}function bn(e,t,n,r,s){return pn(this,void 0,void 0,(function*(){return xn(e,"DELETE",t,r,s,n)}))}var wn=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(Bc){i(Bc)}}function o(e){try{l(r.throw(e))}catch(Bc){i(Bc)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const jn={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},kn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class _n{constructor(e,t={},n,r){this.url=e,this.headers=t,this.bucketId=n,this.fetch=fn(r)}uploadOrUpdate(e,t,n,r){return wn(this,void 0,void 0,(function*(){try{let s;const i=Object.assign(Object.assign({},kn),r),a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),s.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(s=n,s.append("cacheControl",i.cacheControl)):(s=n,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType);const o=this._removeEmptyFolders(t),l=this._getFinalPath(o),c=yield this.fetch(`${this.url}/object/${l}`,Object.assign({method:e,body:s,headers:a},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{})),u=yield c.json();if(c.ok)return{data:{path:o,id:u.Id,fullPath:u.Key},error:null};return{data:null,error:u}}catch(s){if(cn(s))return{data:null,error:s};throw s}}))}upload(e,t,n){return wn(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,n)}))}uploadToSignedUrl(e,t,n,r){return wn(this,void 0,void 0,(function*(){const s=this._removeEmptyFolders(e),i=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:kn.upsert},r),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType);const o=yield this.fetch(a.toString(),{method:"PUT",body:e,headers:i}),l=yield o.json();if(o.ok)return{data:{path:s,fullPath:l.Key},error:null};return{data:null,error:l}}catch(o){if(cn(o))return{data:null,error:o};throw o}}))}createSignedUploadUrl(e){return wn(this,void 0,void 0,(function*(){try{let t=this._getFinalPath(e);const n=yield vn(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),r=new URL(this.url+n.url),s=r.searchParams.get("token");if(!s)throw new ln("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:s},error:null}}catch(t){if(cn(t))return{data:null,error:t};throw t}}))}update(e,t,n){return wn(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,n)}))}move(e,t){return wn(this,void 0,void 0,(function*(){try{return{data:yield vn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(n){if(cn(n))return{data:null,error:n};throw n}}))}copy(e,t){return wn(this,void 0,void 0,(function*(){try{return{data:{path:(yield vn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(n){if(cn(n))return{data:null,error:n};throw n}}))}createSignedUrl(e,t,n){return wn(this,void 0,void 0,(function*(){try{let r=this._getFinalPath(e),s=yield vn(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const i=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(r){if(cn(r))return{data:null,error:r};throw r}}))}createSignedUrls(e,t,n){return wn(this,void 0,void 0,(function*(){try{const r=yield vn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${s}`):null}))),error:null}}catch(r){if(cn(r))return{data:null,error:r};throw r}}))}download(e,t){return wn(this,void 0,void 0,(function*(){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),s=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield yn(this.fetch,`${this.url}/${n}/${t}${s}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(i){if(cn(i))return{data:null,error:i};throw i}}))}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==s&&r.push(s);const i=void 0!==(null==t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&r.push(a);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${o}`)}}}remove(e){return wn(this,void 0,void 0,(function*(){try{return{data:yield bn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(cn(t))return{data:null,error:t};throw t}}))}list(e,t,n){return wn(this,void 0,void 0,(function*(){try{const r=Object.assign(Object.assign(Object.assign({},jn),t),{prefix:e||""});return{data:yield vn(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(cn(r))return{data:null,error:r};throw r}}))}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Nn={"X-Client-Info":"storage-js/2.5.5"};var Sn=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(Bc){i(Bc)}}function o(e){try{l(r.throw(e))}catch(Bc){i(Bc)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};class En{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Nn),t),this.fetch=fn(n)}listBuckets(){return Sn(this,void 0,void 0,(function*(){try{return{data:yield yn(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(cn(e))return{data:null,error:e};throw e}}))}getBucket(e){return Sn(this,void 0,void 0,(function*(){try{return{data:yield yn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(cn(t))return{data:null,error:t};throw t}}))}createBucket(e,t={public:!1}){return Sn(this,void 0,void 0,(function*(){try{return{data:yield vn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(cn(n))return{data:null,error:n};throw n}}))}updateBucket(e,t){return Sn(this,void 0,void 0,(function*(){try{const n=yield function(e,t,n,r,s){return pn(this,void 0,void 0,(function*(){return xn(e,"PUT",t,r,s,n)}))}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(n){if(cn(n))return{data:null,error:n};throw n}}))}emptyBucket(e){return Sn(this,void 0,void 0,(function*(){try{return{data:yield vn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(cn(t))return{data:null,error:t};throw t}}))}deleteBucket(e){return Sn(this,void 0,void 0,(function*(){try{return{data:yield bn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(cn(t))return{data:null,error:t};throw t}}))}}class Tn extends En{constructor(e,t={},n){super(e,t,n)}from(e){return new _n(this.url,this.headers,e,this.fetch)}}let Cn="";Cn="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Pn={headers:{"X-Client-Info":`supabase-js-${Cn}/2.39.7`}},In={schema:"public"},An={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},On={};var Rn=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(Bc){i(Bc)}}function o(e){try{l(r.throw(e))}catch(Bc){i(Bc)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const Ln=(e,t,n)=>{const r=(e=>{let t;return t=e||("undefined"==typeof fetch?dt:fetch),(...e)=>t(...e)})(n),s="undefined"==typeof Headers?ht:Headers;return(n,i)=>Rn(void 0,void 0,void 0,(function*(){var a;const o=null!==(a=yield t())&&void 0!==a?a:e;let l=new s(null==i?void 0:i.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),r(n,Object.assign(Object.assign({},i),{headers:l}))}))};const Dn=()=>"undefined"!=typeof document,Mn={tested:!1,writable:!1},zn=()=>{if(!Dn())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(Bc){return!1}if(Mn.tested)return Mn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Mn.tested=!0,Mn.writable=!0}catch(Bc){Mn.tested=!0,Mn.writable=!1}return Mn.writable};function $n(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach(((e,n)=>{t[n]=e}))}catch(Bc){}return n.searchParams.forEach(((e,n)=>{t[n]=e})),t}const Fn=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>nt((async()=>{const{default:e}=await Promise.resolve().then((()=>mt));return{default:e}}),void 0).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},Un=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},qn=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},Bn=async(e,t)=>{await e.removeItem(t)};class Hn{constructor(){this.promise=new Hn.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function Wn(e){const t=e.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n,r,s,i,a,o,l,c="",u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)i=t.indexOf(e.charAt(u++)),a=t.indexOf(e.charAt(u++)),o=t.indexOf(e.charAt(u++)),l=t.indexOf(e.charAt(u++)),n=i<<2|a>>4,r=(15&a)<<4|o>>2,s=(3&o)<<6|l,c+=String.fromCharCode(n),64!=o&&0!=r&&(c+=String.fromCharCode(r)),64!=l&&0!=s&&(c+=String.fromCharCode(s));return c}(n))}function Vn(e){return("0"+e.toString(16)).substr(-2)}function Gn(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Vn).join("")}async function Jn(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map((e=>String.fromCharCode(e))).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}Hn.promiseConstructor=Promise;class Kn extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function Yn(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class Xn extends Kn{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Qn extends Kn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Zn extends Kn{constructor(e,t,n){super(e),this.name=t,this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class er extends Zn{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class tr extends Zn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class nr extends Zn{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class rr extends Zn{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sr extends Zn{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ir extends Zn{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function ar(e){return Yn(e)&&"AuthRetryableFetchError"===e.name}class or extends Zn{constructor(e,t,n){super(e,"AuthWeakPasswordError",t),this.reasons=n}}const lr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),cr=[502,503,504];async function ur(e){if(!("object"==typeof(t=e)&&null!==t&&"status"in t&&"ok"in t&&"json"in t&&"function"==typeof t.json))throw new ir(lr(e),0);var t;if(cr.includes(e.status))throw new ir(lr(e),e.status);let n;try{n=await e.json()}catch(Bc){throw new Qn(lr(Bc),Bc)}if("object"==typeof n&&n&&"object"==typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0))throw new or(lr(n),e.status,n.weak_password.reasons);throw new Xn(lr(n),e.status||500)}async function dr(e,t,n,r){var s;const i=Object.assign({},null==r?void 0:r.headers);(null==r?void 0:r.jwt)&&(i.Authorization=`Bearer ${r.jwt}`);const a=null!==(s=null==r?void 0:r.query)&&void 0!==s?s:{};(null==r?void 0:r.redirectTo)&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,n,r,s,i){const a=((e,t,n,r)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))})(t,r,s,i);let o;try{o=await e(n,a)}catch(Bc){throw new ir(lr(Bc),0)}o.ok||await ur(o);if(null==r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(Bc){await ur(Bc)}}(e,t,n+o,{headers:i,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function hr(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function fr(e){const t=hr(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0)&&(t.data.weak_password=e.weak_password),t}function pr(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function mr(e){return{data:e,error:null}}function gr(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},user:Object.assign({},a)},error:null}}function xr(e){return e}class yr{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Fn(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await dr(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Yn(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await dr(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:pr})}catch(n){if(Yn(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null==n?void 0:n.newEmail,delete r.newEmail),await dr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:gr,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(Yn(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await dr(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:pr})}catch(t){if(Yn(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,s,i,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await dr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(s=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==s?s:""},xform:xr});if(c.error)throw c.error;const u=await c.json(),d=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,h=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t})),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(Yn(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){try{return await dr(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:pr})}catch(t){if(Yn(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await dr(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:pr})}catch(n){if(Yn(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await dr(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:pr})}catch(n){if(Yn(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await dr(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(Yn(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await dr(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Yn(t))return{data:null,error:t};throw t}}}const vr="0.0.0",br={"X-Client-Info":`gotrue-js/${vr}`},wr={getItem:e=>zn()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{zn()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{zn()&&globalThis.localStorage.removeItem(e)}};function jr(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const kr=!!(globalThis&&zn()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class _r extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Nr extends _r{}async function Sr(e,t,n){const r=new globalThis.AbortController;return t>0&&setTimeout((()=>{r.abort()}),t),await globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},(async r=>{if(!r){if(0===t)throw new Nr(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(kr)try{await globalThis.navigator.locks.query()}catch(Bc){}return await n()}try{return await n()}finally{}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(Bc){"undefined"!=typeof self&&(self.globalThis=self)}}();const Er={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:br,flowType:"implicit",debug:!1},Tr=3e4;async function Cr(e,t,n){return await n()}class Pr{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Pr.nextInstanceID,Pr.nextInstanceID+=1,this.instanceID>0&&Dn();const r=Object.assign(Object.assign({},Er),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new yr({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Fn(r.fetch),this.lock=r.lock||Cr,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,r.lock?this.lock=r.lock:Dn()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Sr:this.lock=Cr,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:zn()?this.storage=wr:(this.memoryStorage={},this.storage=jr(this.memoryStorage)):(this.memoryStorage={},this.storage=jr(this.memoryStorage)),Dn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Bc){}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",(async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${vr}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){try{const e=!!Dn()&&await this._isPKCEFlow();if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:n}=await this._getSessionFromURL(e);if(n)return this._debug("#_initialize()","error detecting session from URL",n),"Identity is already linked"===(null==n?void 0:n.message)||"Identity is already linked to another user"===(null==n?void 0:n.message)||await this._removeSession(),{error:n};const{session:r,redirectType:s}=t;return this._debug("#_initialize()","detected session in URL",r,"redirect type",s),await this._saveSession(r),setTimeout((async()=>{"recovery"===s?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Yn(e)?{error:e}:{error:new Qn("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var t,n,r;try{let s;if(await this._removeSession(),"email"in e){const{email:n,password:r,options:i}=e;let a=null,o=null;if("pkce"===this.flowType){const e=Gn();await Un(this.storage,`${this.storageKey}-code-verifier`,e),a=await Jn(e),o=e===a?"plain":"s256"}s=await dr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==i?void 0:i.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:a,code_challenge_method:o},xform:hr})}else{if(!("phone"in e))throw new nr("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:a}=e;s=await dr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null==a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(r=null==a?void 0:a.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:hr})}}const{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const o=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(Yn(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if(await this._removeSession(),"email"in e){const{email:n,password:r,options:s}=e;t=await dr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:fr})}else{if(!("phone"in e))throw new nr("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:s}=e;t=await dr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:fr})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new tr}}catch(t){if(Yn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(e)))}async _exchangeCodeForSession(e){const t=await qn(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!=t?t:"").split("/"),{data:s,error:i}=await dr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:hr});return await Bn(this.storage,`${this.storageKey}-code-verifier`),i?{data:{user:null,session:null,redirectType:null},error:i}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:null!=r?r:null}),error:i}):{data:{user:null,session:null,redirectType:null},error:new tr}}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:n,token:r,access_token:s,nonce:i}=e,a=await dr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:hr}),{data:o,error:l}=a;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new tr}}catch(t){if(Yn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,s,i;try{if(await this._removeSession(),"email"in e){const{email:r,options:s}=e;let i=null,a=null;if("pkce"===this.flowType){const e=Gn();await Un(this.storage,`${this.storageKey}-code-verifier`,e),i=await Jn(e),a=e===i?"plain":"s256"}const{error:o}=await dr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},create_user:null===(n=null==s?void 0:s.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:i,code_challenge_method:a},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:o}=await dr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(s=null==n?void 0:n.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(i=null==n?void 0:n.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o}}throw new nr("You must provide either an email or phone number.")}catch(a){if(Yn(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let r,s;"email_change"!==e.type&&"phone_change"!==e.type&&await this._removeSession(),"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,s=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:a}=await dr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:hr});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,l=i.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(Yn(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{await this._removeSession();let s=null,i=null;if("pkce"===this.flowType){const e=Gn();await Un(this.storage,`${this.storageKey}-code-verifier`,e),s=await Jn(e),i=e===s?"plain":"s256"}return await dr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:mr})}catch(s){if(Yn(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new er;const{error:r}=await dr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}}))}catch(e){if(Yn(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{"email_change"!=e.type&&"phone_change"!=e.type&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:s}=e,{error:i}=await dr(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:n,type:r,options:s}=e,{data:i,error:a}=await dr(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:a}}throw new nr("You must provide either an email or phone number and a type")}catch(t){if(Yn(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,this._acquireLock(-1,(async()=>this._useSession((async e=>e))))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(Bc){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(Bc){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await qn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n)return{data:{session:e},error:null};const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,(async()=>await this._getUser())))}async _getUser(e){try{return e?await dr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:pr}):await this._useSession((async e=>{var t,n;const{data:r,error:s}=e;if(s)throw s;return await dr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(t=r.session)||void 0===t?void 0:t.access_token)&&void 0!==n?n:void 0,xform:pr})}))}catch(t){if(Yn(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(e,t)))}async _updateUser(e,t={}){try{return await this._useSession((async n=>{const{data:r,error:s}=n;if(s)throw s;if(!r.session)throw new er;const i=r.session;let a=null,o=null;if("pkce"===this.flowType&&null!=e.email){const e=Gn();await Un(this.storage,`${this.storageKey}-code-verifier`,e),a=await Jn(e),o=e===a?"plain":"s256"}const{data:l,error:c}=await dr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:i.access_token,xform:pr});if(c)throw c;return i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}))}catch(n){if(Yn(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return Wn(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(e)))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new er;const t=Date.now()/1e3;let n=t,r=!0,s=null;const i=Wn(e.access_token);if(i.exp&&(n=i.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};s=t}else{const{data:r,error:i}=await this._getUser(e.access_token);if(i)throw i;s={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(Yn(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(e)))}async _refreshSession(e){try{return await this._useSession((async t=>{var n;if(!e){const{data:r,error:s}=t;if(s)throw s;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new er;const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}))}catch(t){if(Yn(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!Dn())throw new rr("No browser detected.");if("implicit"===this.flowType&&!this._isImplicitGrantFlow())throw new rr("Not a valid implicit grant flow url.");if("pkce"==this.flowType&&!e)throw new sr("Not a valid PKCE flow url.");const t=$n(window.location.href);if(e){if(!t.code)throw new sr("No code detected.");const{data:e,error:n}=await this._exchangeCodeForSession(t.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:e.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new rr(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:n,provider_refresh_token:r,access_token:s,refresh_token:i,expires_in:a,expires_at:o,token_type:l}=t;if(!(s&&a&&i&&l))throw new rr("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(a);let d=c+u;o&&(d=parseInt(o));const{data:h,error:f}=await this._getUser(s);if(f)throw f;const p={provider_token:n,provider_refresh_token:r,access_token:s,expires_in:u,expires_at:d,refresh_token:i,token_type:l,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:t.type},error:null}}catch(t){if(Yn(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=$n(window.location.href);return!(!Dn()||!e.access_token&&!e.error_description)}async _isPKCEFlow(){const e=$n(window.location.href),t=await qn(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(e)))}async _signOut({scope:e}={scope:"global"}){return await this._useSession((async t=>{var n;const{data:r,error:s}=t;if(s)return{error:s};const i=null===(n=r.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return Yn(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Bn(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}}))}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(t)}))})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession((async t=>{var n,r;try{const{data:{session:r},error:s}=t;if(s)throw s;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(s){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s)}}))}async resetPasswordForEmail(e,t={}){let n=null,r=null;if("pkce"===this.flowType){const e=Gn();await Un(this.storage,`${this.storageKey}-code-verifier`,`${e}/PASSWORD_RECOVERY`),n=await Jn(e),r=e===n?"plain":"s256"}try{return await dr(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(Yn(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Yn(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession((async t=>{var n,r,s,i,a;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:!0});return await dr(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(i=o.session)||void 0===i?void 0:i.access_token)&&void 0!==a?a:void 0})}));if(r)throw r;return Dn()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==n?void 0:n.url),{data:{provider:e.provider,url:null==n?void 0:n.url},error:null}}catch(n){if(Yn(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession((async t=>{var n,r;const{data:s,error:i}=t;if(i)throw i;return await dr(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})}))}catch(t){if(Yn(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await(n=async n=>(await async function(e){return await new Promise((t=>{setTimeout((()=>t(null)),e)}))}(200*n),this._debug(t,"refreshing attempt",n),await dr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:hr})),r=(e,t,n)=>n&&n.error&&ar(n.error)&&Date.now()+200*(e+1)-s<Tr,new Promise(((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{const t=await n(s);if(!r(s,null,t))return void e(t)}catch(Bc){if(!r(s,Bc))return void t(Bc)}})()})))}catch(s){if(this._debug(t,"error",s),Yn(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Dn()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await qn(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const r=Math.round(Date.now()/1e3),s=(null!==(e=n.expires_at)&&void 0!==e?e:1/0)<r+10;if(this._debug(t,`session has${s?"":" not"} expired with margin of 10s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(ar(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return void this._debug(t,"error",n)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new er;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Hn;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new er;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(s){if(this._debug(r,"error",s),Yn(s)){const e={session:null,error:s};return ar(s)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],s=Array.from(this.stateChangeEmitters.values()).map((async n=>{try{await n.callback(e,t)}catch(Bc){r.push(Bc)}}));if(await Promise.all(s),r.length>0){for(let e=0;e<r.length;e+=1);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await Un(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Bn(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Dn()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(Bc){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),Tr);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const e=Date.now();try{return await this._useSession((async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-e)/Tr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)}))}catch(Bc){}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(Bc){if(!(Bc.isAcquireTimeout||Bc instanceof _r))throw Bc;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Dn()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null==n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null==n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const e=Gn();await Un(this.storage,`${this.storageKey}-code-verifier`,e);const t=await Jn(e),n=e===t?"plain":"s256";this._debug("PKCE","code verifier",`${e.substring(0,5)}...`,"code challenge",t,"method",n);const s=new URLSearchParams({code_challenge:`${encodeURIComponent(t)}`,code_challenge_method:`${encodeURIComponent(n)}`});r.push(s.toString())}if(null==n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession((async t=>{var n;const{data:r,error:s}=t;return s?{data:null,error:s}:await dr(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})}))}catch(t){if(Yn(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession((async t=>{var n,r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await dr(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token});return o?{data:null,error:o}:((null===(r=null==a?void 0:a.totp)||void 0===r?void 0:r.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})}))}catch(t){if(Yn(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:r,error:s}=t;if(s)return{data:null,error:s};const{data:i,error:a}=await dr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})}))}catch(t){if(Yn(t))return{data:null,error:t};throw t}}))}async _challenge(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:r,error:s}=t;return s?{data:null,error:s}:await dr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})}))}catch(t){if(Yn(t))return{data:null,error:t};throw t}}))}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null==e?void 0:e.factors)||[],r=n.filter((e=>"totp"===e.factor_type&&"verified"===e.status));return{data:{all:n,totp:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,(async()=>await this._useSession((async e=>{var t,n;const{data:{session:r},error:s}=e;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(r.access_token);let a=null;i.aal&&(a=i.aal);let o=a;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter((e=>"verified"===e.status)))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:i.amr||[]},error:null}}))))}}Pr.nextInstanceID=0;class Ir extends Pr{constructor(e){super(e)}}var Ar=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(Bc){i(Bc)}}function o(e){try{l(r.throw(e))}catch(Bc){i(Bc)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};class Or{constructor(e,t,n){var r,s,i,a,o,l,c,u;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const d=e.replace(/\/$/,"");this.realtimeUrl=`${d}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${d}/auth/v1`,this.storageUrl=`${d}/storage/v1`,this.functionsUrl=`${d}/functions/v1`;const h=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,f=function(e,t){const{db:n,auth:r,realtime:s,global:i}=e,{db:a,auth:o,realtime:l,global:c}=t;return{db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},o),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},c),i)}}(null!=n?n:{},{db:In,realtime:On,auth:Object.assign(Object.assign({},An),{storageKey:h}),global:Pn});this.storageKey=null!==(s=null===(r=f.auth)||void 0===r?void 0:r.storageKey)&&void 0!==s?s:"",this.headers=null!==(a=null===(i=f.global)||void 0===i?void 0:i.headers)&&void 0!==a?a:{},this.auth=this._initSupabaseAuthClient(null!==(o=f.auth)&&void 0!==o?o:{},this.headers,null===(l=f.global)||void 0===l?void 0:l.fetch),this.fetch=Ln(t,this._getAccessToken.bind(this),null===(c=f.global)||void 0===c?void 0:c.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},f.realtime)),this.rest=new jt(`${d}/rest/v1`,{headers:this.headers,schema:null===(u=f.db)||void 0===u?void 0:u.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new lt(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Tn(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Ar(this,void 0,void 0,(function*(){const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null}))}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,storageKey:s,flowType:i,debug:a},o,l){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ir({url:this.authUrl,headers:Object.assign(Object.assign({},c),o),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,flowType:i,debug:a,fetch:l})}_initRealtimeClient(e){return new an(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)}))}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(this.supabaseKey),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!=n?n:null),this.changedAccessToken=n)}}const Rr=new Or("https://iyuyfznncsonhnuhzlvd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml5dXlmem5uY3NvbmhudWh6bHZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg2MjY0MDUsImV4cCI6MjA2NDIwMjQwNX0.HRYYK4neNDYhLYg5PrGa5wH3NPly3QHAPI4TWzIkucM",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},db:{schema:"public"}});const Lr=async()=>{try{const{data:{session:e}}=await Rr.auth.getSession();if(!(null==e?void 0:e.user))return!1;const{data:t,error:n}=await Rr.from("profiles").select("is_admin").eq("id",e.user.id).single();return!n&&!0===(null==t?void 0:t.is_admin)}catch(e){return!1}},Dr=async()=>{try{const{data:{session:e}}=await Rr.auth.getSession();return!!(null==e?void 0:e.user)}catch(e){return!1}},Mr=({isAuthenticated:e,userEmail:n,onLogout:r})=>{const[o,l]=s.useState(!1),c=Pe();return e?t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>l(!o),className:"flex items-center gap-2 text-gray-700 hover:text-gray-900",children:[t.jsx(f,{size:20}),t.jsx("span",{className:"hidden md:inline",children:n})]}),t.jsx(i,{children:o&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>l(!1)}),t.jsx(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-40",children:t.jsxs("div",{className:"py-1",children:[t.jsx("button",{onClick:()=>{c("/profile"),l(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Мой профиль"}),t.jsx("button",{onClick:async()=>{await Rr.auth.signOut(),r(),l(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Выйти"})]})})]})})]}):t.jsxs("button",{onClick:()=>c("/login"),className:"flex items-center gap-2 text-gray-700 hover:text-gray-900",children:[t.jsx(h,{size:20}),t.jsx("span",{className:"hidden md:inline",children:"Войти"})]})},zr=({cartItems:e,favoritesCount:r,isAuthenticated:s,isAdmin:i,userEmail:a,onLogout:o})=>{const[l,c]=n.useState(!1),[u,d]=n.useState(""),h=Pe(),f=e.reduce(((e,t)=>e+t.quantity),0),b=e=>{e.preventDefault(),u.trim()&&h(`/search?q=${encodeURIComponent(u.trim())}`)};return t.jsx("header",{className:"bg-white py-4 shadow-sm",children:t.jsxs("div",{className:"container mx-auto px-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsxs(Ye,{to:"/",className:"text-2xl font-bold text-blue-600",children:["SHM ",t.jsx("span",{className:"text-teal-600",children:"AQUA"})," ",t.jsx("span",{className:"text-gray-800",children:"DEKOR"})]}),t.jsx("span",{className:"text-xs text-gray-600 -mt-1",children:"Сантехника и товары для дома"})]})}),t.jsx("div",{className:"hidden md:block flex-grow mx-8",children:t.jsxs("form",{onSubmit:b,className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Поиск товаров...",value:u,onChange:e=>d(e.target.value),className:"w-full py-2 px-4 pr-10 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),t.jsx("button",{type:"submit",className:"absolute right-0 top-0 mt-2 mr-3 text-gray-500 hover:text-blue-600",children:t.jsx(p,{size:20})})]})}),t.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[t.jsx(Ye,{to:"/about",className:"text-blue-800 hover:text-blue-900 transition-all hover:glow-blue font-medium",children:"О нас"}),t.jsx(Ye,{to:"/blog",className:"text-blue-800 hover:text-blue-900 transition-all hover:glow-blue font-medium",children:"Блог"}),t.jsxs(Ye,{to:"/favorites",className:"relative text-blue-800 hover:text-blue-900 transition-all hover:glow-blue",children:[t.jsx(m,{size:22}),r>0&&t.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:r})]}),t.jsxs(Ye,{to:"/cart",className:"relative text-blue-800 hover:text-blue-900 transition-all hover:glow-blue",children:[t.jsx(g,{size:22}),f>0&&t.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:f})]}),t.jsx(Mr,{isAuthenticated:s,userEmail:a,onLogout:o})]}),t.jsxs("div",{className:"md:hidden flex items-center",children:[t.jsxs(Ye,{to:"/cart",className:"relative mr-4 text-gray-600",children:[t.jsx(g,{size:22}),f>0&&t.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:f})]}),t.jsx("button",{onClick:()=>c(!l),className:"text-gray-600 focus:outline-none",children:l?t.jsx(x,{size:24}):t.jsx(y,{size:24})})]})]}),t.jsx("div",{className:"mt-4 md:hidden",children:t.jsxs("form",{onSubmit:b,className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Поиск товаров...",value:u,onChange:e=>d(e.target.value),className:"w-full py-2 px-4 pr-10 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),t.jsx("button",{type:"submit",className:"absolute right-0 top-0 mt-2 mr-3 text-gray-500 hover:text-blue-600",children:t.jsx(p,{size:20})})]})}),l&&t.jsx("div",{className:"md:hidden mt-4 bg-white rounded-lg shadow-lg p-4",children:t.jsxs("nav",{className:"flex flex-col space-y-2",children:[t.jsx(Ye,{to:"/about",className:"text-blue-800 hover:text-blue-900 transition-colors py-2 border-b border-gray-100 font-medium",children:"О нас"}),t.jsx(Ye,{to:"/blog",className:"text-blue-800 hover:text-blue-900 transition-colors py-2 border-b border-gray-100 font-medium",children:"Блог"}),t.jsxs(Ye,{to:"/favorites",className:"flex justify-between items-center text-blue-800 hover:text-blue-900 transition-colors py-2 border-b border-gray-100",children:[t.jsx("span",{children:"Избранное"}),r>0&&t.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1",children:r})]}),t.jsx(Mr,{isAuthenticated:s,userEmail:a,onLogout:o}),t.jsxs(Ye,{to:"/admin/login",className:"flex items-center gap-2 bg-gray-900 text-white px-3 py-2 rounded-md",children:[t.jsx(v,{size:18}),t.jsx("span",{children:"Админ панель"})]})]})})]})})},$r=({cartItems:e,favoritesCount:n,isAuthenticated:r,isAdmin:s,userEmail:i,onLogout:a})=>t.jsxs("div",{className:"sticky top-0 z-30",children:[t.jsx(D,{}),t.jsx(zr,{cartItems:e,favoritesCount:n,isAuthenticated:r,isAdmin:s,userEmail:i,onLogout:a})]}),Fr=({isOpen:e,onClose:r,onSelectCategory:s})=>{const[i,a]=n.useState([]),[o,l]=n.useState(!0),[c,u]=n.useState(null);n.useEffect((()=>{(async()=>{try{l(!0);const{data:e,error:t}=await Rr.from("categories").select("*").order("name");if(t)throw t;a(e||[])}catch(e){u(e instanceof Error?e.message:"Ошибка при загрузке категорий")}finally{l(!1)}})()}),[]);const d=()=>{const e=document.getElementById("product-catalog");e&&e.scrollIntoView({behavior:"smooth"})};return t.jsxs(t.Fragment,{children:[e&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden",onClick:r}),t.jsxs("aside",{className:`\n          fixed md:sticky top-[80px] left-0 h-[calc(100vh-80px)] md:h-[calc(100vh-80px)] z-40 md:z-10\n          w-64 md:w-full bg-white shadow-lg md:shadow-none \n          transition-all duration-300 ease-in-out transform\n          overflow-y-auto overscroll-contain\n          ${e?"translate-x-0":"-translate-x-full md:translate-x-0"}\n        `,children:[t.jsxs("div",{className:"sticky top-0 p-3 md:py-2 md:px-3 bg-gray-50/95 backdrop-blur-sm border-b border-gray-200 z-10",children:[t.jsxs("div",{className:"flex justify-between items-center md:hidden",children:[t.jsx("h2",{className:"font-semibold text-gray-800",children:"Категории товаров"}),t.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:t.jsx(x,{size:20})})]}),t.jsx("h2",{className:"hidden md:block font-semibold text-gray-800",children:"Категории"})]}),t.jsx("nav",{className:"p-1 pb-safe relative",children:o?t.jsx("div",{className:"p-3 text-center text-gray-500",children:"Загрузка категорий..."}):c?t.jsx("div",{className:"p-3 bg-red-50 text-red-500 rounded-md",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(b,{size:20}),c]})}):t.jsxs("ul",{children:[t.jsx("li",{children:t.jsxs("button",{onClick:()=>{s&&(s(""),r(),d())},className:"flex items-center justify-between py-2 px-3 rounded-lg text-white bg-black/90 hover:bg-gray-800 transition-colors text-sm font-medium w-full sticky top-[48px] z-10 shadow-md backdrop-blur-sm",children:[t.jsx("span",{children:"Показать все"}),t.jsx(w,{size:16,className:"text-white"})]})}),i.length>0?i.map((e=>t.jsx("li",{children:t.jsxs("button",{onClick:()=>{return t=e.slug,void(s&&(s(t),r(),d()));var t},className:"flex items-center justify-between py-2 px-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors text-sm",children:[t.jsx("span",{children:e.name}),t.jsx(w,{size:16,className:"text-gray-400"})]})},e.id))):t.jsx("li",{className:"p-3 text-center text-gray-500",children:"Нет доступных категорий"})]})})]})]})},Ur=[{id:1,image:"https://images.pexels.com/photos/1454806/pexels-photo-1454806.jpeg",title:"Стильная сантехника для вашего дома",subtitle:"Скидки до 30% на премиальные коллекции",buttonText:"Смотреть каталог"},{id:2,image:"https://images.pexels.com/photos/6492389/pexels-photo-6492389.jpeg",title:"Новая коллекция ванн 2025",subtitle:"Элегантность и комфорт в каждой детали",buttonText:"Подробнее"},{id:3,image:"https://images.pexels.com/photos/7319304/pexels-photo-7319304.jpeg",title:"Создайте ванную своей мечты",subtitle:"Комплексные решения под ключ",buttonText:"Заказать консультацию"}],qr=()=>{const[e,r]=n.useState(0),s=()=>{r((e=>e===Ur.length-1?0:e+1))};return n.useEffect((()=>{const e=setInterval((()=>{s()}),5e3);return()=>clearInterval(e)}),[]),t.jsxs("div",{className:"relative h-64 sm:h-80 md:h-96 lg:h-[450px] overflow-hidden rounded-lg",children:[Ur.map(((n,r)=>t.jsxs("div",{className:"absolute inset-0 transition-opacity duration-1000 ease-in-out "+(r===e?"opacity-100 z-10":"opacity-0 z-0"),children:[t.jsx("img",{src:n.image,alt:n.title,className:"object-cover w-full h-full"}),t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30"}),t.jsxs("div",{className:"absolute inset-0 flex flex-col justify-center px-6 md:px-12 text-white",children:[t.jsx("h2",{className:"text-2xl md:text-4xl font-bold mb-2 md:mb-4",children:n.title}),t.jsx("p",{className:"text-sm md:text-lg mb-4 md:mb-6",children:n.subtitle}),t.jsx("div",{children:t.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-colors text-sm md:text-base",children:n.buttonText})})]})]},n.id))),t.jsx("button",{onClick:()=>{r((e=>0===e?Ur.length-1:e-1))},className:"absolute left-2 top-1/2 -translate-y-1/2 z-20 p-1 bg-black/30 hover:bg-black/50 rounded-full text-white transition-colors",children:t.jsx(j,{size:24})}),t.jsx("button",{onClick:s,className:"absolute right-2 top-1/2 -translate-y-1/2 z-20 p-1 bg-black/30 hover:bg-black/50 rounded-full text-white transition-colors",children:t.jsx(w,{size:24})}),t.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-20 flex space-x-2",children:Ur.map(((n,s)=>t.jsx("button",{onClick:()=>(e=>{r(e)})(s),className:"w-2.5 h-2.5 rounded-full transition-colors "+(s===e?"bg-white":"bg-white/50"),"aria-label":`Go to slide ${s+1}`},s)))})]})},Br=({onSubmit:e})=>{const[r,s]=n.useState(0),[i,a]=n.useState(0),[o,l]=n.useState(""),[c,u]=n.useState(!1);return t.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),0!==r){u(!0);try{await e(r,o),s(0),l("")}catch(n){}finally{u(!1)}}},className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Оценка"}),t.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map((e=>t.jsx("button",{type:"button",onClick:()=>s(e),onMouseEnter:()=>a(e),onMouseLeave:()=>a(0),className:"focus:outline-none",children:t.jsx(k,{size:24,className:(e<=(i||r)?"text-yellow-400 fill-yellow-400":"text-gray-300")+" transition-colors"})},e)))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Комментарий"}),t.jsx("textarea",{value:o,onChange:e=>l(e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Поделитесь своими впечатлениями о товаре..."})]}),t.jsx("button",{type:"submit",disabled:0===r||c,className:"w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400",children:c?"Отправка...":"Отправить отзыв"})]})};function Hr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}const Wr=43200;let Vr={};function Gr(){return Vr}function Jr(e,t){var n,r,s,i;const a=Gr(),o=(null==t?void 0:t.weekStartsOn)??(null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.weekStartsOn)??a.weekStartsOn??(null==(i=null==(s=a.locale)?void 0:s.options)?void 0:i.weekStartsOn)??0,l=Hr(e),c=l.getDay(),u=(c<o?7:0)+c-o;return l.setDate(l.getDate()-u),l.setHours(0,0,0,0),l}function Kr(e){const t=Hr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Yr(e,t){const n=Hr(e),r=Hr(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function Xr(e){return function(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}(e,Date.now())}function Qr(e){const t=Hr(e);return+function(e){const t=Hr(e);return t.setHours(23,59,59,999),t}(t)===+function(e){const t=Hr(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}(t)}function Zr(e,t){const n=Hr(e),r=Hr(t),s=Yr(n,r),i=Math.abs(function(e,t){const n=Hr(e),r=Hr(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}(n,r));let a;if(i<1)a=0;else{1===n.getMonth()&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);let t=Yr(n,r)===-s;Qr(Hr(e))&&1===i&&1===Yr(e,r)&&(t=!1),a=s*(i-Number(t))}return 0===a?0:a}function es(e,t,n){const r=function(e,t){return+Hr(e)-+Hr(t)}(e,t)/1e3;return(s=null==n?void 0:n.roundingMethod,e=>{const t=(s?Math[s]:Math.trunc)(e);return 0===t?0:t})(r);var s}const ts={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function ns(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const rs={date:ns({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:ns({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:ns({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ss={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function is(e){return(t,n)=>{let r;if("formatting"===((null==n?void 0:n.context)?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=(null==n?void 0:n.width)?String(n.width):t;r=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=(null==n?void 0:n.width)?String(n.width):e.defaultWidth;r=e.values[s]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function as(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const a=i[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,(e=>e.test(a))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,(e=>e.test(a)));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(a.length)}}}function os(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],i=t.match(e.parsePattern);if(!i)return null;let a=e.valueCallback?e.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;return{value:a,rest:t.slice(s.length)}}}const ls={code:"en-US",formatDistance:(e,t,n)=>{let r;const s=ts[e];return r="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),(null==n?void 0:n.addSuffix)?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:rs,formatRelative:(e,t,n,r)=>ss[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:is({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:is({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:is({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:is({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:is({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:os({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:as({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:as({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:as({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:as({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:as({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function cs(e,t){return function(e,t,n){const r=Gr(),s=(null==n?void 0:n.locale)??r.locale??ls,i=Yr(e,t);if(isNaN(i))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:null==n?void 0:n.addSuffix,comparison:i});let o,l;i>0?(o=Hr(t),l=Hr(e)):(o=Hr(e),l=Hr(t));const c=es(l,o),u=(Kr(l)-Kr(o))/1e3,d=Math.round((c-u)/60);let h;if(d<2)return(null==n?void 0:n.includeSeconds)?c<5?s.formatDistance("lessThanXSeconds",5,a):c<10?s.formatDistance("lessThanXSeconds",10,a):c<20?s.formatDistance("lessThanXSeconds",20,a):c<40?s.formatDistance("halfAMinute",0,a):c<60?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",1,a):0===d?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",d,a);if(d<45)return s.formatDistance("xMinutes",d,a);if(d<90)return s.formatDistance("aboutXHours",1,a);if(d<1440){const e=Math.round(d/60);return s.formatDistance("aboutXHours",e,a)}if(d<2520)return s.formatDistance("xDays",1,a);if(d<Wr){const e=Math.round(d/1440);return s.formatDistance("xDays",e,a)}if(d<86400)return h=Math.round(d/Wr),s.formatDistance("aboutXMonths",h,a);if(h=Zr(l,o),h<12){const e=Math.round(d/Wr);return s.formatDistance("xMonths",e,a)}{const e=h%12,t=Math.trunc(h/12);return e<3?s.formatDistance("aboutXYears",t,a):e<9?s.formatDistance("overXYears",t,a):s.formatDistance("almostXYears",t+1,a)}}(e,Xr(e),t)}function us(e,t,n){return+Jr(e,n)===+Jr(t,n)}function ds(e,t){if(void 0!==e.one&&1===t)return e.one;const n=t%10,r=t%100;return 1===n&&11!==r?e.singularNominative.replace("{{count}}",String(t)):n>=2&&n<=4&&(r<10||r>20)?e.singularGenitive.replace("{{count}}",String(t)):e.pluralGenitive.replace("{{count}}",String(t))}function hs(e){return(t,n)=>(null==n?void 0:n.addSuffix)?n.comparison&&n.comparison>0?e.future?ds(e.future,t):"через "+ds(e.regular,t):e.past?ds(e.past,t):ds(e.regular,t)+" назад":ds(e.regular,t)}const fs={lessThanXSeconds:hs({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:hs({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:(e,t)=>(null==t?void 0:t.addSuffix)?t.comparison&&t.comparison>0?"через полминуты":"полминуты назад":"полминуты",lessThanXMinutes:hs({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:hs({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:hs({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:hs({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:hs({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:hs({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:hs({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:hs({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:hs({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:hs({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:hs({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:hs({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:hs({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})},ps={date:ns({formats:{full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},defaultWidth:"full"}),time:ns({formats:{full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},defaultWidth:"full"}),dateTime:ns({formats:{any:"{{date}}, {{time}}"},defaultWidth:"any"})},ms=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function gs(e){const t=ms[e];return 2===e?"'во "+t+" в' p":"'в "+t+" в' p"}const xs={lastWeek:(e,t,n)=>{const r=e.getDay();return us(e,t,n)?gs(r):function(e){const t=ms[e];switch(e){case 0:return"'в прошлое "+t+" в' p";case 1:case 2:case 4:return"'в прошлый "+t+" в' p";case 3:case 5:case 6:return"'в прошлую "+t+" в' p"}}(r)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:(e,t,n)=>{const r=e.getDay();return us(e,t,n)?gs(r):function(e){const t=ms[e];switch(e){case 0:return"'в следующее "+t+" в' p";case 1:case 2:case 4:return"'в следующий "+t+" в' p";case 3:case 5:case 6:return"'в следующую "+t+" в' p"}}(r)},other:"P"},ys={ordinalNumber:(e,t)=>{const n=Number(e),r=null==t?void 0:t.unit;let s;return s="date"===r?"-е":"week"===r||"minute"===r||"second"===r?"-я":"-й",n+s},era:is({values:{narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},defaultWidth:"wide"}),quarter:is({values:{narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:is({values:{narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},defaultWidth:"wide",formattingValues:{narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},defaultFormattingWidth:"wide"}),day:is({values:{narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},defaultWidth:"wide"}),dayPeriod:is({values:{narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},defaultWidth:"any",formattingValues:{narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},defaultFormattingWidth:"wide"})},vs={code:"ru",formatDistance:(e,t,n)=>fs[e](t,n),formatLong:ps,formatRelative:(e,t,n,r)=>{const s=xs[e];return"function"==typeof s?s(t,n,r):s},localize:ys,match:{ordinalNumber:os({matchPattern:/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:as({matchPatterns:{narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^д/i,/^н/i]},defaultParseWidth:"any"}),quarter:as({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:as({matchPatterns:{narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},defaultParseWidth:"any"}),day:as({matchPatterns:{narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},defaultParseWidth:"any"}),dayPeriod:as({matchPatterns:{narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},defaultMatchWidth:"wide",parsePatterns:{any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}},bs=({reviews:e,currentUserId:n,onEdit:r,onDelete:s})=>t.jsx("div",{className:"space-y-4",children:e.map((e=>{var i;return t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium text-gray-900",children:(null==(i=e.profiles)?void 0:i.username)||"Пользователь"}),t.jsx("span",{className:"mx-2 text-gray-300",children:"•"}),t.jsx("div",{className:"flex",children:[...Array(5)].map(((n,r)=>t.jsx(k,{size:16,className:""+(r<e.rating?"text-yellow-400 fill-yellow-400":"text-gray-300")},r)))})]}),t.jsx("div",{className:"text-sm text-gray-500 mt-1",children:cs(new Date(e.created_at),{addSuffix:!0,locale:vs})})]}),n===e.user_id&&t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>r(e.id,e.rating,e.comment),className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:t.jsx(_,{size:16,className:"text-gray-500"})}),t.jsx("button",{onClick:()=>s(e.id),className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:t.jsx(N,{size:16,className:"text-red-500"})})]})]}),t.jsx("p",{className:"mt-2 text-gray-600",children:e.comment})]},e.id)}))}),ws=({product:e,isOpen:r,isAuthenticated:s,currentUserId:o,onClose:l,onAddToCart:c,onAddToFavorites:u})=>{const[d,h]=n.useState(!1),[f,p]=n.useState([]),[y,v]=n.useState(!1),[w,j]=n.useState(null),_=Pe(),[N,E]=n.useState("reviews"),T=n.useCallback((async()=>{if(e.id)try{v(!0);const{data:t,error:n}=await Rr.from("reviews").select("\n          *,\n          profiles (\n            username,\n            avatar_url\n          )\n        ").eq("product_id",e.id).order("created_at",{ascending:!1});if(n)throw n;p(t||[])}catch(t){j(t instanceof Error?t.message:"Ошибка при загрузке отзывов")}finally{v(!1)}}),[e.id]);n.useEffect((()=>{T()}),[T]);n.useEffect((()=>{const t={title:e.name,text:e.description,url:window.location.href};h("undefined"!=typeof navigator&&navigator.share&&navigator.canShare&&navigator.canShare(t))}),[e]);return r?t.jsx(i,{children:t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[t.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50",onClick:l}),t.jsxs(a.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsx("button",{onClick:l,className:"absolute right-4 top-4 text-gray-500 hover:text-gray-700 z-10",children:t.jsx(x,{size:24})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 p-4 md:p-6",children:[t.jsx("div",{children:t.jsx("img",{src:e.image_url||"",alt:`${e.name} - основное изображение`,className:"w-full rounded-lg object-cover aspect-square"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"ORZAX Ocean"}),t.jsx("span",{className:"bg-blue-50 text-blue-600 text-xs px-2 py-0.5 rounded",children:"Оригинал"}),d&&t.jsx("button",{className:"ml-auto p-2 hover:bg-gray-100 rounded-full transition-colors",onClick:async t=>{if(t.stopPropagation(),d)try{await navigator.share({title:e.name,text:e.description,url:window.location.href})}catch(n){n instanceof Error&&n.name}},children:t.jsx(S,{size:20,className:"text-gray-600"})})]}),t.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:e.name}),t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[[...Array(5)].map(((n,r)=>t.jsx(k,{size:18,className:""+(r<Math.floor(e.rating)?"text-yellow-400 fill-yellow-400":r<e.rating?"text-yellow-400 fill-yellow-400 opacity-50":"text-gray-300")},r))),t.jsx("button",{onClick:()=>{const e=document.getElementById("reviews-section");null==e||e.scrollIntoView({behavior:"smooth"})},className:"text-gray-600 hover:text-blue-600 transition-colors font-medium",children:e.rating.toFixed(1)}),t.jsx("span",{className:"text-gray-400 select-none",children:"•"}),t.jsx("button",{onClick:e=>{e.preventDefault();const t=document.getElementById("reviews-section");null==t||t.scrollIntoView({behavior:"smooth"})},className:"text-gray-600 hover:text-blue-600 transition-colors text-sm",children:"3200 оценок"}),t.jsx("span",{className:"text-gray-400 select-none",children:"•"}),t.jsx("button",{onClick:e=>{e.preventDefault();const t=document.getElementById("questions-section");null==t||t.scrollIntoView({behavior:"smooth"})},className:"text-gray-600 hover:text-blue-600 transition-colors text-sm",children:"443 вопроса"})]}),t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Артикул:"}),t.jsx("span",{className:"text-xs font-medium",children:e.id})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:[e.price.toLocaleString()," ₽"]}),e.old_price&&t.jsxs("div",{className:"text-sm text-gray-400 line-through",children:[e.old_price.toLocaleString()," ₽"]})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-6",children:e.description}),t.jsxs("div",{className:"border-t border-gray-100 py-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Описание"}),t.jsxs("div",{className:"text-sm text-gray-600 space-y-4",children:[t.jsxs("p",{children:["Современный ",e.name.toLowerCase()," с улучшенными характеристиками."]}),t.jsx("p",{children:"Особенности:"}),t.jsxs("ul",{className:"list-disc pl-4 space-y-2",children:[t.jsx("li",{children:"Высокое качество материалов"}),t.jsx("li",{children:"Надежная конструкция"}),t.jsx("li",{children:"Простота установки"}),t.jsx("li",{children:"Длительный срок службы"})]})]})]}),e.specifications&&t.jsxs("div",{className:"border-t border-gray-100 py-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Характеристики"}),t.jsx("div",{className:"grid grid-cols-1 gap-2",children:Object.entries(e.specifications).map((([e,n])=>t.jsxs("div",{className:"flex items-center py-2 border-b border-gray-100 last:border-0",children:[t.jsx("span",{className:"text-sm text-gray-500 w-1/3",children:e}),t.jsx("span",{className:"text-sm text-gray-900 ml-4",children:n})]},e)))})]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("button",{onClick:()=>c(e),className:"flex-1 bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[t.jsx(g,{size:20}),t.jsx("span",{children:"В корзину"})]}),t.jsx("button",{onClick:()=>u(e),className:"px-6 py-3 rounded-lg border-2 border-gray-200 hover:border-red-500 hover:text-red-500 transition-colors",children:t.jsx(m,{size:20})})]}),t.jsx("button",{className:"w-full mt-3 text-purple-600 font-medium py-3 border-2 border-purple-600 rounded-lg hover:bg-purple-50 transition-colors",children:"Купить сейчас"}),e.is_new&&t.jsx("div",{className:"mt-3 inline-block bg-green-500 text-white text-xs font-bold px-2 py-1 rounded",children:"Новинка"}),t.jsxs("div",{className:"mt-6",children:[t.jsxs("div",{className:"flex border-b border-gray-200",children:[t.jsx("button",{className:"px-4 py-2 text-sm font-medium "+("reviews"===N?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>E("reviews"),children:"Отзывы"}),t.jsx("button",{className:"px-4 py-2 text-sm font-medium "+("questions"===N?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>E("questions"),children:"Вопросы"})]}),t.jsx("div",{className:"mt-4",children:"reviews"===N?t.jsxs(t.Fragment,{children:[y?t.jsx("div",{className:"text-center py-4",children:"Загрузка отзывов..."}):w?t.jsx("div",{className:"bg-red-50 text-red-500 p-3 rounded-md",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(b,{size:20}),w]})}):t.jsx(bs,{reviews:f,currentUserId:o,onEdit:async(e,t,n)=>{try{const{error:r}=await Rr.from("reviews").update({rating:t,comment:n}).eq("id",e);if(r)throw r;await T()}catch(r){throw r}},onDelete:async e=>{try{const{error:t}=await Rr.from("reviews").delete().eq("id",e);if(t)throw t;await T()}catch(t){throw t}}}),s?t.jsx("div",{className:"mb-6",children:t.jsx(Br,{onSubmit:async(t,n)=>{try{const{data:{user:r}}=await Rr.auth.getUser();if(!r)throw new Error("Необходимо авторизоваться");const{error:s}=await Rr.from("reviews").insert({product_id:e.id,user_id:r.id,rating:t,comment:n});if(s)throw s;await T()}catch(r){throw r}}})}):t.jsx("div",{className:"text-center py-4 bg-gray-50 rounded-lg",children:t.jsxs("p",{className:"text-gray-600",children:["Чтобы оставить отзыв,"," ",t.jsx("button",{onClick:()=>_("/login"),className:"text-blue-600 hover:text-blue-700",children:"войдите"})," ","в аккаунт"]})})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("img",{src:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg",alt:"Михаил",className:"w-10 h-10 rounded-full object-cover"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("div",{className:"font-medium",children:"Михаил Сидоров"}),t.jsx("div",{className:"text-sm text-gray-500",children:"3 дня назад"})]})]}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Подскажите, есть ли гарантия на товар?"}),t.jsxs("div",{className:"pl-8 border-l-2 border-gray-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"bg-blue-100 text-blue-600 p-1 rounded",children:t.jsx("span",{className:"text-xs font-medium",children:"Менеджер"})}),t.jsx("div",{className:"ml-2 text-sm text-gray-500",children:"2 дня назад"})]}),t.jsx("p",{className:"text-gray-600",children:"Да, на данный товар предоставляется гарантия 2 года."})]})]}),t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("img",{src:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg",alt:"Елена",className:"w-10 h-10 rounded-full object-cover"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("div",{className:"font-medium",children:"Елена Козлова"}),t.jsx("div",{className:"text-sm text-gray-500",children:"неделю назад"})]})]}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Какие сроки доставки в Москву?"}),t.jsxs("div",{className:"pl-8 border-l-2 border-gray-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"bg-blue-100 text-blue-600 p-1 rounded",children:t.jsx("span",{className:"text-xs font-medium",children:"Менеджер"})}),t.jsx("div",{className:"ml-2 text-sm text-gray-500",children:"6 дней назад"})]}),t.jsx("p",{className:"text-gray-600",children:"Доставка по Москве осуществляется в течение 1-2 рабочих дней."})]})]})]})})]})]})]})]})]})}):null},js=({onAddToCart:e,onAddToFavorites:n,isAuthenticated:r,currentUserId:i})=>{const[o,l]=s.useState(0),[c,u]=s.useState(null),[d,h]=s.useState(!1),[f,p]=s.useState([]),[m,x]=s.useState(!0),[y,v]=s.useState(null),b=Math.ceil(f.length/3)-1;s.useEffect((()=>{(async()=>{try{x(!0);const{data:e,error:t}=await Rr.from("products").select("*").eq("is_bestseller",!0).limit(4);if(t)throw t;p(e||[])}catch(e){v(e instanceof Error?e.message:"Ошибка при загрузке хитов продаж")}finally{x(!1)}})()}),[]);return t.jsxs("div",{className:"py-4 bg-white rounded-lg shadow-sm mx-auto mb-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Хиты продаж"}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>{l((e=>0===e?b:e-1))},className:"p-0.5 rounded-full bg-white border border-gray-300 hover:bg-gray-50 transition-colors",children:t.jsx(j,{size:12})}),t.jsx("button",{onClick:()=>{l((e=>e===b?0:e+1))},className:"p-0.5 rounded-full bg-white border border-gray-300 hover:bg-gray-50 transition-colors",children:t.jsx(w,{size:12})})]})]}),t.jsx("div",{className:"relative overflow-hidden px-2",children:t.jsx(a.div,{className:"flex gap-1",animate:{x:`-${100*o}%`},transition:{duration:.3,ease:"easeInOut"},children:f.map((n=>t.jsx("div",{className:"w-full md:w-1/3 flex-shrink-0 p-0.5",children:t.jsxs("div",{className:"bg-gray-900 rounded-lg overflow-hidden relative border border-gray-700 transition-all text-sm cursor-pointer shadow-sm hover:shadow-md h-[320px]",onClick:()=>{u(n),h(!0)},children:[t.jsx("div",{className:"relative",children:t.jsx("img",{src:n.image_url||"",alt:n.name,className:"w-full aspect-square object-cover"})}),t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-white p-3 shadow-lg",children:[t.jsx("h3",{className:"font-medium text-gray-800 mb-1 line-clamp-2 text-xs",children:n.name}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"font-bold text-base text-gray-900",children:[n.price.toLocaleString()," ₽"]}),t.jsx("div",{className:"text-xs text-gray-500 line-through",children:n.old_price?`${n.old_price.toLocaleString()} ₽`:""})]}),t.jsx("button",{className:"p-2 rounded-full bg-blue-600 text-white hover:bg-blue-700 transition-colors",onClick:t=>{t.stopPropagation(),e(n)},children:t.jsx(g,{size:16})})]})]}),n.old_price&&t.jsxs("div",{className:"absolute top-2 left-2 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded",children:["-",Math.round((n.old_price-n.price)/n.old_price*100),"%"]})]})},n.id)))})}),c&&t.jsx(ws,{product:c,isOpen:d,onClose:()=>h(!1),isAuthenticated:r,currentUserId:i,onAddToCart:e,onAddToFavorites:n})]})},ks=({product:e,isAuthenticated:n,currentUserId:r,onAddToCart:i,onAddToFavorites:a})=>{const[o,l]=s.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-white rounded-lg overflow-hidden relative border-2 border-black transition-all text-sm cursor-pointer shadow-sm hover:shadow-md hover:border-gray-900 flex flex-col h-[400px]",onClick:()=>l(!0),children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:e.image_url||"",alt:e.name,className:"w-full aspect-square object-cover",loading:"lazy",decoding:"async"}),e.old_price&&t.jsxs("div",{className:"absolute top-1 left-1 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded",children:["-",Math.round((e.old_price-e.price)/e.old_price*100),"%"]}),e.is_new&&t.jsx("div",{className:"absolute bottom-1 left-1 bg-green-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded",children:"Новинка"}),t.jsx("button",{className:"absolute top-2 right-2 p-1.5 bg-white/80 rounded-full hover:bg-white transition-colors",onClick:t=>{t.stopPropagation(),a(e)},children:t.jsx(m,{size:18,className:"text-gray-500 hover:text-red-500 transition-colors"})})]}),t.jsxs("div",{className:"p-3 flex-1 flex flex-col",children:[t.jsxs("div",{children:[t.jsxs("span",{className:"text-xs text-gray-500 block mb-1",children:["Артикул: ",e.id]}),t.jsx("h3",{className:"font-medium text-gray-800 mb-2 line-clamp-2 min-h-[40px]",children:e.name})]}),t.jsxs("div",{className:"flex items-center mb-2",children:[[...Array(5)].map(((n,r)=>t.jsx(k,{size:14,className:""+(r<Math.floor(e.rating)?"text-yellow-400 fill-yellow-400":r<e.rating?"text-yellow-400 fill-yellow-400 opacity-50":"text-gray-300")},r))),t.jsx("span",{className:"text-xs text-gray-500 ml-1",children:e.rating.toFixed(1)})]}),t.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"font-bold text-base sm:text-lg text-gray-900",children:[e.price.toLocaleString()," ₽"]}),t.jsx("div",{className:"text-sm text-gray-500 line-through h-5",children:e.old_price?`${e.old_price.toLocaleString()} ₽`:""})]}),t.jsx("button",{className:"p-2 rounded-full bg-blue-600 text-white hover:bg-blue-700 transition-colors",onClick:t=>{t.stopPropagation(),i(e)},children:t.jsx(g,{size:18})})]})]})]}),t.jsx(ws,{product:e,isOpen:o,onClose:()=>l(!1),isAuthenticated:n,currentUserId:r,onAddToCart:i,onAddToFavorites:a})]})},_s=({onAddToCart:e,onAddToFavorites:r,products:s})=>{const[i,a]=n.useState("default"),o=(()=>{switch(i){case"price-asc":return[...s].sort(((e,t)=>e.price-t.price));case"price-desc":return[...s].sort(((e,t)=>t.price-e.price));case"rating":return[...s].sort(((e,t)=>t.rating-e.rating));case"new":return[...s].sort(((e,t)=>(e.isNew?-1:1)-(t.isNew?-1:1)));default:return s}})();return t.jsxs("div",{id:"product-catalog",className:"py-8",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2 sm:mb-0",children:s.length>0?"Каталог товаров":"Товары не найдены"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("label",{htmlFor:"sort",className:"text-sm text-gray-600 mr-2",children:"Сортировать:"}),t.jsxs("select",{id:"sort",value:i,onChange:e=>a(e.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"default",children:"По умолчанию"}),t.jsx("option",{value:"price-asc",children:"Цена (по возрастанию)"}),t.jsx("option",{value:"price-desc",children:"Цена (по убыванию)"}),t.jsx("option",{value:"rating",children:"По рейтингу"}),t.jsx("option",{value:"new",children:"Сначала новинки"})]})]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:o.map((n=>t.jsx(ks,{product:n,onAddToCart:e,onAddToFavorites:r},n.id)))}),t.jsx("div",{className:"mt-8 text-center",children:t.jsx("button",{className:"bg-white border border-blue-600 text-blue-600 px-6 py-2 rounded-md hover:bg-blue-50 transition-colors",children:"Загрузить еще"})})]})},Ns=()=>t.jsx("footer",{className:"bg-gray-900 text-gray-300 pt-12 pb-6",children:t.jsxs("div",{className:"container mx-auto px-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"SHM AQUA DEKOR"}),t.jsx("p",{className:"mb-4 text-sm leading-relaxed",children:"Качественная сантехника и товары для дома от ведущих производителей. Гарантия качества и лучшие цены."}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:t.jsx(E,{size:20})}),t.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:t.jsx(T,{size:20})}),t.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:t.jsx(C,{size:20})})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-white font-semibold mb-4",children:"Категории"}),t.jsxs("ul",{className:"space-y-2",children:[t.jsx("li",{children:t.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Сантехника"})}),t.jsx("li",{children:t.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Ванны"})}),t.jsx("li",{children:t.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Душевые кабины"})}),t.jsx("li",{children:t.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Смесители"})}),t.jsx("li",{children:t.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Мебель для ванной"})})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-white font-semibold mb-4",children:"Информация"}),t.jsxs("ul",{className:"space-y-2",children:[t.jsx("li",{children:t.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"О компании"})}),t.jsx("li",{children:t.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Доставка и оплата"})}),t.jsx("li",{children:t.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Возврат и обмен"})}),t.jsx("li",{children:t.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Блог"})}),t.jsx("li",{children:t.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Контакты"})})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-white font-semibold mb-4",children:"Контакты"}),t.jsxs("ul",{className:"space-y-3",children:[t.jsxs("li",{className:"flex items-start",children:[t.jsx(u,{size:16,className:"mr-2 mt-1 flex-shrink-0"}),t.jsx("span",{className:"text-sm",children:"8 (800) 123-45-67"})]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx(c,{size:16,className:"mr-2 mt-1 flex-shrink-0"}),t.jsx("span",{className:"text-sm",children:"info@shmaquadekor.com"})]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx(P,{size:16,className:"mr-2 mt-1 flex-shrink-0"}),t.jsx("span",{className:"text-sm",children:"г. Москва, ул. Примерная, д. 123"})]})]})]})]}),t.jsx("div",{className:"border-t border-gray-800 mt-8 pt-6",children:t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[t.jsx("p",{className:"text-sm text-gray-500 mb-4 md:mb-0",children:"© 2025 SHM AQUA DEKOR. Все права защищены."}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("a",{href:"#",className:"text-sm text-gray-500 hover:text-white transition-colors",children:"Политика конфиденциальности"}),t.jsx("a",{href:"#",className:"text-sm text-gray-500 hover:text-white transition-colors",children:"Условия использования"})]})]})})]})}),Ss=()=>t.jsxs("div",{className:"relative overflow-hidden border-y border-gray-200",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 via-blue-800 to-blue-600 bg-[length:200%_100%] animate-gradient",style:{transform:"skew(-12deg)",backgroundSize:"200% 100%"}}),t.jsx("div",{className:"relative flex whitespace-nowrap font-semibold overflow-hidden py-2",children:t.jsx(a.div,{animate:{x:[0,"-50%"]},transition:{duration:20,ease:"linear",repeat:1/0,repeatType:"loop"},className:"flex items-center space-x-4",children:[...Array(4)].map(((e,n)=>t.jsx("span",{className:"inline-block text-white px-4",children:"ПРОДАЖА КАЧЕСТВЕННОЙ САНТЕХНИКИ И ТОВАРОВ ДЛЯ ДОМА ПО ЛУЧШИМ ЦЕНАМ В ГОРОДЕ!"},n)))})})]}),Es={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.3,duration:.6}}},Ts={hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{duration:.8,ease:[.43,.13,.23,.96]}}},Cs=({cartItems:e,favorites:r,isAuthenticated:s,currentUserId:i,isAdmin:o,userEmail:l,onLogout:c,onAddToCart:u,onToggleFavorite:d})=>{const[h,f]=n.useState([]),[p,x]=n.useState([]),[v,b]=n.useState(!0),[w,j]=n.useState(null),[_,N]=n.useState(!1),[S,E]=n.useState(null),[T,C]=n.useState(!1),[P,I]=n.useState(null);Pe(),n.useEffect((()=>{(async()=>{try{b(!0);const{data:e,error:t}=await Rr.from("products").select("*, categories(slug)").order("created_at",{ascending:!1});if(t)throw t;const{data:n,error:r}=await Rr.from("products").select("*, categories(slug)").eq("is_bestseller",!0).limit(4);if(r)throw r;f(e||[]),x(n||[])}catch(e){j(e instanceof Error?e.message:"Ошибка при загрузке товаров")}finally{b(!1)}})()}),[]);const A=n.useMemo((()=>P?h.filter((e=>{var t;return(null==(t=e.categories)?void 0:t.slug)===P})):h),[h,P]),O=p[0];return t.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[t.jsx($r,{cartItems:e,favoritesCount:r.length,isAuthenticated:s,isAdmin:o,userEmail:l,onLogout:c}),t.jsx(Ss,{}),t.jsx("main",{className:"flex-grow",children:t.jsx("div",{className:"container mx-auto px-4 py-6",children:t.jsxs("div",{className:"flex flex-col md:flex-row",children:[t.jsx("div",{className:"md:hidden mb-4",children:t.jsxs("button",{onClick:()=>N(!0),className:"flex items-center bg-white px-3 py-2 rounded-md shadow-sm text-gray-700",children:[t.jsx(y,{size:20,className:"mr-2"}),t.jsx("span",{children:"Категории"})]})}),t.jsx("div",{className:"md:w-1/5 md:pr-4 mb-6 md:mb-0",children:t.jsx(Fr,{isOpen:_,onClose:()=>N(!1),onSelectCategory:e=>{I(e)}})}),t.jsxs(a.div,{className:"md:w-[85%]",variants:Es,initial:"hidden",animate:"visible",viewport:{once:!0},whileInView:"visible",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-8",children:[t.jsx(a.div,{className:"lg:col-span-2 w-full",variants:Ts,children:t.jsx(qr,{})}),t.jsx(a.div,{variants:Ts,className:"hidden lg:block flex items-center h-[450px] w-full",children:O&&t.jsxs("div",{className:"bg-gray-900 rounded-lg overflow-hidden relative border border-gray-700 transition-all cursor-pointer shadow-sm hover:shadow-md h-full",children:[t.jsx("div",{className:"p-2 border-b border-gray-700",children:t.jsx("h2",{className:"text-xl font-bold text-gray-100",children:"Товар дня"})}),t.jsxs("div",{className:"p-3 flex flex-col h-[calc(100%-48px)] cursor-pointer",onClick:()=>{E(O),C(!0)},children:[t.jsxs("span",{className:"text-xs text-gray-500 block mb-2",children:["Артикул: ",O.id]}),t.jsxs("div",{className:"relative h-[250px] mb-4",children:[t.jsx("img",{src:O.image_url||"",alt:O.name,className:"w-full h-full object-cover rounded object-center"}),O.old_price&&t.jsxs("div",{className:"absolute top-2 left-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded",children:["-",Math.round((O.old_price-O.price)/O.old_price*100),"%"]}),t.jsx("button",{className:"absolute top-2 right-2 p-1.5 bg-white/80 rounded-full hover:bg-white transition-colors",onClick:e=>{e.stopPropagation(),d(O)},children:t.jsx(m,{size:18,className:"text-gray-500 hover:text-red-500 transition-colors"})})]}),t.jsxs("div",{className:"flex flex-col justify-between flex-grow",children:[t.jsx("h3",{className:"font-medium text-gray-100 mb-2 line-clamp-2 text-sm",children:O.name}),t.jsxs("div",{className:"flex items-center mb-2",children:[[...Array(5)].map(((e,n)=>t.jsx(k,{size:14,className:""+(n<Math.floor(O.rating)?"text-yellow-400 fill-yellow-400":n<O.rating?"text-yellow-400 fill-yellow-400 opacity-50":"text-gray-300")},n))),t.jsx("span",{className:"text-xs text-gray-500 ml-1",children:O.rating.toFixed(1)})]}),t.jsxs("div",{className:"flex justify-between items-end mt-auto",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"text-base font-bold text-gray-100",children:[O.price.toLocaleString()," ₽"]}),O.old_price&&t.jsxs("div",{className:"text-sm text-white/70 line-through",children:[O.old_price.toLocaleString()," ₽"]})]}),t.jsx("button",{onClick:e=>{e.stopPropagation(),u(O)},className:"p-2 rounded-full bg-blue-600 text-white hover:bg-blue-700 transition-colors",children:t.jsx(g,{size:20})})]})]})]})]})})]}),t.jsx(a.div,{variants:Ts,children:t.jsx(js,{onAddToCart:u,onAddToFavorites:d})}),t.jsx(a.div,{variants:Ts,children:t.jsx(_s,{onAddToCart:u,onAddToFavorites:d,products:A})})]})]})})}),t.jsx(Ns,{}),t.jsxs(t.Fragment,{children:[S&&t.jsx(ws,{product:S,isOpen:T,onClose:()=>C(!1),onAddToCart:u,onAddToFavorites:d,isAuthenticated:s,currentUserId:i}),o&&S&&t.jsx(AdminBar,{currentProduct:S,onProductUpdate:()=>{window.location.reload()}})]})]})},Ps=({isAuthenticated:e,isAdmin:n,userEmail:r,onLogout:s})=>t.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[t.jsx($r,{cartItems:[],favoritesCount:0,isAuthenticated:e,isAdmin:n,userEmail:r,onLogout:s}),t.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:t.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"О компании SHM AQUA DEKOR"}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[t.jsx("div",{children:t.jsx("img",{src:"https://images.pexels.com/photos/3288102/pexels-photo-3288102.jpeg",alt:"Наш шоурум",className:"rounded-lg shadow-lg w-full h-[300px] object-cover"})}),t.jsxs("div",{className:"flex flex-col justify-center",children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Ваш надежный партнер с 2010 года"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"SHM AQUA DEKOR - это ведущий поставщик сантехники и товаров для дома в России. Мы специализируемся на продаже высококачественной продукции от лучших мировых производителей."}),t.jsx("p",{className:"text-gray-600",children:"Наша миссия - делать качественную сантехнику доступной для каждого дома, предоставляя профессиональную консультацию и безупречный сервис."})]})]}),t.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"15+ лет опыта"}),t.jsx("p",{className:"text-gray-600",children:"Более 15 лет успешной работы на рынке сантехники и товаров для дома"})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"50,000+ клиентов"}),t.jsx("p",{className:"text-gray-600",children:"Тысячи довольных клиентов по всей России выбирают нас"})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"100% гарантия"}),t.jsx("p",{className:"text-gray-600",children:"Гарантия качества на все товары и профессиональная поддержка"})]})]}),t.jsxs("div",{className:"bg-blue-50 p-8 rounded-lg mb-12",children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Почему выбирают нас"}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Широкий ассортимент"}),t.jsx("p",{className:"text-gray-600",children:"Более 10,000 наименований товаров в наличии"})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Профессиональная консультация"}),t.jsx("p",{className:"text-gray-600",children:"Опытные специалисты помогут с выбором"})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Быстрая доставка"}),t.jsx("p",{className:"text-gray-600",children:"Доставка по всей России в кратчайшие сроки"})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Гарантия качества"}),t.jsx("p",{className:"text-gray-600",children:"Только сертифицированная продукция"})]})]})]})]})}),t.jsx(Ns,{})]});const Is=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,As=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Os={};function Rs(e,t){return(Os.jsx?As:Is).test(e)}const Ls=/[ \t\n\f\r]/g;function Ds(e){return""===e.replace(Ls,"")}class Ms{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}function zs(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new Ms(n,r,t)}function $s(e){return e.toLowerCase()}Ms.prototype.normal={},Ms.prototype.property={},Ms.prototype.space=void 0;class Fs{constructor(e,t){this.attribute=t,this.property=e}}Fs.prototype.attribute="",Fs.prototype.booleanish=!1,Fs.prototype.boolean=!1,Fs.prototype.commaOrSpaceSeparated=!1,Fs.prototype.commaSeparated=!1,Fs.prototype.defined=!1,Fs.prototype.mustUseProperty=!1,Fs.prototype.number=!1,Fs.prototype.overloadedBoolean=!1,Fs.prototype.property="",Fs.prototype.spaceSeparated=!1,Fs.prototype.space=void 0;let Us=0;const qs=Ks(),Bs=Ks(),Hs=Ks(),Ws=Ks(),Vs=Ks(),Gs=Ks(),Js=Ks();function Ks(){return 2**++Us}const Ys=Object.freeze(Object.defineProperty({__proto__:null,boolean:qs,booleanish:Bs,commaOrSpaceSeparated:Js,commaSeparated:Gs,number:Ws,overloadedBoolean:Hs,spaceSeparated:Vs},Symbol.toStringTag,{value:"Module"})),Xs=Object.keys(Ys);class Qs extends Fs{constructor(e,t,n,r){let s=-1;if(super(e,t),Zs(this,"space",r),"number"==typeof n)for(;++s<Xs.length;){const e=Xs[s];Zs(this,Xs[s],(n&Ys[e])===Ys[e])}}}function Zs(e,t,n){n&&(e[t]=n)}function ei(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const i=new Qs(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[$s(r)]=r,n[$s(i.attribute)]=r}return new Ms(t,n,e.space)}Qs.prototype.defined=!0;const ti=ei({properties:{ariaActiveDescendant:null,ariaAtomic:Bs,ariaAutoComplete:null,ariaBusy:Bs,ariaChecked:Bs,ariaColCount:Ws,ariaColIndex:Ws,ariaColSpan:Ws,ariaControls:Vs,ariaCurrent:null,ariaDescribedBy:Vs,ariaDetails:null,ariaDisabled:Bs,ariaDropEffect:Vs,ariaErrorMessage:null,ariaExpanded:Bs,ariaFlowTo:Vs,ariaGrabbed:Bs,ariaHasPopup:null,ariaHidden:Bs,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Vs,ariaLevel:Ws,ariaLive:null,ariaModal:Bs,ariaMultiLine:Bs,ariaMultiSelectable:Bs,ariaOrientation:null,ariaOwns:Vs,ariaPlaceholder:null,ariaPosInSet:Ws,ariaPressed:Bs,ariaReadOnly:Bs,ariaRelevant:null,ariaRequired:Bs,ariaRoleDescription:Vs,ariaRowCount:Ws,ariaRowIndex:Ws,ariaRowSpan:Ws,ariaSelected:Bs,ariaSetSize:Ws,ariaSort:null,ariaValueMax:Ws,ariaValueMin:Ws,ariaValueNow:Ws,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()});function ni(e,t){return t in e?e[t]:t}function ri(e,t){return ni(e,t.toLowerCase())}const si=ei({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Gs,acceptCharset:Vs,accessKey:Vs,action:null,allow:null,allowFullScreen:qs,allowPaymentRequest:qs,allowUserMedia:qs,alt:null,as:null,async:qs,autoCapitalize:null,autoComplete:Vs,autoFocus:qs,autoPlay:qs,blocking:Vs,capture:null,charSet:null,checked:qs,cite:null,className:Vs,cols:Ws,colSpan:null,content:null,contentEditable:Bs,controls:qs,controlsList:Vs,coords:Ws|Gs,crossOrigin:null,data:null,dateTime:null,decoding:null,default:qs,defer:qs,dir:null,dirName:null,disabled:qs,download:Hs,draggable:Bs,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:qs,formTarget:null,headers:Vs,height:Ws,hidden:Hs,high:Ws,href:null,hrefLang:null,htmlFor:Vs,httpEquiv:Vs,id:null,imageSizes:null,imageSrcSet:null,inert:qs,inputMode:null,integrity:null,is:null,isMap:qs,itemId:null,itemProp:Vs,itemRef:Vs,itemScope:qs,itemType:Vs,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:qs,low:Ws,manifest:null,max:null,maxLength:Ws,media:null,method:null,min:null,minLength:Ws,multiple:qs,muted:qs,name:null,nonce:null,noModule:qs,noValidate:qs,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:qs,optimum:Ws,pattern:null,ping:Vs,placeholder:null,playsInline:qs,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:qs,referrerPolicy:null,rel:Vs,required:qs,reversed:qs,rows:Ws,rowSpan:Ws,sandbox:Vs,scope:null,scoped:qs,seamless:qs,selected:qs,shadowRootClonable:qs,shadowRootDelegatesFocus:qs,shadowRootMode:null,shape:null,size:Ws,sizes:null,slot:null,span:Ws,spellCheck:Bs,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ws,step:null,style:null,tabIndex:Ws,target:null,title:null,translate:null,type:null,typeMustMatch:qs,useMap:null,value:Bs,width:Ws,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Vs,axis:null,background:null,bgColor:null,border:Ws,borderColor:null,bottomMargin:Ws,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:qs,declare:qs,event:null,face:null,frame:null,frameBorder:null,hSpace:Ws,leftMargin:Ws,link:null,longDesc:null,lowSrc:null,marginHeight:Ws,marginWidth:Ws,noResize:qs,noHref:qs,noShade:qs,noWrap:qs,object:null,profile:null,prompt:null,rev:null,rightMargin:Ws,rules:null,scheme:null,scrolling:Bs,standby:null,summary:null,text:null,topMargin:Ws,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ws,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:qs,disableRemotePlayback:qs,prefix:null,property:null,results:Ws,security:null,unselectable:null},space:"html",transform:ri}),ii=ei({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Js,accentHeight:Ws,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ws,amplitude:Ws,arabicForm:null,ascent:Ws,attributeName:null,attributeType:null,azimuth:Ws,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ws,by:null,calcMode:null,capHeight:Ws,className:Vs,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ws,diffuseConstant:Ws,direction:null,display:null,dur:null,divisor:Ws,dominantBaseline:null,download:qs,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ws,enableBackground:null,end:null,event:null,exponent:Ws,externalResourcesRequired:null,fill:null,fillOpacity:Ws,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Gs,g2:Gs,glyphName:Gs,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ws,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ws,horizOriginX:Ws,horizOriginY:Ws,id:null,ideographic:Ws,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ws,k:Ws,k1:Ws,k2:Ws,k3:Ws,k4:Ws,kernelMatrix:Js,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ws,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ws,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ws,overlineThickness:Ws,paintOrder:null,panose1:null,path:null,pathLength:Ws,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Vs,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ws,pointsAtY:Ws,pointsAtZ:Ws,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Js,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Js,rev:Js,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Js,requiredFeatures:Js,requiredFonts:Js,requiredFormats:Js,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ws,specularExponent:Ws,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ws,strikethroughThickness:Ws,string:null,stroke:null,strokeDashArray:Js,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ws,strokeOpacity:Ws,strokeWidth:null,style:null,surfaceScale:Ws,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Js,tabIndex:Ws,tableValues:null,target:null,targetX:Ws,targetY:Ws,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Js,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ws,underlineThickness:Ws,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ws,values:null,vAlphabetic:Ws,vMathematical:Ws,vectorEffect:null,vHanging:Ws,vIdeographic:Ws,version:null,vertAdvY:Ws,vertOriginX:Ws,vertOriginY:Ws,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ws,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:ni}),ai=ei({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()}),oi=ei({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:ri}),li=ei({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()}),ci={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},ui=/[A-Z]/g,di=/-[a-z]/g,hi=/^data[-\w.:]+$/i;function fi(e){return"-"+e.toLowerCase()}function pi(e){return e.charAt(1).toUpperCase()}const mi=zs([ti,si,ai,oi,li],"html"),gi=zs([ti,ii,ai,oi,li],"svg");var xi={},yi=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,vi=/\n/g,bi=/^\s*/,wi=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,ji=/^:\s*/,ki=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,_i=/^[;\s]*/,Ni=/^\s+|\s+$/g,Si="";function Ei(e){return e?e.replace(Ni,Si):Si}var Ti=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xi,"__esModule",{value:!0}),xi.default=function(e,t){var n=null;if(!e||"string"!=typeof e)return n;var r=(0,Ci.default)(e),s="function"==typeof t;return r.forEach((function(e){if("declaration"===e.type){var r=e.property,i=e.value;s?t(r,i,e):i&&((n=n||{})[r]=i)}})),n};var Ci=Ti((function(e,t){if("string"!=typeof e)throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(e){var t=e.match(vi);t&&(n+=t.length);var s=e.lastIndexOf("\n");r=~s?e.length-s:r+e.length}function i(){var e={line:n,column:r};return function(t){return t.position=new a(e),c(),t}}function a(e){this.start=e,this.end={line:n,column:r},this.source=t.source}function o(s){var i=new Error(t.source+":"+n+":"+r+": "+s);if(i.reason=s,i.filename=t.source,i.line=n,i.column=r,i.source=e,!t.silent)throw i}function l(t){var n=t.exec(e);if(n){var r=n[0];return s(r),e=e.slice(r.length),n}}function c(){l(bi)}function u(e){var t;for(e=e||[];t=d();)!1!==t&&e.push(t);return e}function d(){var t=i();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;Si!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,Si===e.charAt(n-1))return o("End of comment missing");var a=e.slice(2,n-2);return r+=2,s(a),e=e.slice(n),r+=2,t({type:"comment",comment:a})}}function h(){var e=i(),t=l(wi);if(t){if(d(),!l(ji))return o("property missing ':'");var n=l(ki),r=e({type:"declaration",property:Ei(t[0].replace(yi,Si)),value:n?Ei(n[0].replace(yi,Si)):Si});return l(_i),r}}return a.prototype.content=e,c(),function(){var e,t=[];for(u(t);e=h();)!1!==e&&(t.push(e),u(t));return t}()}));var Pi={};Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.camelCase=void 0;var Ii=/^--[a-zA-Z0-9_-]+$/,Ai=/-([a-z])/g,Oi=/^[^-]+$/,Ri=/^-(webkit|moz|ms|o|khtml)-/,Li=/^-(ms)-/,Di=function(e,t){return t.toUpperCase()},Mi=function(e,t){return"".concat(t,"-")};Pi.camelCase=function(e,t){return void 0===t&&(t={}),function(e){return!e||Oi.test(e)||Ii.test(e)}(e)?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(Li,Mi):e.replace(Ri,Mi)).replace(Ai,Di))};var zi=(o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(xi),$i=Pi;function Fi(e,t){var n={};return e&&"string"==typeof e?((0,zi.default)(e,(function(e,r){e&&r&&(n[(0,$i.camelCase)(e,t)]=r)})),n):n}Fi.default=Fi;const Ui=l(Fi),qi=Hi("end"),Bi=Hi("start");function Hi(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"==typeof n.line&&n.line>0&&"number"==typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"==typeof n.offset&&n.offset>-1?n.offset:void 0}}}function Wi(e){return e&&"object"==typeof e?"position"in e||"type"in e?Gi(e.position):"start"in e||"end"in e?Gi(e):"line"in e||"column"in e?Vi(e):"":""}function Vi(e){return Ji(e&&e.line)+":"+Ji(e&&e.column)}function Gi(e){return Vi(e&&e.start)+"-"+Vi(e&&e.end)}function Ji(e){return e&&"number"==typeof e?e:1}class Ki extends Error{constructor(e,t,n){super(),"string"==typeof t&&(n=t,t=void 0);let r="",s={},i=!1;if(t&&(s="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"==typeof e?r=e:!s.cause&&e&&(i=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&"string"==typeof n){const e=n.indexOf(":");-1===e?s.ruleId=n:(s.source=n.slice(0,e),s.ruleId=n.slice(e+1))}if(!s.place&&s.ancestors&&s.ancestors){const e=s.ancestors[s.ancestors.length-1];e&&(s.place=e.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=a?a.line:void 0,this.name=Wi(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=i&&s.cause&&"string"==typeof s.cause.stack?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ki.prototype.file="",Ki.prototype.name="",Ki.prototype.reason="",Ki.prototype.message="",Ki.prototype.stack="",Ki.prototype.column=void 0,Ki.prototype.line=void 0,Ki.prototype.ancestors=void 0,Ki.prototype.cause=void 0,Ki.prototype.fatal=void 0,Ki.prototype.place=void 0,Ki.prototype.ruleId=void 0,Ki.prototype.source=void 0;const Yi={}.hasOwnProperty,Xi=new Map,Qi=/[A-Z]/g,Zi=new Set(["table","tbody","thead","tfoot","tr"]),ea=new Set(["td","th"]),ta="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function na(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if("function"!=typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=function(e,t){return n;function n(n,r,s,i){const a=Array.isArray(s.children),o=Bi(n);return t(r,s,i,a,{columnNumber:o?o.column-1:void 0,fileName:e,lineNumber:o?o.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!=typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");r=function(e,t,n){return r;function r(e,r,s,i){const a=Array.isArray(s.children)?n:t;return i?a(r,s,i):a(r,s)}}(0,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?gi:mi,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},i=ra(s,e,void 0);return i&&"string"!=typeof i?i:s.create(e,s.Fragment,{children:i||void 0},void 0)}function ra(e,t,n){return"element"===t.type?function(e,t,n){const r=e.schema;let s=r;"svg"===t.tagName.toLowerCase()&&"html"===r.space&&(s=gi,e.schema=s);e.ancestors.push(t);const i=la(e,t.tagName,!1),a=function(e,t){const n={};let r,s;for(s in t.properties)if("children"!==s&&Yi.call(t.properties,s)){const i=oa(e,s,t.properties[s]);if(i){const[s,a]=i;e.tableCellAlignToStyle&&"align"===s&&"string"==typeof a&&ea.has(t.tagName)?r=a:n[s]=a}}if(r){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=r}return n}(e,t);let o=aa(e,t);Zi.has(t.tagName)&&(o=o.filter((function(e){return"string"!=typeof e||!("object"==typeof(t=e)?"text"===t.type&&Ds(t.value):Ds(t));var t})));return sa(e,a,i,t),ia(a,o),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}ca(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const r=e.schema;let s=r;"svg"===t.name&&"html"===r.space&&(s=gi,e.schema=s);e.ancestors.push(t);const i=null===t.name?e.Fragment:la(e,t.name,!0),a=function(e,t){const n={};for(const r of t.attributes)if("mdxJsxExpressionAttribute"===r.type)if(r.data&&r.data.estree&&e.evaluater){const t=r.data.estree.body[0];t.type;const s=t.expression;s.type;const i=s.properties[0];i.type,Object.assign(n,e.evaluater.evaluateExpression(i.argument))}else ca(e,t.position);else{const s=r.name;let i;if(r.value&&"object"==typeof r.value)if(r.value.data&&r.value.data.estree&&e.evaluater){const t=r.value.data.estree.body[0];t.type,i=e.evaluater.evaluateExpression(t.expression)}else ca(e,t.position);else i=null===r.value||r.value;n[s]=i}return n}(e,t),o=aa(e,t);return sa(e,a,i,t),ia(a,o),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);ca(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const r={};return ia(r,aa(e,t)),e.create(t,e.Fragment,r,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function sa(e,t,n,r){"string"!=typeof n&&n!==e.Fragment&&e.passNode&&(t.node=r)}function ia(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function aa(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:Xi;for(;++r<t.children.length;){const i=t.children[r];let a;if(e.passKeys){const e="element"===i.type?i.tagName:"mdxJsxFlowElement"===i.type||"mdxJsxTextElement"===i.type?i.name:void 0;if(e){const t=s.get(e)||0;a=e+"-"+t,s.set(e,t+1)}}const o=ra(e,i,a);void 0!==o&&n.push(o)}return n}function oa(e,t,n){const r=function(e,t){const n=$s(t);let r=t,s=Fs;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&hi.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(di,pi);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!di.test(e)){let n=e.replace(ui,fi);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}s=Qs}return new s(r,t)}(e.schema,t);if(!(null==n||"number"==typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?function(e){const t={};return(""===e[e.length-1]?[...e,""]:e).join((t.padRight?" ":"")+","+(!1===t.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===r.property){let t="object"==typeof n?n:function(e,t){try{return Ui(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const t=n,r=new Ki("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=ta+"#cannot-parse-style-attribute",r}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)Yi.call(e,n)&&(t[ua(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&r.space?ci[r.property]||r.property:r.attribute,n]}}function la(e,t,n){let r;if(n)if(t.includes(".")){const e=t.split(".");let n,s=-1;for(;++s<e.length;){const t=Rs(e[s])?{type:"Identifier",name:e[s]}:{type:"Literal",value:e[s]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(s&&"Literal"===t.type),optional:!1}:t}r=n}else r=Rs(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else r={type:"Literal",value:t};if("Literal"===r.type){const t=r.value;return Yi.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(r);ca(e)}function ca(e,t){const n=new Ki("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=ta+"#cannot-handle-mdx-estrees-without-createevaluater",n}function ua(e){let t=e.replace(Qi,da);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function da(e){return"-"+e.toLowerCase()}const ha={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},fa={};function pa(e,t,n){if(function(e){return Boolean(e&&"object"==typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return ma(e.children,t,n)}return Array.isArray(e)?ma(e,t,n):""}function ma(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=pa(e[s],t,n);return r.join("")}const ga=document.createElement("i");function xa(e){const t="&"+e+";";ga.innerHTML=t;const n=ga.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}function ya(e,t,n,r){const s=e.length;let i,a=0;if(t=t<0?-t>s?0:s+t:t>s?s:t,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);a<r.length;)i=r.slice(a,a+1e4),i.unshift(t,0),e.splice(...i),a+=1e4,t+=1e4}function va(e,t){return e.length>0?(ya(e,e.length,0,t),e):t}const ba={}.hasOwnProperty;function wa(e,t){let n;for(n in t){const r=(ba.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let i;if(s)for(i in s){ba.call(r,i)||(r[i]=[]);const e=s[i];ja(r[i],Array.isArray(e)?e:e?[e]:[])}}}function ja(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);ya(e,0,0,r)}function ka(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||!(65535&~n)||65534==(65535&n)||n>1114111?"�":String.fromCodePoint(n)}function _a(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Na=Ma(/[A-Za-z]/),Sa=Ma(/[\dA-Za-z]/),Ea=Ma(/[#-'*+\--9=?A-Z^-~]/);function Ta(e){return null!==e&&(e<32||127===e)}const Ca=Ma(/\d/),Pa=Ma(/[\dA-Fa-f]/),Ia=Ma(/[!-/:-@[-`{-~]/);function Aa(e){return null!==e&&e<-2}function Oa(e){return null!==e&&(e<0||32===e)}function Ra(e){return-2===e||-1===e||32===e}const La=Ma(new RegExp("\\p{P}|\\p{S}","u")),Da=Ma(/\s/);function Ma(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function za(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const i=e.charCodeAt(n);let a="";if(37===i&&Sa(e.charCodeAt(n+1))&&Sa(e.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(a=String.fromCharCode(i));else if(i>55295&&i<57344){const t=e.charCodeAt(n+1);i<56320&&t>56319&&t<57344?(a=String.fromCharCode(i,t),s=1):a="�"}else a=String.fromCharCode(i);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+s+1,a=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function $a(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return function(r){if(Ra(r))return e.enter(n),a(r);return t(r)};function a(r){return Ra(r)&&i++<s?(e.consume(r),a):(e.exit(n),t(r))}}const Fa={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,(function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),$a(e,t,"linePrefix")}),(function(t){return e.enter("paragraph"),r(t)}));let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,s(t)}function s(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):Aa(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),s)}}};const Ua={tokenize:function(e){const t=this,n=[];let r,s,i,a=0;return o;function o(r){if(a<n.length){const s=n[a];return t.containerState=s[1],e.attempt(s[0].continuation,l,c)(r)}return c(r)}function l(e){if(a++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&y();const n=t.events.length;let s,i=n;for(;i--;)if("exit"===t.events[i][0]&&"chunkFlow"===t.events[i][1].type){s=t.events[i][1].end;break}x(a);let o=n;for(;o<t.events.length;)t.events[o][1].end={...s},o++;return ya(t.events,i+1,0,t.events.slice(n)),t.events.length=o,c(e)}return o(e)}function c(s){if(a===n.length){if(!r)return h(s);if(r.currentConstruct&&r.currentConstruct.concrete)return p(s);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(qa,u,d)(s)}function u(e){return r&&y(),x(a),h(e)}function d(e){return t.parser.lazy[t.now().line]=a!==n.length,i=t.now().offset,p(e)}function h(n){return t.containerState={},e.attempt(qa,f,p)(n)}function f(e){return a++,n.push([t.currentConstruct,t.containerState]),h(e)}function p(n){return null===n?(r&&y(),x(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),m(n))}function m(n){return null===n?(g(e.exit("chunkFlow"),!0),x(0),void e.consume(n)):Aa(n)?(e.consume(n),g(e.exit("chunkFlow")),a=0,t.interrupt=void 0,o):(e.consume(n),m)}function g(e,n){const o=t.sliceStream(e);if(n&&o.push(null),e.previous=s,s&&(s.next=e),s=e,r.defineSkip(e.start),r.write(o),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<i&&(!r.events[e][1].end||r.events[e][1].end.offset>i))return;const n=t.events.length;let s,o,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(s){o=t.events[l][1].end;break}s=!0}for(x(a),e=n;e<t.events.length;)t.events[e][1].end={...o},e++;ya(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function x(r){let s=n.length;for(;s-- >r;){const r=n[s];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function y(){r.write([null]),s=void 0,r=void 0,t.containerState._closeFlow=void 0}}},qa={tokenize:function(e,t,n){return $a(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};function Ba(e){return null===e||Oa(e)||Da(e)?1:La(e)?2:void 0}function Ha(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const Wa={name:"attention",resolveAll:function(e,t){let n,r,s,i,a,o,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;o=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const d={...e[n][1].end},h={...e[u][1].start};Va(d,-o),Va(h,o),i={type:o>1?"strongSequence":"emphasisSequence",start:d,end:{...e[n][1].end}},a={type:o>1?"strongSequence":"emphasisSequence",start:{...e[u][1].start},end:h},s={type:o>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[u][1].start}},r={type:o>1?"strong":"emphasis",start:{...i.start},end:{...a.end}},e[n][1].end={...i.start},e[u][1].start={...a.end},l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=va(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=va(l,[["enter",r,t],["enter",i,t],["exit",i,t],["enter",s,t]]),l=va(l,Ha(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),l=va(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",r,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=va(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,ya(e,n-1,u-n+3,l),u=n+l.length-c-2;break}u=-1;for(;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e},tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Ba(r);let i;return function(t){return i=t,e.enter("attentionSequence"),a(t)};function a(o){if(o===i)return e.consume(o),a;const l=e.exit("attentionSequence"),c=Ba(o),u=!c||2===c&&s||n.includes(o),d=!s||2===s&&c||n.includes(r);return l._open=Boolean(42===i?u:u&&(s||!d)),l._close=Boolean(42===i?d:d&&(c||!u)),t(o)}}};function Va(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Ga={name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s};function s(t){return Na(t)?(e.consume(t),i):64===t?n(t):l(t)}function i(e){return 43===e||45===e||46===e||Sa(e)?(r=1,a(e)):l(e)}function a(t){return 58===t?(e.consume(t),r=0,o):(43===t||45===t||46===t||Sa(t))&&r++<32?(e.consume(t),a):(r=0,l(t))}function o(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||Ta(r)?n(r):(e.consume(r),o)}function l(t){return 64===t?(e.consume(t),c):Ea(t)?(e.consume(t),l):n(t)}function c(e){return Sa(e)?u(e):n(e)}function u(n){return 46===n?(e.consume(n),r=0,c):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):d(n)}function d(t){if((45===t||Sa(t))&&r++<63){const n=45===t?d:u;return e.consume(t),n}return n(t)}}};const Ja={partial:!0,tokenize:function(e,t,n){return function(t){return Ra(t)?$a(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||Aa(e)?t(e):n(e)}}};const Ka={continuation:{tokenize:function(e,t,n){const r=this;return function(t){if(Ra(t))return $a(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return s(t)};function s(r){return e.attempt(Ka,t,n)(r)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),s}return n(t)};function s(n){return Ra(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}};const Ya={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return Ia(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const Xa={name:"characterReference",tokenize:function(e,t,n){const r=this;let s,i,a=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),o};function o(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,i=Sa,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,i=Pa,c):(e.enter("characterReferenceValue"),s=7,i=Ca,c(t))}function c(o){if(59===o&&a){const s=e.exit("characterReferenceValue");return i!==Sa||xa(r.sliceSerialize(s))?(e.enter("characterReferenceMarker"),e.consume(o),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(o)}return i(o)&&a++<s?(e.consume(o),c):n(o)}}};const Qa={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s};function s(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}},Za={concrete:!0,name:"codeFenced",tokenize:function(e,t,n){const r=this,s={partial:!0,tokenize:function(e,t,n){let s=0;return a;function a(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),Ra(t)?$a(e,c,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===i?(e.enter("codeFencedFenceSequence"),u(t)):n(t)}function u(t){return t===i?(s++,e.consume(t),u):s>=o?(e.exit("codeFencedFenceSequence"),Ra(t)?$a(e,d,"whitespace")(t):d(t)):n(t)}function d(r){return null===r||Aa(r)?(e.exit("codeFencedFence"),t(r)):n(r)}}};let i,a=0,o=0;return function(t){return function(t){const n=r.events[r.events.length-1];return a=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,i=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===i?(o++,e.consume(t),l):o<3?n(t):(e.exit("codeFencedFenceSequence"),Ra(t)?$a(e,c,"whitespace")(t):c(t))}function c(n){return null===n||Aa(n)?(e.exit("codeFencedFence"),r.interrupt?t(n):e.check(Qa,f,y)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(n))}function u(t){return null===t||Aa(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):Ra(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),$a(e,d,"whitespace")(t)):96===t&&t===i?n(t):(e.consume(t),u)}function d(t){return null===t||Aa(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||Aa(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===i?n(t):(e.consume(t),h)}function f(t){return e.attempt(s,y,p)(t)}function p(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),m}function m(t){return a>0&&Ra(t)?$a(e,g,"linePrefix",a+1)(t):g(t)}function g(t){return null===t||Aa(t)?e.check(Qa,f,y)(t):(e.enter("codeFlowValue"),x(t))}function x(t){return null===t||Aa(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),x)}function y(n){return e.exit("codeFenced"),t(n)}}};const eo={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),$a(e,s,"linePrefix",5)(t)};function s(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?i(e):n(e)}function i(t){return null===t?o(t):Aa(t)?e.attempt(to,i,o)(t):(e.enter("codeFlowValue"),a(t))}function a(t){return null===t||Aa(t)?(e.exit("codeFlowValue"),i(t)):(e.consume(t),a)}function o(n){return e.exit("codeIndented"),t(n)}}},to={partial:!0,tokenize:function(e,t,n){const r=this;return s;function s(t){return r.parser.lazy[r.now().line]?n(t):Aa(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):$a(e,i,"linePrefix",5)(t)}function i(e){const i=r.events[r.events.length-1];return i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(e):Aa(e)?s(e):n(e)}}};const no={name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,n,r=e.length-4,s=3;if(!("lineEnding"!==e[s][1].type&&"space"!==e[s][1].type||"lineEnding"!==e[r][1].type&&"space"!==e[r][1].type))for(t=s;++t<r;)if("codeTextData"===e[t][1].type){e[s][1].type="codeTextPadding",e[r][1].type="codeTextPadding",s+=2,r-=2;break}t=s-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},tokenize:function(e,t,n){let r,s,i=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),i++,a):(e.exit("codeTextSequence"),o(t))}function o(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),o):96===t?(s=e.enter("codeTextSequence"),r=0,c(t)):Aa(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||Aa(t)?(e.exit("codeTextData"),o(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),r++,c):r===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(s.type="codeTextData",l(n))}}};class ro{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null==t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const r=t||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return n&&so(this.left,n),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),so(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),so(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);so(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);so(this.left,t.reverse())}}}function so(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function io(e){const t={};let n,r,s,i,a,o,l,c=-1;const u=new ro(e);for(;++c<u.length;){for(;c in t;)c=t[c];if(n=u.get(c),c&&"chunkFlow"===n[1].type&&"listItemPrefix"===u.get(c-1)[1].type&&(o=n[1]._tokenizer.events,s=0,s<o.length&&"lineEndingBlank"===o[s][1].type&&(s+=2),s<o.length&&"content"===o[s][1].type))for(;++s<o.length&&"content"!==o[s][1].type;)"chunkText"===o[s][1].type&&(o[s][1]._isInFirstContentOfListItem=!0,s++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,ao(u,c)),c=t[c],l=!0);else if(n[1]._container){for(s=c,r=void 0;s--;)if(i=u.get(s),"lineEnding"===i[1].type||"lineEndingBlank"===i[1].type)"enter"===i[0]&&(r&&(u.get(r)[1].type="lineEndingBlank"),i[1].type="lineEnding",r=s);else if("linePrefix"!==i[1].type&&"listItemIndent"!==i[1].type)break;r&&(n[1].end={...u.get(r)[1].start},a=u.slice(r,c),a.unshift(n),u.splice(r,c-r+1,a))}}return ya(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!l}function ao(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const i=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,l=[],c={};let u,d,h=-1,f=n,p=0,m=0;const g=[m];for(;f;){for(;e.get(++s)[1]!==f;);i.push(s),f._tokenizer||(u=r.sliceStream(f),f.next||u.push(null),d&&a.defineSkip(f.start),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(u),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++h<o.length;)"exit"===o[h][0]&&"enter"===o[h-1][0]&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(m=h+1,g.push(m),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(a.events=[],f?(f._tokenizer=void 0,f.previous=void 0):g.pop(),h=g.length;h--;){const t=o.slice(g[h],g[h+1]),n=i.pop();l.push([n,n+t.length-1]),e.splice(n,2,t)}for(l.reverse(),h=-1;++h<l.length;)c[p+l[h][0]]=p+l[h][1],p+=l[h][1]-l[h][0]-1;return c}const oo={resolve:function(e){return io(e),e},tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?s(t):Aa(t)?e.check(lo,i,s)(t):(e.consume(t),r)}function s(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function i(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}},lo={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),$a(e,s,"linePrefix")};function s(s){if(null===s||Aa(s))return n(s);const i=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(s):e.interrupt(r.parser.constructs.flow,n,t)(s)}}};function co(e,t,n,r,s,i,a,o,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(t){if(60===t)return e.enter(r),e.enter(s),e.enter(i),e.consume(t),e.exit(i),d;if(null===t||32===t||41===t||Ta(t))return n(t);return e.enter(r),e.enter(a),e.enter(o),e.enter("chunkString",{contentType:"string"}),p(t)};function d(n){return 62===n?(e.enter(i),e.consume(n),e.exit(i),e.exit(s),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(o),d(t)):null===t||60===t||Aa(t)?n(t):(e.consume(t),92===t?f:h)}function f(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function p(s){return u||null!==s&&41!==s&&!Oa(s)?u<c&&40===s?(e.consume(s),u++,p):41===s?(e.consume(s),u--,p):null===s||32===s||40===s||Ta(s)?n(s):(e.consume(s),92===s?m:p):(e.exit("chunkString"),e.exit(o),e.exit(a),e.exit(r),t(s))}function m(t){return 40===t||41===t||92===t?(e.consume(t),p):p(t)}}function uo(e,t,n,r,s,i){const a=this;let o,l=0;return function(t){return e.enter(r),e.enter(s),e.consume(t),e.exit(s),e.enter(i),c};function c(d){return l>999||null===d||91===d||93===d&&!o||94===d&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(d):93===d?(e.exit(i),e.enter(s),e.consume(d),e.exit(s),e.exit(r),t):Aa(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(d))}function u(t){return null===t||91===t||93===t||Aa(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),o||(o=!Ra(t)),92===t?d:u)}function d(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function ho(e,t,n,r,s,i){let a;return function(t){if(34===t||39===t||40===t)return e.enter(r),e.enter(s),e.consume(t),e.exit(s),a=40===t?41:t,o;return n(t)};function o(n){return n===a?(e.enter(s),e.consume(n),e.exit(s),e.exit(r),t):(e.enter(i),l(n))}function l(t){return t===a?(e.exit(i),o(a)):null===t?n(t):Aa(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),$a(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===a||null===t||Aa(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===a||92===t?(e.consume(t),c):c(t)}}function fo(e,t){let n;return function r(s){if(Aa(s))return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r;if(Ra(s))return $a(e,r,n?"linePrefix":"lineSuffix")(s);return t(s)}}const po={name:"definition",tokenize:function(e,t,n){const r=this;let s;return function(t){return e.enter("definition"),function(t){return uo.call(r,e,i,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function i(t){return s=_a(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),a):n(t)}function a(t){return Oa(t)?fo(e,o)(t):o(t)}function o(t){return co(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(mo,c,c)(t)}function c(t){return Ra(t)?$a(e,u,"whitespace")(t):u(t)}function u(i){return null===i||Aa(i)?(e.exit("definition"),r.parser.defined.push(s),t(i)):n(i)}}},mo={partial:!0,tokenize:function(e,t,n){return function(t){return Oa(t)?fo(e,r)(t):n(t)};function r(t){return ho(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function s(t){return Ra(t)?$a(e,i,"whitespace")(t):i(t)}function i(e){return null===e||Aa(e)?t(e):n(e)}}};const go={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return Aa(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}};const xo={name:"headingAtx",resolve:function(e,t){let n,r,s=e.length-2,i=3;"whitespace"===e[i][1].type&&(i+=2);s-2>i&&"whitespace"===e[s][1].type&&(s-=2);"atxHeadingSequence"===e[s][1].type&&(i===s-1||s-4>i&&"whitespace"===e[s-2][1].type)&&(s-=i+1===s?2:4);s>i&&(n={type:"atxHeadingText",start:e[i][1].start,end:e[s][1].end},r={type:"chunkText",start:e[i][1].start,end:e[s][1].end,contentType:"text"},ya(e,i,s-i+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e},tokenize:function(e,t,n){let r=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),s(t)}(t)};function s(t){return 35===t&&r++<6?(e.consume(t),s):null===t||Oa(t)?(e.exit("atxHeadingSequence"),i(t)):n(t)}function i(n){return 35===n?(e.enter("atxHeadingSequence"),a(n)):null===n||Aa(n)?(e.exit("atxHeading"),t(n)):Ra(n)?$a(e,i,"whitespace")(n):(e.enter("atxHeadingText"),o(n))}function a(t){return 35===t?(e.consume(t),a):(e.exit("atxHeadingSequence"),i(t))}function o(t){return null===t||35===t||Oa(t)?(e.exit("atxHeadingText"),i(t)):(e.consume(t),o)}}};const yo=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],vo=["pre","script","style","textarea"],bo={concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},tokenize:function(e,t,n){const r=this;let s,i,a,o,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(o){return 33===o?(e.consume(o),u):47===o?(e.consume(o),i=!0,f):63===o?(e.consume(o),s=3,r.interrupt?t:R):Na(o)?(e.consume(o),a=String.fromCharCode(o),p):n(o)}function u(i){return 45===i?(e.consume(i),s=2,d):91===i?(e.consume(i),s=5,o=0,h):Na(i)?(e.consume(i),s=4,r.interrupt?t:R):n(i)}function d(s){return 45===s?(e.consume(s),r.interrupt?t:R):n(s)}function h(s){const i="CDATA[";return s===i.charCodeAt(o++)?(e.consume(s),6===o?r.interrupt?t:S:h):n(s)}function f(t){return Na(t)?(e.consume(t),a=String.fromCharCode(t),p):n(t)}function p(o){if(null===o||47===o||62===o||Oa(o)){const l=47===o,c=a.toLowerCase();return l||i||!vo.includes(c)?yo.includes(a.toLowerCase())?(s=6,l?(e.consume(o),m):r.interrupt?t(o):S(o)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(o):i?g(o):x(o)):(s=1,r.interrupt?t(o):S(o))}return 45===o||Sa(o)?(e.consume(o),a+=String.fromCharCode(o),p):n(o)}function m(s){return 62===s?(e.consume(s),r.interrupt?t:S):n(s)}function g(t){return Ra(t)?(e.consume(t),g):_(t)}function x(t){return 47===t?(e.consume(t),_):58===t||95===t||Na(t)?(e.consume(t),y):Ra(t)?(e.consume(t),x):_(t)}function y(t){return 45===t||46===t||58===t||95===t||Sa(t)?(e.consume(t),y):v(t)}function v(t){return 61===t?(e.consume(t),b):Ra(t)?(e.consume(t),v):x(t)}function b(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,w):Ra(t)?(e.consume(t),b):j(t)}function w(t){return t===l?(e.consume(t),l=null,k):null===t||Aa(t)?n(t):(e.consume(t),w)}function j(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||Oa(t)?v(t):(e.consume(t),j)}function k(e){return 47===e||62===e||Ra(e)?x(e):n(e)}function _(t){return 62===t?(e.consume(t),N):n(t)}function N(t){return null===t||Aa(t)?S(t):Ra(t)?(e.consume(t),N):n(t)}function S(t){return 45===t&&2===s?(e.consume(t),P):60===t&&1===s?(e.consume(t),I):62===t&&4===s?(e.consume(t),L):63===t&&3===s?(e.consume(t),R):93===t&&5===s?(e.consume(t),O):!Aa(t)||6!==s&&7!==s?null===t||Aa(t)?(e.exit("htmlFlowData"),E(t)):(e.consume(t),S):(e.exit("htmlFlowData"),e.check(wo,D,E)(t))}function E(t){return e.check(jo,T,D)(t)}function T(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),C}function C(t){return null===t||Aa(t)?E(t):(e.enter("htmlFlowData"),S(t))}function P(t){return 45===t?(e.consume(t),R):S(t)}function I(t){return 47===t?(e.consume(t),a="",A):S(t)}function A(t){if(62===t){const n=a.toLowerCase();return vo.includes(n)?(e.consume(t),L):S(t)}return Na(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),A):S(t)}function O(t){return 93===t?(e.consume(t),R):S(t)}function R(t){return 62===t?(e.consume(t),L):45===t&&2===s?(e.consume(t),R):S(t)}function L(t){return null===t||Aa(t)?(e.exit("htmlFlowData"),D(t)):(e.consume(t),L)}function D(n){return e.exit("htmlFlow"),t(n)}}},wo={partial:!0,tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(Ja,t,n)}}},jo={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(Aa(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s;return n(t)};function s(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}};const ko={name:"htmlText",tokenize:function(e,t,n){const r=this;let s,i,a;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),o};function o(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),b):63===t?(e.consume(t),y):Na(t)?(e.consume(t),k):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),i=0,f):Na(t)?(e.consume(t),x):n(t)}function c(t){return 45===t?(e.consume(t),h):n(t)}function u(t){return null===t?n(t):45===t?(e.consume(t),d):Aa(t)?(a=u,A(t)):(e.consume(t),u)}function d(t){return 45===t?(e.consume(t),h):u(t)}function h(e){return 62===e?I(e):45===e?d(e):u(e)}function f(t){const r="CDATA[";return t===r.charCodeAt(i++)?(e.consume(t),6===i?p:f):n(t)}function p(t){return null===t?n(t):93===t?(e.consume(t),m):Aa(t)?(a=p,A(t)):(e.consume(t),p)}function m(t){return 93===t?(e.consume(t),g):p(t)}function g(t){return 62===t?I(t):93===t?(e.consume(t),g):p(t)}function x(t){return null===t||62===t?I(t):Aa(t)?(a=x,A(t)):(e.consume(t),x)}function y(t){return null===t?n(t):63===t?(e.consume(t),v):Aa(t)?(a=y,A(t)):(e.consume(t),y)}function v(e){return 62===e?I(e):y(e)}function b(t){return Na(t)?(e.consume(t),w):n(t)}function w(t){return 45===t||Sa(t)?(e.consume(t),w):j(t)}function j(t){return Aa(t)?(a=j,A(t)):Ra(t)?(e.consume(t),j):I(t)}function k(t){return 45===t||Sa(t)?(e.consume(t),k):47===t||62===t||Oa(t)?_(t):n(t)}function _(t){return 47===t?(e.consume(t),I):58===t||95===t||Na(t)?(e.consume(t),N):Aa(t)?(a=_,A(t)):Ra(t)?(e.consume(t),_):I(t)}function N(t){return 45===t||46===t||58===t||95===t||Sa(t)?(e.consume(t),N):S(t)}function S(t){return 61===t?(e.consume(t),E):Aa(t)?(a=S,A(t)):Ra(t)?(e.consume(t),S):_(t)}function E(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),s=t,T):Aa(t)?(a=E,A(t)):Ra(t)?(e.consume(t),E):(e.consume(t),C)}function T(t){return t===s?(e.consume(t),s=void 0,P):null===t?n(t):Aa(t)?(a=T,A(t)):(e.consume(t),T)}function C(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||Oa(t)?_(t):(e.consume(t),C)}function P(e){return 47===e||62===e||Oa(e)?_(e):n(e)}function I(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function A(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),O}function O(t){return Ra(t)?$a(e,R,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):R(t)}function R(t){return e.enter("htmlTextData"),a(t)}}};const _o={name:"labelEnd",resolveAll:function(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),"labelImage"===r.type||"labelLink"===r.type||"labelEnd"===r.type){const e="labelImage"===r.type?4:2;r.type="data",t+=e}}e.length!==n.length&&ya(e,0,e.length,n);return e},resolveTo:function(e,t){let n,r,s,i,a=e.length,o=0;for(;a--;)if(n=e[a][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[a][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(s){if("enter"===e[a][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=a,"labelLink"!==n.type)){o=2;break}}else"labelEnd"===n.type&&(s=a);const l={type:"labelLink"===e[r][1].type?"link":"image",start:{...e[r][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[r][1].start},end:{...e[s][1].end}},u={type:"labelText",start:{...e[r+o+2][1].end},end:{...e[s-2][1].start}};return i=[["enter",l,t],["enter",c,t]],i=va(i,e.slice(r+1,r+o+3)),i=va(i,[["enter",u,t]]),i=va(i,Ha(t.parser.constructs.insideSpan.null,e.slice(r+o+4,s-3),t)),i=va(i,[["exit",u,t],e[s-2],e[s-1],["exit",c,t]]),i=va(i,e.slice(s+1)),i=va(i,[["exit",l,t]]),ya(e,r,e.length,i),e},tokenize:function(e,t,n){const r=this;let s,i,a=r.events.length;for(;a--;)if(("labelImage"===r.events[a][1].type||"labelLink"===r.events[a][1].type)&&!r.events[a][1]._balanced){s=r.events[a][1];break}return function(t){if(!s)return n(t);if(s._inactive)return u(t);return i=r.parser.defined.includes(_a(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),o};function o(t){return 40===t?e.attempt(No,c,i?c:u)(t):91===t?e.attempt(So,c,i?l:u)(t):i?c(t):u(t)}function l(t){return e.attempt(Eo,c,u)(t)}function c(e){return t(e)}function u(e){return s._balanced=!0,n(e)}}},No={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return Oa(t)?fo(e,s)(t):s(t)}function s(t){return 41===t?c(t):co(e,i,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function i(t){return Oa(t)?fo(e,o)(t):c(t)}function a(e){return n(e)}function o(t){return 34===t||39===t||40===t?ho(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return Oa(t)?fo(e,c)(t):c(t)}function c(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},So={tokenize:function(e,t,n){const r=this;return function(t){return uo.call(r,e,s,i,"reference","referenceMarker","referenceString")(t)};function s(e){return r.parser.defined.includes(_a(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function i(e){return n(e)}}},Eo={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const To={name:"labelStartImage",resolveAll:_o.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),s};function s(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),i):n(t)}function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};const Co={name:"labelStartLink",resolveAll:_o.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),s};function s(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};const Po={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),$a(e,t,"linePrefix")}}};const Io={name:"thematicBreak",tokenize:function(e,t,n){let r,s=0;return function(t){return e.enter("thematicBreak"),function(e){return r=e,i(e)}(t)};function i(i){return i===r?(e.enter("thematicBreakSequence"),a(i)):s>=3&&(null===i||Aa(i))?(e.exit("thematicBreak"),t(i)):n(i)}function a(t){return t===r?(e.consume(t),s++,a):(e.exit("thematicBreakSequence"),Ra(t)?$a(e,i,"whitespace")(t):i(t))}}};const Ao={continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Ja,(function(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,$a(e,t,"listItemIndent",r.containerState.size+1)(n)}),(function(n){if(r.containerState.furtherBlankLines||!Ra(n))return r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(n);return r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Ro,t,s)(n)}));function s(s){return r.containerState._closeFlow=!0,r.interrupt=void 0,$a(e,e.attempt(Ao,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,n){const r=this,s=r.events[r.events.length-1];let i=s&&"linePrefix"===s[1].type?s[2].sliceSerialize(s[1],!0).length:0,a=0;return function(t){const s=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===s?!r.containerState.marker||t===r.containerState.marker:Ca(t)){if(r.containerState.type||(r.containerState.type=s,e.enter(s,{_container:!0})),"listUnordered"===s)return e.enter("listItemPrefix"),42===t||45===t?e.check(Io,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),o(t)}return n(t)};function o(t){return Ca(t)&&++a<10?(e.consume(t),o):(!r.interrupt||a<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(Ja,r.interrupt?n:c,e.attempt(Oo,d,u))}function c(e){return r.containerState.initialBlankLine=!0,i++,d(e)}function u(t){return Ra(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):n(t)}function d(n){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}},Oo={partial:!0,tokenize:function(e,t,n){const r=this;return $a(e,(function(e){const s=r.events[r.events.length-1];return!Ra(e)&&s&&"listItemPrefixWhitespace"===s[1].type?t(e):n(e)}),"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},Ro={partial:!0,tokenize:function(e,t,n){const r=this;return $a(e,(function(e){const s=r.events[r.events.length-1];return s&&"listItemIndent"===s[1].type&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?t(e):n(e)}),"listItemIndent",r.containerState.size+1)}};const Lo={name:"setextUnderline",resolveTo:function(e,t){let n,r,s,i=e.length;for(;i--;)if("enter"===e[i][0]){if("content"===e[i][1].type){n=i;break}"paragraph"===e[i][1].type&&(r=i)}else"content"===e[i][1].type&&e.splice(i,1),s||"definition"!==e[i][1].type||(s=i);const a={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};e[r][1].type="setextHeadingText",s?(e.splice(r,0,["enter",a,t]),e.splice(s+1,0,["exit",e[n][1],t]),e[n][1].end={...e[s][1].end}):e[n][1]=a;return e.push(["exit",a,t]),e},tokenize:function(e,t,n){const r=this;let s;return function(t){let a,o=r.events.length;for(;o--;)if("lineEnding"!==r.events[o][1].type&&"linePrefix"!==r.events[o][1].type&&"content"!==r.events[o][1].type){a="paragraph"===r.events[o][1].type;break}if(!r.parser.lazy[r.now().line]&&(r.interrupt||a))return e.enter("setextHeadingLine"),s=t,function(t){return e.enter("setextHeadingLineSequence"),i(t)}(t);return n(t)};function i(t){return t===s?(e.consume(t),i):(e.exit("setextHeadingLineSequence"),Ra(t)?$a(e,a,"lineSuffix")(t):a(t))}function a(r){return null===r||Aa(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}}};const Do={tokenize:function(e){const t=this,n=e.attempt(Ja,(function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,r,$a(e,e.attempt(this.parser.constructs.flow,r,e.attempt(oo,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const Mo={resolveAll:Uo()},zo=Fo("string"),$o=Fo("text");function Fo(e){return{resolveAll:Uo("text"===e?qo:void 0),tokenize:function(t){const n=this,r=this.parser.constructs[e],s=t.attempt(r,i,a);return i;function i(e){return l(e)?s(e):a(e)}function a(e){if(null!==e)return t.enter("data"),t.consume(e),o;t.consume(e)}function o(e){return l(e)?(t.exit("data"),s(e)):(t.consume(e),o)}function l(e){if(null===e)return!0;const t=r[e];let s=-1;if(t)for(;++s<t.length;){const e=t[s];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}}function Uo(e){return function(t,n){let r,s=-1;for(;++s<=t.length;)void 0===r?t[s]&&"data"===t[s][1].type&&(r=s,s++):t[s]&&"data"===t[s][1].type||(s!==r+2&&(t[r][1].end=t[s-1][1].end,t.splice(r+2,s-r-2),s=r+2),r=void 0);return e?e(t,n):t}}function qo(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],s=t.sliceStream(r);let i,a=s.length,o=-1,l=0;for(;a--;){const e=s[a];if("string"==typeof e){for(o=e.length;32===e.charCodeAt(o-1);)l++,o--;if(o)break;o=-1}else if(-2===e)i=!0,l++;else if(-1!==e){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const s={type:n===e.length||i||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...s.start},r.start.offset===r.end.offset?Object.assign(r,s):(e.splice(n,0,["enter",s,t],["exit",s,t]),n+=2)}n++}return e}const Bo={42:Ao,43:Ao,45:Ao,48:Ao,49:Ao,50:Ao,51:Ao,52:Ao,53:Ao,54:Ao,55:Ao,56:Ao,57:Ao,62:Ka},Ho={91:po},Wo={[-2]:eo,[-1]:eo,32:eo},Vo={35:xo,42:Io,45:[Lo,Io],60:bo,61:Lo,95:Io,96:Za,126:Za},Go={38:Xa,92:Ya},Jo={[-5]:Po,[-4]:Po,[-3]:Po,33:To,38:Xa,42:Wa,60:[Ga,ko],91:Co,92:[go,Ya],93:_o,95:Wa,96:no},Ko={null:[Wa,Mo]},Yo=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:{null:[42,95]},contentInitial:Ho,disable:{null:[]},document:Bo,flow:Vo,flowInitial:Wo,insideSpan:Ko,string:Go,text:Jo},Symbol.toStringTag,{value:"Module"}));function Xo(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},i=[];let a=[],o=[];const l={attempt:g((function(e,t){x(e,t.from)})),check:g(m),consume:function(e){Aa(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,y()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++));c.previous=e},enter:function(e,t){const n=t||{};return n.type=e,n.start=h(),c.events.push(["enter",n,c]),o.push(n),n},exit:function(e){const t=o.pop();return t.end=h(),c.events.push(["exit",t,c]),t},interrupt:g(m,{interrupt:!0})},c={code:null,containerState:{},defineSkip:function(e){s[e.line]=e.column,y()},events:[],now:h,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const i=e[n];let a;if("string"==typeof i)a=i;else switch(i){case-5:a="\r";break;case-4:a="\n";break;case-3:a="\r\n";break;case-2:a=t?" ":"\t";break;case-1:if(!t&&s)continue;a=" ";break;default:a=String.fromCharCode(i)}s=-2===i,r.push(a)}return r.join("")}(d(e),t)},sliceStream:d,write:function(e){if(a=va(a,e),f(),null!==a[a.length-1])return[];return x(t,0),c.events=Ha(i,c.events,c),c.events}};let u=t.tokenize.call(c,l);return t.resolveAll&&i.push(t),c;function d(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let a;if(n===s)a=[e[n].slice(r,i)];else{if(a=e.slice(n,s),r>-1){const e=a[0];"string"==typeof e?a[0]=e.slice(r):a.shift()}i>0&&a.push(e[s].slice(0,i))}return a}(a,e)}function h(){const{_bufferIndex:e,_index:t,line:n,column:s,offset:i}=r;return{_bufferIndex:e,_index:t,line:n,column:s,offset:i}}function f(){let e;for(;r._index<a.length;){const t=a[r._index];if("string"==typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)p(t.charCodeAt(r._bufferIndex));else p(t)}}function p(e){u=u(e)}function m(e,t){t.restore()}function g(e,t){return function(n,s,i){let a,u,d,f;return Array.isArray(n)?p(n):"tokenize"in n?p([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return p([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function p(e){return a=e,u=0,0===e.length?i:m(e[u])}function m(e){return function(n){f=function(){const e=h(),t=c.previous,n=c.currentConstruct,s=c.events.length,i=Array.from(o);return{from:s,restore:a};function a(){r=e,c.previous=t,c.currentConstruct=n,c.events.length=s,o=i,y()}}(),d=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.includes(e.name))return x();return e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,g,x)(n)}}function g(t){return e(d,f),s}function x(e){return f.restore(),++u<a.length?m(a[u]):i}}}function x(e,t){e.resolveAll&&!i.includes(e)&&i.push(e),e.resolve&&ya(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function y(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function Qo(e){const t={constructs:function(e){const t={};let n=-1;for(;++n<e.length;)wa(t,e[n]);return t}([Yo,...(e||{}).extensions||[]]),content:n(Fa),defined:[],document:n(Ua),flow:n(Do),lazy:{},string:n(zo),text:n($o)};return t;function n(e){return function(n){return Xo(t,e,n)}}}const Zo=/[\0\t\n\r]/g;const el=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function tl(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return ka(n.slice(t?2:1),t?16:10)}return xa(n)||e}const nl={}.hasOwnProperty;function rl(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(te),autolinkProtocol:N,autolinkEmail:N,atxHeading:i(X),blockQuote:i(V),characterEscape:N,characterReference:N,codeFenced:i(G),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:i(G,a),codeText:i(J,a),codeTextData:N,data:N,codeFlowValue:N,definition:i(K),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:i(Y),hardBreakEscape:i(Q),hardBreakTrailing:i(Q),htmlFlow:i(Z,a),htmlFlowData:N,htmlText:i(Z,a),htmlTextData:N,image:i(ee),label:a,link:i(te),listItem:i(re),listItemValue:h,listOrdered:i(ne,d),listUnordered:i(ne),paragraph:i(se),reference:$,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:i(X),strong:i(ie),thematicBreak:i(oe)},exit:{atxHeading:l(),atxHeadingSequence:w,autolink:l(),autolinkEmail:W,autolinkProtocol:H,blockQuote:l(),characterEscapeValue:S,characterReferenceMarkerHexadecimal:U,characterReferenceMarkerNumeric:U,characterReferenceValue:q,characterReference:B,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:f,codeFencedFenceMeta:p,codeFlowValue:S,codeIndented:l(x),codeText:l(I),codeTextData:S,data:S,definition:l(),definitionDestinationString:b,definitionLabelString:y,definitionTitleString:v,emphasis:l(),hardBreakEscape:l(T),hardBreakTrailing:l(T),htmlFlow:l(C),htmlFlowData:S,htmlText:l(P),htmlTextData:S,image:l(O),label:L,labelText:R,lineEnding:E,link:l(A),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:F,resourceDestinationString:D,resourceTitleString:M,resource:z,setextHeading:l(_),setextHeadingLineSequence:k,setextHeadingText:j,strong:l(),thematicBreak:l()}};il(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(e){let r={type:"root",children:[]};const i={stack:[r],tokenStack:[],config:t,enter:o,exit:c,buffer:a,resume:u,data:n},l=[];let d=-1;for(;++d<e.length;)if("listOrdered"===e[d][1].type||"listUnordered"===e[d][1].type)if("enter"===e[d][0])l.push(d);else{d=s(e,l.pop(),d)}for(d=-1;++d<e.length;){const n=t[e[d][0]];nl.call(n,e[d][1].type)&&n[e[d][1].type].call(Object.assign({sliceSerialize:e[d][2].sliceSerialize},i),e[d][1])}if(i.tokenStack.length>0){const e=i.tokenStack[i.tokenStack.length-1];(e[1]||ol).call(i,void 0,e[0])}for(r.position={start:sl(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:sl(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},d=-1;++d<t.transforms.length;)r=t.transforms[d](r)||r;return r}function s(e,t,n){let r,s,i,a,o=t-1,l=-1,c=!1;for(;++o<=n;){const t=e[o];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,a=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||a||l||i||(i=o),a=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:a=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let a=o;for(s=void 0;a--;){const t=e[a];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;s&&(e[s][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",s=a}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}i&&(!s||i<s)&&(r._spread=!0),r.end=Object.assign({},s?e[s][1].start:t[1].end),e.splice(s||o,0,["exit",r,t[2]]),o++,n++}if("listItemPrefix"===t[1].type){const s={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=s,e.splice(o,0,["enter",s,t[2]]),o++,n++,i=void 0,a=!0}}}return e[t][1]._spread=c,n}function i(e,t){return n;function n(n){o.call(this,e(n),n),t&&t.call(this,n)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:sl(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+Wi({start:e.start,end:e.end})+"): it’s not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||ol).call(this,e,r[0])}n.position.end=sl(e.end)}function u(){return function(e){return pa(e,"boolean"!=typeof fa.includeImageAlt||fa.includeImageAlt,"boolean"!=typeof fa.includeHtml||fa.includeHtml)}(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function f(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function p(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function y(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=_a(this.sliceSerialize(e)).toLowerCase()}function v(){const e=this.resume();this.stack[this.stack.length-1].title=e}function b(){const e=this.resume();this.stack[this.stack.length-1].url=e}function w(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function j(){this.data.setextHeadingSlurpLineEnding=!0}function k(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function _(){this.data.setextHeadingSlurpLineEnding=void 0}function N(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=ae(),n.position={start:sl(e.start),end:void 0},t.push(n)),this.stack.push(n)}function S(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=sl(e.end)}function E(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=sl(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(N.call(this,e),S.call(this,e))}function T(){this.data.atHardBreak=!0}function C(){const e=this.resume();this.stack[this.stack.length-1].value=e}function P(){const e=this.resume();this.stack[this.stack.length-1].value=e}function I(){const e=this.resume();this.stack[this.stack.length-1].value=e}function A(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function O(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function R(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(el,tl)}(t),n.identifier=_a(t).toLowerCase()}function L(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function D(){const e=this.resume();this.stack[this.stack.length-1].url=e}function M(){const e=this.resume();this.stack[this.stack.length-1].title=e}function z(){this.data.inReference=void 0}function $(){this.data.referenceType="collapsed"}function F(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=_a(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function U(e){this.data.characterReferenceType=e.type}function q(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let r;if(n)r=ka(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{r=xa(t)}this.stack[this.stack.length-1].value+=r}function B(e){this.stack.pop().position.end=sl(e.end)}function H(e){S.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function W(e){S.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function V(){return{type:"blockquote",children:[]}}function G(){return{type:"code",lang:null,meta:null,value:""}}function J(){return{type:"inlineCode",value:""}}function K(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Y(){return{type:"emphasis",children:[]}}function X(){return{type:"heading",depth:0,children:[]}}function Q(){return{type:"break"}}function Z(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function te(){return{type:"link",title:null,url:"",children:[]}}function ne(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function re(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function se(){return{type:"paragraph",children:[]}}function ie(){return{type:"strong",children:[]}}function ae(){return{type:"text",value:""}}function oe(){return{type:"thematicBreak"}}}(n)(function(e){for(;!io(e););return e}(Qo(n).document().write(function(){let e,t=1,n="",r=!0;return function(s,i,a){const o=[];let l,c,u,d,h;for(s=n+("string"==typeof s?s.toString():new TextDecoder(i||void 0).decode(s)),u=0,n="",r&&(65279===s.charCodeAt(0)&&u++,r=void 0);u<s.length;){if(Zo.lastIndex=u,l=Zo.exec(s),d=l&&void 0!==l.index?l.index:s.length,h=s.charCodeAt(d),!l){n=s.slice(u);break}if(10===h&&u===d&&e)o.push(-3),e=void 0;else switch(e&&(o.push(-5),e=void 0),u<d&&(o.push(s.slice(u,d)),t+=d-u),h){case 0:o.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),o.push(-2);t++<c;)o.push(-1);break;case 10:o.push(-4),t=1;break;default:e=!0,t=1}u=d+1}return a&&(e&&o.push(-5),n&&o.push(n),o.push(null)),o}}()(e,t,!0))))}function sl(e){return{line:e.line,column:e.column,offset:e.offset}}function il(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?il(e,r):al(e,r)}}function al(e,t){let n;for(n in t)if(nl.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function ol(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Wi({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Wi({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Wi({start:t.start,end:t.end})+") is still open")}function ll(e){const t=this;t.parser=function(n){return rl(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function cl(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),i=s[0];i&&"text"===i.type?i.value="["+i.value:s.unshift({type:"text",value:"["});const a=s[s.length-1];return a&&"text"===a.type?a.value+=r:s.push({type:"text",value:r}),s}function ul(e){const t=e.spread;return null==t?e.children.length>1:t}function dl(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const i=[];for(;r;)i.push(hl(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return i.push(hl(t.slice(s),s>0,!1)),i.join("")}function hl(e,t,n){let r=0,s=e.length;if(t){let t=e.codePointAt(r);for(;9===t||32===t;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(s-1);for(;9===t||32===t;)s--,t=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}const fl={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=za(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let a,o=e.footnoteCounts.get(r);void 0===o?(o=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=i+1,o+=1,e.footnoteCounts.set(r,o);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return cl(e,t);const s={src:za(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,i),e.applyData(t,i)},image:function(e,t){const n={src:za(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return cl(e,t);const s={href:za(r.url||"")};null!==r.title&&void 0!==r.title&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},link:function(e,t){const n={href:za(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){const r=e.all(t),s=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=ul(n[r])}return t}(n):ul(t),i={},a=[];if("boolean"==typeof t.checked){const e=r[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const e=r[o];(s||0!==o||"element"!==e.type||"p"!==e.tagName)&&a.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||s?a.push(e):a.push(...e.children)}const l=r[r.length-1];l&&(s||"element"!==l.type||"p"!==l.tagName)&&a.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:i,children:a};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){const n={},r=e.all(t);let s=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++s<r.length;){const e=r[s];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),s.push(n)}if(n.length>0){const r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},i=Bi(t.children[1]),a=qi(t.children[t.children.length-1]);i&&a&&(r.position={start:i,end:a}),s.push(r)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const r=n?n.children:void 0,s=0===(r?r.indexOf(t):1)?"th":"td",i=n&&"table"===n.type?n.align:void 0,a=i?i.length:t.children.length;let o=-1;const l=[];for(;++o<a;){const n=t.children[o],r={},a=i?i[o]:void 0;a&&(r.align=a);let c={type:"element",tagName:s,properties:r,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){const n={type:"text",value:dl(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:pl,yaml:pl,definition:pl,footnoteDefinition:pl};function pl(){}const ml="object"==typeof self?self:globalThis,gl=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),r=s=>{if(e.has(s))return e.get(s);const[i,a]=t[s];switch(i){case 0:case-1:return n(a,s);case 1:{const e=n([],s);for(const t of a)e.push(r(t));return e}case 2:{const e=n({},s);for(const[t,n]of a)e[r(t)]=r(n);return e}case 3:return n(new Date(a),s);case 4:{const{source:e,flags:t}=a;return n(new RegExp(e,t),s)}case 5:{const e=n(new Map,s);for(const[t,n]of a)e.set(r(t),r(n));return e}case 6:{const e=n(new Set,s);for(const t of a)e.add(r(t));return e}case 7:{const{name:e,message:t}=a;return n(new ml[e](t),s)}case 8:return n(BigInt(a),s);case"BigInt":return n(Object(BigInt(a)),s);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:e}=new Uint8Array(a);return n(new DataView(e),a)}}return n(new ml[i](a),s)};return r})(new Map,e)(0),xl="",{toString:yl}={},{keys:vl}=Object,bl=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=yl.call(e).slice(8,-1);switch(n){case"Array":return[1,xl];case"Object":return[2,xl];case"Date":return[3,xl];case"RegExp":return[4,xl];case"Map":return[5,xl];case"Set":return[6,xl];case"DataView":return[1,n]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},wl=([e,t])=>0===e&&("function"===t||"symbol"===t),jl=(e,{json:t,lossy:n}={})=>{const r=[];return((e,t,n,r)=>{const s=(e,t)=>{const s=r.push(e)-1;return n.set(t,s),s},i=r=>{if(n.has(r))return n.get(r);let[a,o]=bl(r);switch(a){case 0:{let t=r;switch(o){case"bigint":a=8,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+o);t=null;break;case"undefined":return s([-1],r)}return s([a,t],r)}case 1:{if(o){let e=r;return"DataView"===o?e=new Uint8Array(r.buffer):"ArrayBuffer"===o&&(e=new Uint8Array(r)),s([o,[...e]],r)}const e=[],t=s([a,e],r);for(const n of r)e.push(i(n));return t}case 2:{if(o)switch(o){case"BigInt":return s([o,r.toString()],r);case"Boolean":case"Number":case"String":return s([o,r.valueOf()],r)}if(t&&"toJSON"in r)return i(r.toJSON());const n=[],l=s([a,n],r);for(const t of vl(r))!e&&wl(bl(r[t]))||n.push([i(t),i(r[t])]);return l}case 3:return s([a,r.toISOString()],r);case 4:{const{source:e,flags:t}=r;return s([a,{source:e,flags:t}],r)}case 5:{const t=[],n=s([a,t],r);for(const[s,a]of r)(e||!wl(bl(s))&&!wl(bl(a)))&&t.push([i(s),i(a)]);return n}case 6:{const t=[],n=s([a,t],r);for(const s of r)!e&&wl(bl(s))||t.push(i(s));return n}}const{message:l}=r;return s([a,{name:o,message:l}],r)};return i})(!(t||n),!!t,new Map,r)(e),r},kl="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?gl(jl(e,t)):structuredClone(e):(e,t)=>gl(jl(e,t));function _l(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Nl(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const Sl=function(e){if(null==e)return Tl;if("function"==typeof e)return El(e);if("object"==typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Sl(e[n]);return El(r);function r(...e){let n=-1;for(;++n<t.length;)if(t[n].apply(this,e))return!0;return!1}}(e):function(e){const t=e;return El(n);function n(n){const r=n;let s;for(s in e)if(r[s]!==t[s])return!1;return!0}}(e);if("string"==typeof e)return function(e){return El(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function El(e){return function(t,n,r){return Boolean(function(e){return null!==e&&"object"==typeof e&&"type"in e}(t)&&e.call(this,t,"number"==typeof n?n:void 0,r||void 0))}}function Tl(){return!0}const Cl=[],Pl=!0,Il=!1;function Al(e,t,n,r){let s;"function"==typeof t&&"function"!=typeof n?(r=n,n=t):s=t;const i=Sl(s),a=r?-1:1;!function e(s,o,l){const c=s&&"object"==typeof s?s:{};if("string"==typeof c.type){const e="string"==typeof c.tagName?c.tagName:"string"==typeof c.name?c.name:void 0;Object.defineProperty(u,"name",{value:"node ("+s.type+(e?"<"+e+">":"")+")"})}return u;function u(){let c,u,d,h=Cl;if((!t||i(s,o,l[l.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"==typeof e)return[Pl,e];return null==e?Cl:[e]}(n(s,l)),h[0]===Il))return h;if("children"in s&&s.children){const t=s;if(t.children&&"skip"!==h[0])for(u=(r?t.children.length:-1)+a,d=l.concat(t);u>-1&&u<t.children.length;){const n=t.children[u];if(c=e(n,u,d)(),c[0]===Il)return c;u="number"==typeof c[1]?c[1]:u+a}}return h}}(e,void 0,[])()}function Ol(e,t,n,r){let s,i,a;"function"==typeof t&&"function"!=typeof n?(i=void 0,a=t,s=n):(i=t,a=n,s=r),Al(e,i,(function(e,t){const n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return a(e,r,n)}),s)}const Rl={}.hasOwnProperty,Ll={};function Dl(e,t){e.position&&(t.position=function(e){const t=Bi(e),n=qi(e);if(t&&n)return{start:t,end:n}}(e))}function Ml(e,t){let n=t;if(e&&e.data){const t=e.data.hName,r=e.data.hChildren,s=e.data.hProperties;if("string"==typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&s&&Object.assign(n.properties,kl(s)),"children"in n&&n.children&&null!=r&&(n.children=r)}return n}function zl(e,t){const n=t.data||{},r=!("value"in t)||Rl.call(n,"hProperties")||Rl.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,r),e.applyData(t,r)}function $l(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function Fl(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function Ul(e,t){const n=function(e,t){const n=t||Ll,r=new Map,s=new Map,i=new Map,a={...fl,...n.handlers},o={all:function(e){const t=[];if("children"in e){const n=e.children;let r=-1;for(;++r<n.length;){const s=o.one(n[r],e);if(s){if(r&&"break"===n[r-1].type&&(Array.isArray(s)||"text"!==s.type||(s.value=Fl(s.value)),!Array.isArray(s)&&"element"===s.type)){const e=s.children[0];e&&"text"===e.type&&(e.value=Fl(e.value))}Array.isArray(s)?t.push(...s):t.push(s)}}}return t},applyData:Ml,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:a,one:function(e,t){const n=e.type,r=o.handlers[n];if(Rl.call(o.handlers,n)&&r)return r(o,e,t);if(o.options.passThrough&&o.options.passThrough.includes(n)){if("children"in e){const{children:t,...n}=e,r=kl(n);return r.children=o.all(e),r}return kl(e)}return(o.options.unknownHandler||zl)(o,e,t)},options:n,patch:Dl,wrap:$l};return Ol(e,(function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?r:s,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}})),o}(e,t),r=n.one(e,void 0),s=function(e){const t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||_l,r=e.options.footnoteBackLabel||Nl,s=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<e.footnoteOrder.length;){const s=e.footnoteById.get(e.footnoteOrder[l]);if(!s)continue;const i=e.all(s),a=String(s.identifier).toUpperCase(),c=za(a.toLowerCase());let u=0;const d=[],h=e.footnoteCounts.get(a);for(;void 0!==h&&++u<=h;){d.length>0&&d.push({type:"text",value:" "});let e="string"==typeof n?n:n(l,u);"string"==typeof e&&(e={type:"text",value:e}),d.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof r?r:r(l,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const f=i[i.length-1];if(f&&"element"===f.type&&"p"===f.tagName){const e=f.children[f.children.length-1];e&&"text"===e.type?e.value+=" ":f.children.push({type:"text",value:" "}),f.children.push(...d)}else i.push(...d);const p={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(i,!0)};e.patch(s,p),o.push(p)}if(0!==o.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...kl(a),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:"\n"}]}}(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:"\n"},s),i}function ql(e,t){return e&&"run"in e?async function(n,r){const s=Ul(n,{file:r,...t});await e.run(s,r)}:function(n,r){return Ul(n,{file:r,...e||t})}}function Bl(e){if(e)throw e}var Hl=Object.prototype.hasOwnProperty,Wl=Object.prototype.toString,Vl=Object.defineProperty,Gl=Object.getOwnPropertyDescriptor,Jl=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===Wl.call(e)},Kl=function(e){if(!e||"[object Object]"!==Wl.call(e))return!1;var t,n=Hl.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Hl.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;for(t in e);return void 0===t||Hl.call(e,t)},Yl=function(e,t){Vl&&"__proto__"===t.name?Vl(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},Xl=function(e,t){if("__proto__"===t){if(!Hl.call(e,t))return;if(Gl)return Gl(e,t).value}return e[t]},Ql=function e(){var t,n,r,s,i,a,o=arguments[0],l=1,c=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[1]||{},l=2),(null==o||"object"!=typeof o&&"function"!=typeof o)&&(o={});l<c;++l)if(null!=(t=arguments[l]))for(n in t)r=Xl(o,n),o!==(s=Xl(t,n))&&(u&&s&&(Kl(s)||(i=Jl(s)))?(i?(i=!1,a=r&&Jl(r)?r:[]):a=r&&Kl(r)?r:{},Yl(o,{name:n,newValue:e(u,a,s)})):void 0!==s&&Yl(o,{name:n,newValue:s}));return o};const Zl=l(Ql);function ec(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)}function tc(){const e=[],t={run:function(...t){let n=-1;const r=t.pop();if("function"!=typeof r)throw new TypeError("Expected function as last argument, not "+r);!function s(i,...a){const o=e[++n];let l=-1;if(i)r(i);else{for(;++l<t.length;)null!==a[l]&&void 0!==a[l]||(a[l]=t[l]);t=a,o?function(e,t){let n;return r;function r(...t){const r=e.length>t.length;let o;r&&t.push(s);try{o=e.apply(this,t)}catch(i){if(r&&n)throw i;return s(i)}r||(o&&o.then&&"function"==typeof o.then?o.then(a,s):o instanceof Error?s(o):a(o))}function s(e,...r){n||(n=!0,t(e,...r))}function a(e){s(null,e)}}(o,s)(...a):r(null,...a)}}(null,...t)},use:function(n){if("function"!=typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const nc={basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');rc(e);let n,r=0,s=-1,i=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;i--;)if(47===e.codePointAt(i)){if(n){r=i+1;break}}else s<0&&(n=!0,s=i+1);return s<0?"":e.slice(r,s)}if(t===e)return"";let a=-1,o=t.length-1;for(;i--;)if(47===e.codePointAt(i)){if(n){r=i+1;break}}else a<0&&(n=!0,a=i+1),o>-1&&(e.codePointAt(i)===t.codePointAt(o--)?o<0&&(s=i):(o=-1,s=a));r===s?s=a:s<0&&(s=e.length);return e.slice(r,s)},dirname:function(e){if(rc(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){rc(e);let t,n=e.length,r=-1,s=0,i=-1,a=0;for(;n--;){const o=e.codePointAt(n);if(47!==o)r<0&&(t=!0,r=n+1),46===o?i<0?i=n:1!==a&&(a=1):i>-1&&(a=-1);else if(t){s=n+1;break}}if(i<0||r<0||0===a||1===a&&i===r-1&&i===s+1)return"";return e.slice(i,r)},join:function(...e){let t,n=-1;for(;++n<e.length;)rc(e[n]),e[n]&&(t=void 0===t?e[n]:t+"/"+e[n]);return void 0===t?".":function(e){rc(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,r,s="",i=0,a=-1,o=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(a===l-1||1===o);else if(a!==l-1&&2===o){if(s.length<2||2!==i||46!==s.codePointAt(s.length-1)||46!==s.codePointAt(s.length-2))if(s.length>2){if(r=s.lastIndexOf("/"),r!==s.length-1){r<0?(s="",i=0):(s=s.slice(0,r),i=s.length-1-s.lastIndexOf("/")),a=l,o=0;continue}}else if(s.length>0){s="",i=0,a=l,o=0;continue}t&&(s=s.length>0?s+"/..":"..",i=2)}else s.length>0?s+="/"+e.slice(a+1,l):s=e.slice(a+1,l),i=l-a-1;a=l,o=0}else 46===n&&o>-1?o++:o=-1}return s}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(t)},sep:"/"};function rc(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const sc={cwd:function(){return"/"}};function ic(e){return Boolean(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function ac(e){if("string"==typeof e)e=new URL(e);else if(!ic(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const oc=["history","path","basename","stem","extname","dirname"];class lc{constructor(e){let t;t=e?ic(e)?{path:e}:"string"==typeof e||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":sc.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,r=-1;for(;++r<oc.length;){const e=oc[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)oc.includes(n)||(this[n]=t[n])}get basename(){return"string"==typeof this.path?nc.basename(this.path):void 0}set basename(e){uc(e,"basename"),cc(e,"basename"),this.path=nc.join(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?nc.dirname(this.path):void 0}set dirname(e){dc(this.basename,"dirname"),this.path=nc.join(e||"",this.basename)}get extname(){return"string"==typeof this.path?nc.extname(this.path):void 0}set extname(e){if(cc(e,"extname"),dc(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=nc.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){ic(e)&&(e=ac(e)),uc(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?nc.basename(this.path,this.extname):void 0}set stem(e){uc(e,"stem"),cc(e,"stem"),this.path=nc.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){const r=new Ki(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){if(void 0===this.value)return"";if("string"==typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function cc(e,t){if(e&&e.includes(nc.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+nc.sep+"`")}function uc(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function dc(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const hc=function(e){const t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};return Object.setPrototypeOf(r,t),r},fc={}.hasOwnProperty;class pc extends hc{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=tc()}copy(){const e=new pc;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(Zl(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2===arguments.length?(yc("data",this.frozen),this.namespace[e]=t,this):fc.call(this.namespace,e)&&this.namespace[e]||void 0:e?(yc("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const r=t.call(e,...n);"function"==typeof r&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=wc(e),n=this.parser||this.Parser;return gc("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),gc("process",this.parser||this.Parser),xc("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,s){const i=wc(e),a=n.parse(i);function o(e,n){e||!n?s(e):r?r(n):t(void 0,n)}n.run(a,i,(function(e,t,r){if(e||!t||!r)return o(e);const s=t,i=n.stringify(s,r);var a;"string"==typeof(a=i)||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(a)?r.value=i:r.result=i,o(e,r)}))}}processSync(e){let t,n=!1;return this.freeze(),gc("processSync",this.parser||this.Parser),xc("processSync",this.compiler||this.Compiler),this.process(e,(function(e,r){n=!0,Bl(e),t=r})),bc("processSync","process",n),t}run(e,t,n){vc(e),this.freeze();const r=this.transformers;return n||"function"!=typeof t||(n=t,t=void 0),n?s(void 0,n):new Promise(s);function s(s,i){const a=wc(t);r.run(e,a,(function(t,r,a){const o=r||e;t?i(t):s?s(o):n(void 0,o,a)}))}}runSync(e,t){let n,r=!1;return this.run(e,t,(function(e,t){Bl(e),n=t,r=!0})),bc("runSync","run",r),n}stringify(e,t){this.freeze();const n=wc(t),r=this.compiler||this.Compiler;return xc("stringify",r),vc(e),r(e,n)}use(e,...t){const n=this.attachers,r=this.namespace;if(yc("use",this.frozen),null==e);else if("function"==typeof e)o(e,t);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?a(e):i(e)}return this;function s(e){if("function"==typeof e)o(e,[]);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;o(t,n)}else i(e)}}function i(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(e.plugins),e.settings&&(r.settings=Zl(!0,r.settings,e.settings))}function a(e){let t=-1;if(null==e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){s(e[t])}}}function o(e,t){let r=-1,s=-1;for(;++r<n.length;)if(n[r][0]===e){s=r;break}if(-1===s)n.push([e,...t]);else if(t.length>0){let[r,...i]=t;const a=n[s][1];ec(a)&&ec(r)&&(r=Zl(!0,a,r)),n[s]=[e,r,...i]}}}}const mc=(new pc).freeze();function gc(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function xc(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function yc(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function vc(e){if(!ec(e)||"string"!=typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function bc(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function wc(e){return function(e){return Boolean(e&&"object"==typeof e&&"message"in e&&"messages"in e)}(e)?e:new lc(e)}const jc=[],kc={allowDangerousHtml:!0},_c=/^(https?|ircs?|mailto|xmpp)$/i,Nc=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Sc(e){const n=function(e){const t=e.rehypePlugins||jc,n=e.remarkPlugins||jc,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...kc}:kc,s=mc().use(ll).use(n).use(ql,r).use(t);return s}(e),r=function(e){const t=e.children||"",n=new lc;"string"==typeof t&&(n.value=t);return n}(e);return function(e,n){const r=n.allowedElements,s=n.allowElement,i=n.components,a=n.disallowedElements,o=n.skipHtml,l=n.unwrapDisallowed,c=n.urlTransform||Ec;for(const t of Nc)Object.hasOwn(n,t.from)&&(t.from,t.to&&t.to,t.id);n.className&&(e={type:"element",tagName:"div",properties:{className:n.className},children:"root"===e.type?e.children:[e]});return Ol(e,u),na(e,{Fragment:t.Fragment,components:i,ignoreInvalidStyle:!0,jsx:t.jsx,jsxs:t.jsxs,passKeys:!0,passNode:!0});function u(e,t,n){if("raw"===e.type&&n&&"number"==typeof t)return o?n.children.splice(t,1):n.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in ha)if(Object.hasOwn(ha,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],r=ha[t];(null===r||r.includes(e.tagName))&&(e.properties[t]=c(String(n||""),t,e))}}if("element"===e.type){let i=r?!r.includes(e.tagName):!!a&&a.includes(e.tagName);if(!i&&s&&"number"==typeof t&&(i=!s(e,t,n)),i&&n&&"number"==typeof t)return l&&e.children?n.children.splice(t,1,...e.children):n.children.splice(t,1),t}}}(n.runSync(n.parse(r),r),e)}function Ec(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return-1===t||-1!==s&&t>s||-1!==n&&t>n||-1!==r&&t>r||_c.test(e.slice(0,t))?e:""}const Tc=({isAuthenticated:e,isAdmin:r,userEmail:s,onLogout:i})=>{const[o,l]=n.useState([]),[c,u]=n.useState(!0),[d,h]=n.useState(null);return n.useEffect((()=>{(async()=>{try{u(!0);const{data:e,error:t}=await Rr.from("articles").select("\n            *,\n            author:profiles (\n              username,\n              avatar_url\n            )\n          ").eq("published",!0).order("created_at",{ascending:!1});if(t)throw t;l(e||[])}catch(e){h(e instanceof Error?e.message:"Ошибка при загрузке статей")}finally{u(!1)}})()}),[]),t.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[t.jsx($r,{cartItems:[],favoritesCount:0,isAuthenticated:e,isAdmin:r,userEmail:s,onLogout:i}),t.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:t.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Блог"}),c?t.jsx("div",{className:"text-center py-12",children:"Загрузка статей..."}):d?t.jsx("div",{className:"bg-red-50 text-red-500 p-3 rounded-md",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(b,{size:20}),d]})}):o.length>0?t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map((e=>{var n;return t.jsxs(a.article,{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow",whileHover:{y:-5},transition:{duration:.2},children:[e.image_url&&t.jsx("img",{src:e.image_url,alt:e.title,className:"w-full h-48 object-cover"}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-3",children:[t.jsx("span",{children:new Date(e.created_at).toLocaleDateString()}),(null==(n=e.author)?void 0:n.username)&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"mx-2",children:"•"}),t.jsx("span",{children:e.author.username})]})]}),t.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-3",children:e.title}),t.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3",children:t.jsx(Sc,{children:e.content})}),t.jsx("a",{href:`/blog/${e.slug}`,className:"text-blue-600 font-medium hover:text-blue-700 transition-colors",children:"Читать далее →"})]})]},e.id)}))}):t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-gray-600",children:"Нет опубликованных статей"})})]})}),t.jsx(Ns,{})]})},Cc=({isAuthenticated:e,isAdmin:r,userEmail:s,onLogout:i})=>{var o;const{slug:l}=function(){let{matches:e}=n.useContext(Ne),t=e[e.length-1];return t?t.params:{}}(),c=Pe(),[u,d]=n.useState(null),[h,f]=n.useState(!0),[p,m]=n.useState(null);return n.useEffect((()=>{l&&(async()=>{try{f(!0);const{data:e,error:t}=await Rr.from("articles").select("\n            *,\n            author:profiles (\n              username,\n              avatar_url\n            )\n          ").eq("slug",l).eq("published",!0).single();if(t)throw t;if(!e)throw new Error("Статья не найдена");d(e)}catch(e){m(e instanceof Error?e.message:"Ошибка при загрузке статьи")}finally{f(!1)}})()}),[l]),h?t.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[t.jsx($r,{cartItems:[],favoritesCount:0}),t.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:t.jsx("div",{className:"text-center py-12",children:"Загрузка статьи..."})}),t.jsx(Ns,{})]}):p||!u?t.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[t.jsx($r,{cartItems:[],favoritesCount:0}),t.jsxs("main",{className:"flex-grow container mx-auto px-4 py-8",children:[t.jsx("div",{className:"bg-red-50 text-red-500 p-3 rounded-md",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(b,{size:20}),p||"Статья не найдена"]})}),t.jsx("button",{onClick:()=>c("/blog"),className:"mt-4 text-blue-600 hover:text-blue-700",children:"← Вернуться к списку статей"})]}),t.jsx(Ns,{})]}):t.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[t.jsx($r,{cartItems:[],favoritesCount:0,isAuthenticated:e,isAdmin:r,userEmail:s,onLogout:i}),t.jsxs("main",{className:"flex-grow",children:[u.image_url&&t.jsxs("div",{className:"w-full h-[400px] relative",children:[t.jsx("img",{src:u.image_url,alt:u.title,className:"w-full h-full object-cover"}),t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("h1",{className:"text-4xl font-bold text-white text-center px-4",children:u.title})})]}),t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[!u.image_url&&t.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:u.title}),t.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-8",children:[t.jsx("span",{children:new Date(u.created_at).toLocaleDateString()}),(null==(o=u.author)?void 0:o.username)&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"mx-2",children:"•"}),t.jsx("span",{children:u.author.username})]})]}),t.jsx("div",{className:"prose prose-lg max-w-none",children:t.jsx(Sc,{children:u.content})}),t.jsx("div",{className:"mt-8 pt-8 border-t",children:t.jsx("button",{onClick:()=>c("/blog"),className:"text-blue-600 hover:text-blue-700",children:"← Вернуться к списку статей"})})]})})]}),t.jsx(Ns,{})]})},Pc=()=>{const[e,r]=n.useState(""),[s,i]=n.useState(""),[o,l]=n.useState(""),[c,u]=n.useState(!1),[d,h]=n.useState(""),f=Pe();n.useEffect((()=>{const{state:e}=window.history.state||{};(null==e?void 0:e.message)&&h(e.message)}),[]);return t.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:t.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md w-full",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Вход в аккаунт"}),d&&t.jsx("div",{className:"bg-green-50 text-green-600 p-3 rounded-md mb-4",children:d}),o&&t.jsx("div",{className:"bg-red-50 text-red-500 p-3 rounded-md mb-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(b,{size:20}),o]})}),t.jsxs("form",{onSubmit:async t=>{t.preventDefault(),u(!0),l(""),h("");try{const{data:{session:t},error:n}=await Rr.auth.signInWithPassword({email:e,password:s});if(n){if(n.message.includes("Invalid login credentials"))throw new Error("Неверный email или пароль");if(n.message.includes("Email not confirmed"))throw new Error("Email не подтвержден. Пожалуйста, проверьте вашу почту.");throw n}if(!t)throw new Error("Ошибка входа: сессия не создана");f("/profile")}catch(n){l(n instanceof Error?n.message:"Произошла ошибка при входе")}finally{u(!1)}},className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),t.jsx("input",{type:"email",value:e,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:c})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Пароль"}),t.jsx("input",{type:"password",value:s,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:c})]}),t.jsx("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 text-white py-2 rounded-md transition-colors "+(c?"opacity-70 cursor-not-allowed":"hover:bg-blue-700"),children:t.jsx("span",{className:"inline-flex items-center",children:c?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Вход..."]}):"Войти"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:"text-gray-600",children:"Нет аккаунта?"})," ",t.jsx("button",{type:"button",onClick:()=>f("/register"),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Зарегистрироваться"})]})]})]})})})},Ic=()=>{const[e,r]=n.useState(""),[s,i]=n.useState(""),[o,l]=n.useState(""),[c,u]=n.useState(""),[d,h]=n.useState(""),[f,p]=n.useState(""),[m,g]=n.useState(!1),x=Pe();return t.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:t.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md w-full",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Регистрация"}),f&&t.jsx("div",{className:"bg-red-50 text-red-500 p-3 rounded-md mb-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(b,{size:20}),f]})}),t.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),g(!0),p(""),s!==o)return p("Пароли не совпадают"),void g(!1);try{const{data:t,error:n}=await Rr.auth.signUp({email:e,password:s,options:{data:{first_name:c,last_name:d},emailRedirectTo:`${window.location.origin}/auth/callback`}});if(n)throw n;x("/confirm-email",{state:{email:e}})}catch(n){n instanceof Error?n.message.includes("User already registered")?p("Пользователь с таким email уже существует"):p(n.message):p("Произошла ошибка при регистрации")}finally{g(!1)}},className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Имя"}),t.jsx("input",{type:"text",value:c,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Фамилия"}),t.jsx("input",{type:"text",value:d,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),t.jsx("input",{type:"email",value:e,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:m})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Пароль"}),t.jsx("input",{type:"password",value:s,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:m,minLength:6})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Подтвердите пароль"}),t.jsx("input",{type:"password",value:o,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:m,minLength:6})]}),t.jsx("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 text-white py-2 rounded-md transition-colors "+(m?"opacity-70 cursor-not-allowed":"hover:bg-blue-700"),children:m?"Регистрация...":"Зарегистрироваться"}),t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:"text-gray-600",children:"Уже есть аккаунт?"})," ",t.jsx("button",{type:"button",onClick:()=>x("/login"),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Войти"})]})]})]})})})},Ac=({cartItems:e,onUpdateQuantity:n,onRemoveFromCart:r})=>{const s=e.reduce(((e,t)=>e+t.price*t.quantity),0);return 0===e.length?t.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[t.jsx($r,{cartItems:e,favoritesCount:0}),t.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Корзина пуста"}),t.jsx("p",{className:"text-gray-600 mb-8",children:"Добавьте товары в корзину, чтобы оформить заказ"}),t.jsx("a",{href:"/",className:"inline-block bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Перейти к покупкам"})]})}),t.jsx(Ns,{})]}):t.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[t.jsx($r,{cartItems:e,favoritesCount:0}),t.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:t.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[t.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-8",children:"Корзина"}),t.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[t.jsx("div",{className:"lg:col-span-2",children:e.map((e=>t.jsx("div",{className:"bg-white rounded-lg p-4 mb-4 shadow-sm",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("img",{src:e.image_url,alt:e.name,className:"w-24 h-24 object-cover rounded-md"}),t.jsxs("div",{className:"ml-4 flex-grow",children:[t.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),t.jsxs("div",{className:"text-lg font-semibold text-gray-900 mt-1",children:[e.price.toLocaleString()," ₽"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>n(Number(e.id),Math.max(0,e.quantity-1)),className:"p-1 rounded-md hover:bg-gray-100",children:t.jsx(I,{size:20})}),t.jsx("span",{className:"w-8 text-center",children:e.quantity}),t.jsx("button",{onClick:()=>n(Number(e.id),e.quantity+1),className:"p-1 rounded-md hover:bg-gray-100",children:t.jsx(A,{size:20})}),t.jsx("button",{onClick:()=>r(Number(e.id)),className:"p-1 rounded-md hover:bg-gray-100 ml-4",children:t.jsx(N,{size:20,className:"text-red-500"})})]})]})},e.id)))}),t.jsx("div",{className:"lg:col-span-1",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[t.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Итого"}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{children:["Товары (",e.length,")"]}),t.jsxs("span",{children:[s.toLocaleString()," ₽"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Доставка"}),t.jsx("span",{children:"Бесплатно"})]})]}),t.jsx("div",{className:"border-t pt-4",children:t.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[t.jsx("span",{children:"К оплате"}),t.jsxs("span",{children:[s.toLocaleString()," ₽"]})]})}),t.jsx("button",{className:"w-full bg-blue-600 text-white py-3 rounded-md mt-6 hover:bg-blue-700 transition-colors",children:"Оформить заказ"})]})})]})]})}),t.jsx(Ns,{})]})},Oc=()=>{var e;const n=Te(),r=Pe(),s=null==(e=n.state)?void 0:e.email;return s?t.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:t.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md w-full",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:t.jsx(c,{className:"w-8 h-8 text-blue-600"})}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Подтвердите ваш email"}),t.jsxs("p",{className:"text-gray-600 mb-6",children:["На адрес ",t.jsx("span",{className:"font-medium text-gray-900",children:s})," было отправлено письмо со ссылкой для подтверждения. Пожалуйста, проверьте вашу почту и перейдите по ссылке для завершения регистрации."]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("a",{href:`https://${s.split("@")[1]}`,target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Открыть почту"}),t.jsx("button",{onClick:()=>r("/login"),className:"block w-full bg-gray-100 text-gray-700 py-2 rounded-md hover:bg-gray-200 transition-colors",children:"Вернуться к входу"})]})]})})}):(r("/register"),null)},Rc=({favorites:e,onAddToCart:n,onRemoveFromFavorites:r})=>0===e.length?t.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[t.jsx($r,{cartItems:[],favoritesCount:0}),t.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Список избранного пуст"}),t.jsx("p",{className:"text-gray-600 mb-8",children:"Добавьте товары в избранное, чтобы сохранить их на потом"}),t.jsx("a",{href:"/",className:"inline-block bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Перейти к покупкам"})]})}),t.jsx(Ns,{})]}):t.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[t.jsx($r,{cartItems:[],favoritesCount:e.length}),t.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:t.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[t.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-8",children:"Избранное"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e.map((e=>t.jsx(ks,{product:e,onAddToCart:n,onAddToFavorites:r},e.id)))})]})}),t.jsx(Ns,{})]}),Lc=()=>{const[e,r]=n.useState(""),[s,i]=n.useState(""),[o,l]=n.useState(""),[c,u]=n.useState(!1),d=Pe();return t.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:t.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md w-full",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Вход в панель администратора"}),o&&t.jsx("div",{className:"bg-red-50 text-red-500 p-3 rounded-md mb-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(b,{size:20}),o]})}),t.jsxs("form",{onSubmit:async t=>{var n;t.preventDefault(),u(!0),l("");try{const{data:t,error:r}=await Rr.auth.signInWithPassword({email:e,password:s});if(r){if(r.message.includes("Invalid login credentials"))throw new Error("Неверный email или пароль");throw new Error(r.message)}if(!(null==(n=t.session)?void 0:n.user))throw new Error("Ошибка аутентификации: сессия не создана");if(!(await Lr()))throw new Error("Доступ запрещен. У вас нет прав администратора.");d("/admin")}catch(r){l(r instanceof Error?r.message:"Ошибка при входе"),await Rr.auth.signOut()}finally{u(!1)}},className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),t.jsx("input",{type:"email",value:e,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:c})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Пароль"}),t.jsx("input",{type:"password",value:s,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:c})]}),t.jsx("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 text-white py-2 rounded-md transition-colors "+(c?"opacity-70 cursor-not-allowed":"hover:bg-blue-700"),children:c?"Вход...":"Войти"}),t.jsxs("div",{className:"relative my-6",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("div",{className:"w-full border-t border-gray-300"})}),t.jsx("div",{className:"relative flex justify-center text-sm",children:t.jsx("span",{className:"px-2 bg-white text-gray-500",children:"или"})})]}),t.jsxs("button",{type:"button",onClick:()=>d("/login"),className:"w-full flex items-center justify-center gap-2 bg-gray-100 text-gray-700 py-2 rounded-md hover:bg-gray-200 transition-colors",children:[t.jsx(h,{size:18}),"Войти через профиль пользователя"]})]})]})})})},Dc=()=>{const[e,r]=s.useState(null),i=Pe();return n.useEffect((()=>{(async()=>{try{const{data:{session:e},error:t}=await Rr.auth.getSession();if(t)throw t;if(!e)throw new Error("No session found");{const{error:t}=await Rr.from("profiles").update({email_verified:!0}).eq("id",e.user.id);if(t)throw t;i("/profile",{replace:!0})}}catch(e){r(e instanceof Error?e.message:"An error occurred during authentication")}})()}),[i]),e?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 px-4",children:t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[t.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[t.jsx(b,{size:20}),t.jsx("p",{children:e})]}),t.jsx("button",{onClick:()=>i("/login"),className:"mt-4 text-blue-600 hover:text-blue-700",children:"Вернуться на страницу входа"})]})}):t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:t.jsx("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:t.jsxs("div",{className:"animate-pulse",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"})]})})})},Mc=()=>{var e,r,s;const[i,o]=n.useState(null),[l,c]=n.useState(""),[u,d]=n.useState(""),[h,f]=n.useState(!1),[p,m]=n.useState(""),[g,x]=n.useState(!1);n.useEffect((()=>{y()}),[]);const y=async()=>{try{const{data:e,error:t}=await Rr.rpc("get_current_profile");if(t)throw t;e&&(o(e),c(e.display_name||""),d(e.avatar_url||""))}catch(e){m(e instanceof Error?e.message:"Ошибка при загрузке профиля")}};return t.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[t.jsx($r,{cartItems:[],favoritesCount:0}),t.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:t.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Мой профиль"}),p&&t.jsxs("div",{className:"mb-4 bg-red-50 text-red-500 p-3 rounded-md flex items-center gap-2",children:[t.jsx(b,{size:20}),p]}),g&&t.jsx("div",{className:"mb-4 bg-green-50 text-green-600 p-3 rounded-md",children:"Профиль успешно обновлен"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx("div",{className:"md:col-span-2",children:t.jsxs("form",{onSubmit:async e=>{e.preventDefault(),f(!0),m(""),x(!1);try{const{data:{user:e}}=await Rr.auth.getUser();if(!e)throw new Error("Пользователь не авторизован");const{error:t}=await Rr.from("profiles").update({display_name:l,avatar_url:u,updated_at:new Date}).eq("user_id",e.id);if(t)throw t;x(!0),await y()}catch(t){m(t instanceof Error?t.message:"Ошибка при обновлении профиля")}finally{f(!1)}},className:"bg-white p-6 rounded-lg shadow-sm space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Фото профиля"}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:u?t.jsx("img",{src:u,alt:"Аватар",className:"w-full h-full object-cover"}):t.jsx(O,{size:32,className:"text-gray-400"})}),t.jsx("input",{type:"url",value:u,onChange:e=>d(e.target.value),placeholder:"URL изображения",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),t.jsx("input",{type:"text",value:l,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Как к вам обращаться?"}),t.jsx("button",{type:"submit",disabled:h,className:"w-full bg-blue-600 text-white py-2 rounded-md transition-colors "+(h?"opacity-70 cursor-not-allowed":"hover:bg-blue-700"),children:h?"Сохранение...":"Сохранить изменения"})]})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[t.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Статистика"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Баланс кошелька"}),t.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[t.jsx("span",{className:"text-xs text-gray-500 mr-1",children:(null==i?void 0:i.is_admin)?"(Админ)":""}),(null==(e=null==i?void 0:i.wallet_balance)?void 0:e.toLocaleString())||0," ₽"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Потрачено всего"}),t.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[(null==(r=null==i?void 0:i.total_spent)?void 0:r.toLocaleString())||0," ₽"]})]})]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[t.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Недавно просмотренные"}),(null==(s=null==i?void 0:i.viewed_products)?void 0:s.length)?t.jsx("div",{className:"space-y-2",children:i.viewed_products.slice(0,5).map((e=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:e.id}),t.jsx("span",{className:"text-xs text-gray-500",children:new Date(e.viewed_at).toLocaleDateString()})]},e.id)))}):t.jsx("p",{className:"text-sm text-gray-500",children:"Нет просмотренных товаров"})]})]})]})]})})}),t.jsx(Ns,{})]})},zc=()=>t.jsx("div",{className:"loading-container",children:t.jsxs("div",{className:"box",children:[t.jsx("div",{className:"loader",children:t.jsx("span",{})}),t.jsx("div",{className:"loader",children:t.jsx("span",{})}),t.jsx("div",{className:"loader",children:t.jsx("i",{})}),t.jsx("div",{className:"loader",children:t.jsx("i",{})})]})}),$c=({product:e,onSubmit:r,onCancel:s})=>{var i,a,o;const[l,c]=n.useState((null==e?void 0:e.name)||""),[u,d]=n.useState((null==e?void 0:e.price.toString())||""),[h,f]=n.useState((null==(i=null==e?void 0:e.old_price)?void 0:i.toString())||""),[p,m]=n.useState((null==e?void 0:e.is_new)||!1),[g,x]=n.useState((null==e?void 0:e.is_bestseller)||!1),[y,v]=n.useState((null==e?void 0:e.description)||""),[w,j]=n.useState((null==e?void 0:e.image_url)||""),[k,_]=n.useState((null==(a=null==e?void 0:e.category_id)?void 0:a.toString())||""),[N,S]=n.useState((null==(o=null==e?void 0:e.inventory)?void 0:o.toString())||"100"),[E,T]=n.useState(""),[C,P]=n.useState(!1),[I,A]=n.useState([]);n.useEffect((()=>{(async()=>{const{data:e,error:t}=await Rr.from("categories").select("*").order("name");t||A(e||[])})()}),[]);return t.jsxs("form",{onSubmit:async t=>{t.preventDefault(),P(!0),T("");try{const t={name:l,price:parseFloat(u),old_price:h?parseFloat(h):null,description:y,category_id:parseInt(k),image_url:w,is_new:p,is_bestseller:g,inventory:parseInt(N),updated_at:new Date};if(null==e?void 0:e.id){const{error:n}=await Rr.from("products").update(t).eq("id",e.id);if(n)throw n}else{const{error:e}=await Rr.from("products").insert([{...t,created_at:new Date}]);if(e)throw e}r()}catch(n){T(n instanceof Error?n.message:"Ошибка при сохранении товара")}finally{P(!1)}},className:"space-y-4",children:[E&&t.jsx("div",{className:"bg-red-50 text-red-500 p-3 rounded-md",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(b,{size:20}),E]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Название товара"}),t.jsx("input",{type:"text",value:l,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Цена"}),t.jsx("input",{type:"number",value:u,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,min:"0",step:"0.01"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Старая цена"}),t.jsx("input",{type:"number",value:h,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",min:"0",step:"0.01"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Количество на складе"}),t.jsx("input",{type:"number",value:N,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,min:"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Категория"}),t.jsxs("select",{value:k,onChange:e=>_(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,children:[t.jsx("option",{value:"",children:"Выберите категорию"}),I.map((e=>t.jsx("option",{value:e.id,children:e.name},e.id)))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL изображения"}),t.jsx("input",{type:"url",value:w,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Описание"}),t.jsx("textarea",{value:y,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:4,required:!0})]}),t.jsxs("div",{className:"flex space-x-4 mb-4",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:p,onChange:e=>m(e.target.checked),className:"mr-2"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Новинка"})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:g,onChange:e=>x(e.target.checked),className:"mr-2"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Хит продаж"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:C,children:"Отмена"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",disabled:C,children:C?"Сохранение...":"Сохранить"})]})]})},Fc=({onProductUpdate:e,currentProduct:r})=>{const[s,o]=n.useState(!1),[l,c]=n.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>o(!0),className:"fixed bottom-4 right-4 z-50 bg-gray-900 text-white p-3 rounded-full shadow-lg hover:bg-gray-800 transition-colors",children:t.jsx(v,{size:24})}),t.jsx(i,{children:s&&t.jsx(a.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},className:"fixed right-0 top-0 h-full w-80 bg-white shadow-xl z-50 overflow-y-auto",children:t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Панель управления"}),t.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700",children:t.jsx(x,{size:20})})]}),t.jsx("div",{className:"space-y-4",children:r?t.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[t.jsx(_,{size:18}),"Редактировать товар"]}):t.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[t.jsx(A,{size:18}),"Добавить товар"]})})]})})}),l&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:r?"Редактировать товар":"Добавить товар"}),t.jsx($c,{product:r,onSubmit:()=>{c(!1),e&&e()},onCancel:()=>c(!1)})]})})]})},Uc={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.8,ease:[.43,.13,.23,.96]}}};function qc(){const[e,n]=s.useState(!0),[r,o]=s.useState(!1),[l,c]=s.useState(!1),[u,d]=s.useState(),[h,f]=s.useState(),[p,m]=s.useState([]),[g,x]=s.useState([]),[y,v]=s.useState(!1),[w,j]=s.useState(!1),[k,_]=s.useState(null);s.useEffect((()=>{const e=setTimeout((()=>{n(!1)}),2500);return()=>clearTimeout(e)}),[]),s.useEffect((()=>{(async()=>{var e,t;const n=await Lr(),r=await Dr(),{data:{session:s}}=await Rr.auth.getSession();o(n),c(r),d(null==(e=null==s?void 0:s.user)?void 0:e.id),f(null==(t=null==s?void 0:s.user)?void 0:t.email)})();const{data:{subscription:e}}=Rr.auth.onAuthStateChange((async(e,t)=>{var n,r;if("SIGNED_IN"===e){const e=await Lr(),s=await Dr();o(e),c(s),d(null==(n=null==t?void 0:t.user)?void 0:n.id),f(null==(r=null==t?void 0:t.user)?void 0:r.email)}else"SIGNED_OUT"===e&&(o(!1),c(!1),d(void 0),f(void 0))}));return()=>{e.unsubscribe()}}),[]),s.useEffect((()=>{(async()=>{if(!u)return m([]),void x([]);try{v(!0),j(!0);const{data:e,error:t}=await Rr.from("cart_items").select("\n            quantity,\n            products (*)\n          ").eq("user_id",u);if(t)throw t;const n=e.filter((e=>e.products)).map((e=>({...e.products,quantity:e.quantity})));m(n);const{data:r,error:s}=await Rr.from("favorites").select("products (*)").eq("user_id",u);if(s)throw s;const i=r.filter((e=>e.products)).map((e=>e.products));x(i)}catch(e){_(e instanceof Error?e.message:"Ошибка загрузки данных пользователя")}finally{v(!1),j(!1)}})()}),[u]);const N=async()=>{await Rr.auth.signOut(),o(!1),f(void 0),m([]),x([])},S=async e=>{if(u)try{const t=p.find((t=>t.id===e.id)),n=t?t.quantity+1:1;if(t){const{error:t}=await Rr.from("cart_items").update({quantity:n}).eq("user_id",u).eq("product_id",e.id);if(t)throw t}else{const{error:t}=await Rr.from("cart_items").insert({user_id:u,product_id:e.id,quantity:1});if(t)throw t}m((t=>t.find((t=>t.id===e.id))?t.map((t=>t.id===e.id?{...t,quantity:t.quantity+1}:t)):[...t,{...e,quantity:1}]))}catch(t){_(t instanceof Error?t.message:"Ошибка при добавлении в корзину")}else _("Необходимо войти в аккаунт")},E=async e=>{if(u)try{if(g.some((t=>t.id===e.id))){const{error:t}=await Rr.from("favorites").delete().eq("user_id",u).eq("product_id",e.id);if(t)throw t;x((t=>t.filter((t=>t.id!==e.id))))}else{const{error:t}=await Rr.from("favorites").insert({user_id:u,product_id:e.id});if(t)throw t;x((t=>[...t,e]))}}catch(t){_(t instanceof Error?t.message:"Ошибка при обновлении избранного")}else _("Необходимо войти в аккаунт")};return t.jsx("div",{className:"min-h-screen bg-gray-50",children:t.jsx(i,{mode:"wait",children:t.jsx(Ge,{children:e?t.jsx(a.div,{initial:{opacity:1},exit:{opacity:0,transition:{duration:.5}},children:t.jsx(zc,{})},"loader"):t.jsxs(a.div,{variants:Uc,initial:"hidden",animate:"visible",className:"w-full",children:[k&&t.jsx("div",{className:"fixed top-4 right-4 z-50 bg-red-50 text-red-500 p-3 rounded-md shadow-lg",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(b,{size:20}),k]})}),t.jsxs(qe,{children:[t.jsx(Fe,{path:"/",element:t.jsx(Cs,{cartItems:p,favorites:g,isAuthenticated:l,currentUserId:u,onAddToCart:S,onToggleFavorite:E,isAuthenticated:l,currentUserId:u,isAdmin:r,userEmail:h,onLogout:N})}),t.jsx(Fe,{path:"/about",element:t.jsx(Ps,{isAdmin:r,userEmail:h,onLogout:N})}),t.jsx(Fe,{path:"/blog",element:t.jsx(Tc,{})}),t.jsx(Fe,{path:"/blog/:slug",element:t.jsx(Cc,{})}),t.jsx(Fe,{path:"/cart",element:t.jsx(Ac,{cartItems:p,onUpdateQuantity:async(e,t)=>{if(u)try{if(0===t){const{error:t}=await Rr.from("cart_items").delete().eq("user_id",u).eq("product_id",e);if(t)throw t;m((t=>t.filter((t=>t.id!==e))))}else{const{error:n}=await Rr.from("cart_items").update({quantity:t}).eq("user_id",u).eq("product_id",e);if(n)throw n;m((n=>n.map((n=>n.id===e?{...n,quantity:t}:n))))}}catch(n){_(n instanceof Error?n.message:"Ошибка при обновлении количества")}else _("Необходимо войти в аккаунт")},onRemoveFromCart:async e=>{if(u)try{const{error:t}=await Rr.from("cart_items").delete().eq("user_id",u).eq("product_id",e);if(t)throw t;m((t=>t.filter((t=>t.id!==e))))}catch(t){_(t instanceof Error?t.message:"Ошибка при удалении из корзины")}else _("Необходимо войти в аккаунт")}})}),t.jsx(Fe,{path:"/favorites",element:t.jsx(Rc,{favorites:g,onAddToCart:S,onRemoveFromFavorites:E})}),t.jsx(Fe,{path:"/login",element:t.jsx(Pc,{})}),t.jsx(Fe,{path:"/register",element:t.jsx(Ic,{})}),t.jsx(Fe,{path:"/profile",element:t.jsx(Mc,{})}),t.jsx(Fe,{path:"/confirm-email",element:t.jsx(Oc,{})}),t.jsx(Fe,{path:"/admin/login",element:t.jsx(Lc,{})}),t.jsx(Fe,{path:"/auth/callback",element:t.jsx(Dc,{})})]}),r&&t.jsx(Fc,{})]},"content")})})})}R(document.getElementById("root")).render(t.jsx(n.StrictMode,{children:t.jsx(qc,{})}));
